!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/glimmerx-realworld-example-app/",n(n.s=1)}([function(e,t,n){e.exports=function(){"use strict";function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function n(e,n){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,n){if(e){if("string"==typeof e)return t(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?t(e,n):void 0}}(e))||n&&e&&"number"==typeof e.length){r&&(e=r);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(r=e[Symbol.iterator]()).next.bind(r)}var r=function(e,t){return e(t={exports:{}},t.exports),t.exports}((function(e){function t(){return{baseUrl:null,breaks:!1,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}}e.exports={defaults:{baseUrl:null,breaks:!1,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1},getDefaults:t,changeDefaults:function(t){e.exports.defaults=t}}})),i=(r.defaults,r.getDefaults,r.changeDefaults,/[&<>"']/),s=/[&<>"']/g,a=/[<>"']|&(?!#?\w+;)/,l=/[<>"']|&(?!#?\w+;)/g,o={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},u=function(e){return o[e]},c=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi;function h(e){return e.replace(c,(function(e,t){return"colon"===(t=t.toLowerCase())?":":"#"===t.charAt(0)?"x"===t.charAt(1)?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):""}))}var p=/(^|[^\[])\^/g,d=/[^\w:]/g,f=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i,m={},g=/^[^:]+:\/*[^/]*$/,b=/^([^:]+:)[\s\S]*$/,v=/^([^:]+:\/*[^/]*)[\s\S]*$/;function y(e,t){m[" "+e]||(g.test(e)?m[" "+e]=e+"/":m[" "+e]=k(e,"/",!0));var n=-1===(e=m[" "+e]).indexOf(":");return"//"===t.substring(0,2)?n?t:e.replace(b,"$1")+t:"/"===t.charAt(0)?n?t:e.replace(v,"$1")+t:e+t}function k(e,t,n){var r=e.length;if(0===r)return"";for(var i=0;i<r;){var s=e.charAt(r-i-1);if(s!==t||n){if(s===t||!n)break;i++}else i++}return e.substr(0,r-i)}var w=function(e,t){if(t){if(i.test(e))return e.replace(s,u)}else if(a.test(e))return e.replace(l,u);return e},x=h,S=function(e,t){e=e.source||e,t=t||"";var n={replace:function(t,r){return r=(r=r.source||r).replace(p,"$1"),e=e.replace(t,r),n},getRegex:function(){return new RegExp(e,t)}};return n},E=function(e,t,n){if(e){var r;try{r=decodeURIComponent(h(n)).replace(d,"").toLowerCase()}catch(e){return null}if(0===r.indexOf("javascript:")||0===r.indexOf("vbscript:")||0===r.indexOf("data:"))return null}t&&!f.test(n)&&(n=y(t,n));try{n=encodeURI(n).replace(/%25/g,"%")}catch(e){return null}return n},A={exec:function(){}},C=function(e){for(var t,n,r=1;r<arguments.length;r++)for(n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},z=function(e,t){var n=e.replace(/\|/g,(function(e,t,n){for(var r=!1,i=t;--i>=0&&"\\"===n[i];)r=!r;return r?"|":" |"})).split(/ \|/),r=0;if(n.length>t)n.splice(t);else for(;n.length<t;)n.push("");for(;r<n.length;r++)n[r]=n[r].trim().replace(/\\\|/g,"|");return n},_=k,T=function(e,t){if(-1===e.indexOf(t[1]))return-1;for(var n=e.length,r=0,i=0;i<n;i++)if("\\"===e[i])i++;else if(e[i]===t[0])r++;else if(e[i]===t[1]&&--r<0)return i;return-1},O=function(e){e&&e.sanitize&&!e.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")},R=r.defaults,L=_,P=z,M=w,N=T;function B(e,t,n){var r=t.href,i=t.title?M(t.title):null,s=e[1].replace(/\\([\[\]])/g,"$1");return"!"!==e[0].charAt(0)?{type:"link",raw:n,href:r,title:i,text:s}:{type:"image",raw:n,href:r,title:i,text:M(s)}}var D=function(){function e(e){this.options=e||R}var t=e.prototype;return t.space=function(e){var t=this.rules.block.newline.exec(e);if(t)return t[0].length>1?{type:"space",raw:t[0]}:{raw:"\n"}},t.code=function(e,t){var n=this.rules.block.code.exec(e);if(n){var r=t[t.length-1];if(r&&"paragraph"===r.type)return{raw:n[0],text:n[0].trimRight()};var i=n[0].replace(/^ {4}/gm,"");return{type:"code",raw:n[0],codeBlockStyle:"indented",text:this.options.pedantic?i:L(i,"\n")}}},t.fences=function(e){var t=this.rules.block.fences.exec(e);if(t){var n=t[0],r=function(e,t){var n=e.match(/^(\s+)(?:```)/);if(null===n)return t;var r=n[1];return t.split("\n").map((function(e){var t=e.match(/^\s+/);return null===t?e:t[0].length>=r.length?e.slice(r.length):e})).join("\n")}(n,t[3]||"");return{type:"code",raw:n,lang:t[2]?t[2].trim():t[2],text:r}}},t.heading=function(e){var t=this.rules.block.heading.exec(e);if(t)return{type:"heading",raw:t[0],depth:t[1].length,text:t[2]}},t.nptable=function(e){var t=this.rules.block.nptable.exec(e);if(t){var n={type:"table",header:P(t[1].replace(/^ *| *\| *$/g,"")),align:t[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:t[3]?t[3].replace(/\n$/,"").split("\n"):[],raw:t[0]};if(n.header.length===n.align.length){var r,i=n.align.length;for(r=0;r<i;r++)/^ *-+: *$/.test(n.align[r])?n.align[r]="right":/^ *:-+: *$/.test(n.align[r])?n.align[r]="center":/^ *:-+ *$/.test(n.align[r])?n.align[r]="left":n.align[r]=null;for(i=n.cells.length,r=0;r<i;r++)n.cells[r]=P(n.cells[r],n.header.length);return n}}},t.hr=function(e){var t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:t[0]}},t.blockquote=function(e){var t=this.rules.block.blockquote.exec(e);if(t){var n=t[0].replace(/^ *> ?/gm,"");return{type:"blockquote",raw:t[0],text:n}}},t.list=function(e){var t=this.rules.block.list.exec(e);if(t){for(var n,r,i,s,a,l,o,u=t[0],c=t[2],h=c.length>1,p=")"===c[c.length-1],d={type:"list",raw:u,ordered:h,start:h?+c.slice(0,-1):"",loose:!1,items:[]},f=t[0].match(this.rules.block.item),m=!1,g=f.length,b=0;b<g;b++)u=n=f[b],r=n.length,~(n=n.replace(/^ *([*+-]|\d+[.)]) */,"")).indexOf("\n ")&&(r-=n.length,n=this.options.pedantic?n.replace(/^ {1,4}/gm,""):n.replace(new RegExp("^ {1,"+r+"}","gm"),"")),b!==g-1&&(i=this.rules.block.bullet.exec(f[b+1])[0],(h?1===i.length||!p&&")"===i[i.length-1]:i.length>1||this.options.smartLists&&i!==c)&&(s=f.slice(b+1).join("\n"),d.raw=d.raw.substring(0,d.raw.length-s.length),b=g-1)),a=m||/\n\n(?!\s*$)/.test(n),b!==g-1&&(m="\n"===n.charAt(n.length-1),a||(a=m)),a&&(d.loose=!0),o=void 0,(l=/^\[[ xX]\] /.test(n))&&(o=" "!==n[1],n=n.replace(/^\[[ xX]\] +/,"")),d.items.push({type:"list_item",raw:u,task:l,checked:o,loose:a,text:n});return d}},t.html=function(e){var t=this.rules.block.html.exec(e);if(t)return{type:this.options.sanitize?"paragraph":"html",raw:t[0],pre:!this.options.sanitizer&&("pre"===t[1]||"script"===t[1]||"style"===t[1]),text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(t[0]):M(t[0]):t[0]}},t.def=function(e){var t=this.rules.block.def.exec(e);if(t)return t[3]&&(t[3]=t[3].substring(1,t[3].length-1)),{tag:t[1].toLowerCase().replace(/\s+/g," "),raw:t[0],href:t[2],title:t[3]}},t.table=function(e){var t=this.rules.block.table.exec(e);if(t){var n={type:"table",header:P(t[1].replace(/^ *| *\| *$/g,"")),align:t[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:t[3]?t[3].replace(/\n$/,"").split("\n"):[]};if(n.header.length===n.align.length){n.raw=t[0];var r,i=n.align.length;for(r=0;r<i;r++)/^ *-+: *$/.test(n.align[r])?n.align[r]="right":/^ *:-+: *$/.test(n.align[r])?n.align[r]="center":/^ *:-+ *$/.test(n.align[r])?n.align[r]="left":n.align[r]=null;for(i=n.cells.length,r=0;r<i;r++)n.cells[r]=P(n.cells[r].replace(/^ *\| *| *\| *$/g,""),n.header.length);return n}}},t.lheading=function(e){var t=this.rules.block.lheading.exec(e);if(t)return{type:"heading",raw:t[0],depth:"="===t[2].charAt(0)?1:2,text:t[1]}},t.paragraph=function(e){var t=this.rules.block.paragraph.exec(e);if(t)return{type:"paragraph",raw:t[0],text:"\n"===t[1].charAt(t[1].length-1)?t[1].slice(0,-1):t[1]}},t.text=function(e,t){var n=this.rules.block.text.exec(e);if(n){var r=t[t.length-1];return r&&"text"===r.type?{raw:n[0],text:n[0]}:{type:"text",raw:n[0],text:n[0]}}},t.escape=function(e){var t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:M(t[1])}},t.tag=function(e,t,n){var r=this.rules.inline.tag.exec(e);if(r)return!t&&/^<a /i.test(r[0])?t=!0:t&&/^<\/a>/i.test(r[0])&&(t=!1),!n&&/^<(pre|code|kbd|script)(\s|>)/i.test(r[0])?n=!0:n&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(r[0])&&(n=!1),{type:this.options.sanitize?"text":"html",raw:r[0],inLink:t,inRawBlock:n,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(r[0]):M(r[0]):r[0]}},t.link=function(e){var t=this.rules.inline.link.exec(e);if(t){var n=N(t[2],"()");if(n>-1){var r=(0===t[0].indexOf("!")?5:4)+t[1].length+n;t[2]=t[2].substring(0,n),t[0]=t[0].substring(0,r).trim(),t[3]=""}var i=t[2],s="";if(this.options.pedantic){var a=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(i);a?(i=a[1],s=a[3]):s=""}else s=t[3]?t[3].slice(1,-1):"";return B(t,{href:(i=i.trim().replace(/^<([\s\S]*)>$/,"$1"))?i.replace(this.rules.inline._escapes,"$1"):i,title:s?s.replace(this.rules.inline._escapes,"$1"):s},t[0])}},t.reflink=function(e,t){var n;if((n=this.rules.inline.reflink.exec(e))||(n=this.rules.inline.nolink.exec(e))){var r=(n[2]||n[1]).replace(/\s+/g," ");if(!(r=t[r.toLowerCase()])||!r.href){var i=n[0].charAt(0);return{type:"text",raw:i,text:i}}return B(n,r,n[0])}},t.strong=function(e,t,n){void 0===n&&(n="");var r=this.rules.inline.strong.start.exec(e);if(r&&(!r[1]||r[1]&&(""===n||this.rules.inline.punctuation.exec(n)))){t=t.slice(-1*e.length);var i,s="**"===r[0]?this.rules.inline.strong.endAst:this.rules.inline.strong.endUnd;for(s.lastIndex=0;null!=(r=s.exec(t));)if(i=this.rules.inline.strong.middle.exec(t.slice(0,r.index+3)))return{type:"strong",raw:e.slice(0,i[0].length),text:e.slice(2,i[0].length-2)}}},t.em=function(e,t,n){void 0===n&&(n="");var r=this.rules.inline.em.start.exec(e);if(r&&(!r[1]||r[1]&&(""===n||this.rules.inline.punctuation.exec(n)))){t=t.slice(-1*e.length);var i,s="*"===r[0]?this.rules.inline.em.endAst:this.rules.inline.em.endUnd;for(s.lastIndex=0;null!=(r=s.exec(t));)if(i=this.rules.inline.em.middle.exec(t.slice(0,r.index+2)))return{type:"em",raw:e.slice(0,i[0].length),text:e.slice(1,i[0].length-1)}}},t.codespan=function(e){var t=this.rules.inline.code.exec(e);if(t){var n=t[2].replace(/\n/g," "),r=/[^ ]/.test(n),i=n.startsWith(" ")&&n.endsWith(" ");return r&&i&&(n=n.substring(1,n.length-1)),n=M(n,!0),{type:"codespan",raw:t[0],text:n}}},t.br=function(e){var t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}},t.del=function(e){var t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[1]}},t.autolink=function(e,t){var n,r,i=this.rules.inline.autolink.exec(e);if(i)return r="@"===i[2]?"mailto:"+(n=M(this.options.mangle?t(i[1]):i[1])):n=M(i[1]),{type:"link",raw:i[0],text:n,href:r,tokens:[{type:"text",raw:n,text:n}]}},t.url=function(e,t){var n;if(n=this.rules.inline.url.exec(e)){var r,i;if("@"===n[2])i="mailto:"+(r=M(this.options.mangle?t(n[0]):n[0]));else{var s;do{s=n[0],n[0]=this.rules.inline._backpedal.exec(n[0])[0]}while(s!==n[0]);r=M(n[0]),i="www."===n[1]?"http://"+r:r}return{type:"link",raw:n[0],text:r,href:i,tokens:[{type:"text",raw:r,text:r}]}}},t.inlineText=function(e,t,n){var r,i=this.rules.inline.text.exec(e);if(i)return r=t?this.options.sanitize?this.options.sanitizer?this.options.sanitizer(i[0]):M(i[0]):i[0]:M(this.options.smartypants?n(i[0]):i[0]),{type:"text",raw:i[0],text:r}},e}(),j=A,U=S,I=C,H={newline:/^\n+/,code:/^( {4}[^\n]+\n*)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*\n)|~{3,})([^\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?:\n+|$)|$)/,hr:/^ {0,3}((?:- *){3,}|(?:_ *){3,}|(?:\* *){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6}) +([^\n]*?)(?: +#+)? *(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3})(bull) [\s\S]+?(?:hr|def|\n{2,}(?! )(?!\1bull )\n*|\s*$)/,html:"^ {0,3}(?:<(script|pre|style)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?\\?>\\n*|<![A-Z][\\s\\S]*?>\\n*|<!\\[CDATA\\[[\\s\\S]*?\\]\\]>\\n*|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:\\n{2,}|$)|<(?!script|pre|style)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:\\n{2,}|$)|</(?!script|pre|style)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:\\n{2,}|$))",def:/^ {0,3}\[(label)\]: *\n? *<?([^\s>]+)>?(?:(?: +\n? *| *\n *)(title))? *(?:\n+|$)/,nptable:j,table:j,lheading:/^([^\n]+)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html)[^\n]+)*)/,text:/^[^\n]+/,_label:/(?!\s*\])(?:\\[\[\]]|[^\[\]])+/,_title:/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/};H.def=U(H.def).replace("label",H._label).replace("title",H._title).getRegex(),H.bullet=/(?:[*+-]|\d{1,9}[.)])/,H.item=/^( *)(bull) ?[^\n]*(?:\n(?!\1bull ?)[^\n]*)*/,H.item=U(H.item,"gm").replace(/bull/g,H.bullet).getRegex(),H.list=U(H.list).replace(/bull/g,H.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+H.def.source+")").getRegex(),H._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",H._comment=/<!--(?!-?>)[\s\S]*?-->/,H.html=U(H.html,"i").replace("comment",H._comment).replace("tag",H._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),H.paragraph=U(H._paragraph).replace("hr",H.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|!--)").replace("tag",H._tag).getRegex(),H.blockquote=U(H.blockquote).replace("paragraph",H.paragraph).getRegex(),H.normal=I({},H),H.gfm=I({},H.normal,{nptable:"^ *([^|\\n ].*\\|.*)\\n *([-:]+ *\\|[-| :]*)(?:\\n((?:(?!\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)",table:"^ *\\|(.+)\\n *\\|?( *[-:]+[-| :]*)(?:\\n *((?:(?!\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"}),H.gfm.nptable=U(H.gfm.nptable).replace("hr",H.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|!--)").replace("tag",H._tag).getRegex(),H.gfm.table=U(H.gfm.table).replace("hr",H.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|!--)").replace("tag",H._tag).getRegex(),H.pedantic=I({},H.normal,{html:U("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",H._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^ *(#{1,6}) *([^\n]+?) *(?:#+ *)?(?:\n+|$)/,fences:j,paragraph:U(H.normal._paragraph).replace("hr",H.hr).replace("heading"," *#{1,6} *[^\n]").replace("lheading",H.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()});var $={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:j,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(?!\s*\])((?:\\[\[\]]?|[^\[\]\\])+)\]/,nolink:/^!?\[(?!\s*\])((?:\[[^\[\]]*\]|\\[\[\]]|[^\[\]])*)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",strong:{start:/^(?:(\*\*(?=[*punctuation]))|\*\*)(?![\s])|__/,middle:/^\*\*(?:(?:(?!overlapSkip)(?:[^*]|\\\*)|overlapSkip)|\*(?:(?!overlapSkip)(?:[^*]|\\\*)|overlapSkip)*?\*)+?\*\*$|^__(?![\s])((?:(?:(?!overlapSkip)(?:[^_]|\\_)|overlapSkip)|_(?:(?!overlapSkip)(?:[^_]|\\_)|overlapSkip)*?_)+?)__$/,endAst:/[^punctuation\s]\*\*(?!\*)|[punctuation]\*\*(?!\*)(?:(?=[punctuation\s]|$))/,endUnd:/[^\s]__(?!_)(?:(?=[punctuation\s])|$)/},em:{start:/^(?:(\*(?=[punctuation]))|\*)(?![*\s])|_/,middle:/^\*(?:(?:(?!overlapSkip)(?:[^*]|\\\*)|overlapSkip)|\*(?:(?!overlapSkip)(?:[^*]|\\\*)|overlapSkip)*?\*)+?\*$|^_(?![_\s])(?:(?:(?!overlapSkip)(?:[^_]|\\_)|overlapSkip)|_(?:(?!overlapSkip)(?:[^_]|\\_)|overlapSkip)*?_)+?_$/,endAst:/[^punctuation\s]\*(?!\*)|[punctuation]\*(?!\*)(?:(?=[punctuation\s]|$))/,endUnd:/[^\s]_(?!_)(?:(?=[punctuation\s])|$)/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:j,text:/^(`+|[^`])(?:[\s\S]*?(?:(?=[\\<!\[`*]|\b_|$)|[^ ](?= {2,}\n))|(?= {2,}\n))/,punctuation:/^([\s*punctuation])/,_punctuation:"!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~"};$.punctuation=U($.punctuation).replace(/punctuation/g,$._punctuation).getRegex(),$._blockSkip="\\[[^\\]]*?\\]\\([^\\)]*?\\)|`[^`]*?`|<[^>]*?>",$._overlapSkip="__[^_]*?__|\\*\\*\\[^\\*\\]*?\\*\\*",$.em.start=U($.em.start).replace(/punctuation/g,$._punctuation).getRegex(),$.em.middle=U($.em.middle).replace(/punctuation/g,$._punctuation).replace(/overlapSkip/g,$._overlapSkip).getRegex(),$.em.endAst=U($.em.endAst,"g").replace(/punctuation/g,$._punctuation).getRegex(),$.em.endUnd=U($.em.endUnd,"g").replace(/punctuation/g,$._punctuation).getRegex(),$.strong.start=U($.strong.start).replace(/punctuation/g,$._punctuation).getRegex(),$.strong.middle=U($.strong.middle).replace(/punctuation/g,$._punctuation).replace(/blockSkip/g,$._blockSkip).getRegex(),$.strong.endAst=U($.strong.endAst,"g").replace(/punctuation/g,$._punctuation).getRegex(),$.strong.endUnd=U($.strong.endUnd,"g").replace(/punctuation/g,$._punctuation).getRegex(),$.blockSkip=U($._blockSkip,"g").getRegex(),$.overlapSkip=U($._overlapSkip,"g").getRegex(),$._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g,$._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,$._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,$.autolink=U($.autolink).replace("scheme",$._scheme).replace("email",$._email).getRegex(),$._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,$.tag=U($.tag).replace("comment",H._comment).replace("attribute",$._attribute).getRegex(),$._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,$._href=/<(?:\\[<>]?|[^\s<>\\])*>|[^\s\x00-\x1f]*/,$._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,$.link=U($.link).replace("label",$._label).replace("href",$._href).replace("title",$._title).getRegex(),$.reflink=U($.reflink).replace("label",$._label).getRegex(),$.reflinkSearch=U($.reflinkSearch,"g").replace("reflink",$.reflink).replace("nolink",$.nolink).getRegex(),$.normal=I({},$),$.pedantic=I({},$.normal,{strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:U(/^!?\[(label)\]\((.*?)\)/).replace("label",$._label).getRegex(),reflink:U(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",$._label).getRegex()}),$.gfm=I({},$.normal,{escape:U($.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^~+(?=\S)([\s\S]*?\S)~+/,text:/^(`+|[^`])(?:[\s\S]*?(?:(?=[\\<!\[`*~]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@))|(?= {2,}\n|[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@))/}),$.gfm.url=U($.gfm.url,"i").replace("email",$.gfm._extended_email).getRegex(),$.breaks=I({},$.gfm,{br:U($.br).replace("{2,}","*").getRegex(),text:U($.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()});var F={block:H,inline:$},V=r.defaults,q=F.block,W=F.inline;function J(e){return e.replace(/---/g,"—").replace(/--/g,"–").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1‘").replace(/'/g,"’").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1“").replace(/"/g,"”").replace(/\.{3}/g,"…")}function G(e){var t,n,r="",i=e.length;for(t=0;t<i;t++)n=e.charCodeAt(t),Math.random()>.5&&(n="x"+n.toString(16)),r+="&#"+n+";";return r}var Z=function(){function t(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||V,this.options.tokenizer=this.options.tokenizer||new D,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options;var t={block:q.normal,inline:W.normal};this.options.pedantic?(t.block=q.pedantic,t.inline=W.pedantic):this.options.gfm&&(t.block=q.gfm,this.options.breaks?t.inline=W.breaks:t.inline=W.gfm),this.tokenizer.rules=t}t.lex=function(e,n){return new t(n).lex(e)};var n,r,i,s=t.prototype;return s.lex=function(e){return e=e.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    "),this.blockTokens(e,this.tokens,!0),this.inline(this.tokens),this.tokens},s.blockTokens=function(e,t,n){var r,i,s,a;for(void 0===t&&(t=[]),void 0===n&&(n=!0),e=e.replace(/^ +$/gm,"");e;)if(r=this.tokenizer.space(e))e=e.substring(r.raw.length),r.type&&t.push(r);else if(r=this.tokenizer.code(e,t))e=e.substring(r.raw.length),r.type?t.push(r):((a=t[t.length-1]).raw+="\n"+r.raw,a.text+="\n"+r.text);else if(r=this.tokenizer.fences(e))e=e.substring(r.raw.length),t.push(r);else if(r=this.tokenizer.heading(e))e=e.substring(r.raw.length),t.push(r);else if(r=this.tokenizer.nptable(e))e=e.substring(r.raw.length),t.push(r);else if(r=this.tokenizer.hr(e))e=e.substring(r.raw.length),t.push(r);else if(r=this.tokenizer.blockquote(e))e=e.substring(r.raw.length),r.tokens=this.blockTokens(r.text,[],n),t.push(r);else if(r=this.tokenizer.list(e)){for(e=e.substring(r.raw.length),s=r.items.length,i=0;i<s;i++)r.items[i].tokens=this.blockTokens(r.items[i].text,[],!1);t.push(r)}else if(r=this.tokenizer.html(e))e=e.substring(r.raw.length),t.push(r);else if(n&&(r=this.tokenizer.def(e)))e=e.substring(r.raw.length),this.tokens.links[r.tag]||(this.tokens.links[r.tag]={href:r.href,title:r.title});else if(r=this.tokenizer.table(e))e=e.substring(r.raw.length),t.push(r);else if(r=this.tokenizer.lheading(e))e=e.substring(r.raw.length),t.push(r);else if(n&&(r=this.tokenizer.paragraph(e)))e=e.substring(r.raw.length),t.push(r);else if(r=this.tokenizer.text(e,t))e=e.substring(r.raw.length),r.type?t.push(r):((a=t[t.length-1]).raw+="\n"+r.raw,a.text+="\n"+r.text);else if(e){var l="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(l);break}throw new Error(l)}return t},s.inline=function(e){var t,n,r,i,s,a,l=e.length;for(t=0;t<l;t++)switch((a=e[t]).type){case"paragraph":case"text":case"heading":a.tokens=[],this.inlineTokens(a.text,a.tokens);break;case"table":for(a.tokens={header:[],cells:[]},i=a.header.length,n=0;n<i;n++)a.tokens.header[n]=[],this.inlineTokens(a.header[n],a.tokens.header[n]);for(i=a.cells.length,n=0;n<i;n++)for(s=a.cells[n],a.tokens.cells[n]=[],r=0;r<s.length;r++)a.tokens.cells[n][r]=[],this.inlineTokens(s[r],a.tokens.cells[n][r]);break;case"blockquote":this.inline(a.tokens);break;case"list":for(i=a.items.length,n=0;n<i;n++)this.inline(a.items[n].tokens)}return e},s.inlineTokens=function(e,t,n,r,i){var s;void 0===t&&(t=[]),void 0===n&&(n=!1),void 0===r&&(r=!1),void 0===i&&(i="");var a,l=e;if(this.tokens.links){var o=Object.keys(this.tokens.links);if(o.length>0)for(;null!=(a=this.tokenizer.rules.inline.reflinkSearch.exec(l));)o.includes(a[0].slice(a[0].lastIndexOf("[")+1,-1))&&(l=l.slice(0,a.index)+"["+"a".repeat(a[0].length-2)+"]"+l.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;null!=(a=this.tokenizer.rules.inline.blockSkip.exec(l));)l=l.slice(0,a.index)+"["+"a".repeat(a[0].length-2)+"]"+l.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;e;)if(s=this.tokenizer.escape(e))e=e.substring(s.raw.length),t.push(s);else if(s=this.tokenizer.tag(e,n,r))e=e.substring(s.raw.length),n=s.inLink,r=s.inRawBlock,t.push(s);else if(s=this.tokenizer.link(e))e=e.substring(s.raw.length),"link"===s.type&&(s.tokens=this.inlineTokens(s.text,[],!0,r)),t.push(s);else if(s=this.tokenizer.reflink(e,this.tokens.links))e=e.substring(s.raw.length),"link"===s.type&&(s.tokens=this.inlineTokens(s.text,[],!0,r)),t.push(s);else if(s=this.tokenizer.strong(e,l,i))e=e.substring(s.raw.length),s.tokens=this.inlineTokens(s.text,[],n,r),t.push(s);else if(s=this.tokenizer.em(e,l,i))e=e.substring(s.raw.length),s.tokens=this.inlineTokens(s.text,[],n,r),t.push(s);else if(s=this.tokenizer.codespan(e))e=e.substring(s.raw.length),t.push(s);else if(s=this.tokenizer.br(e))e=e.substring(s.raw.length),t.push(s);else if(s=this.tokenizer.del(e))e=e.substring(s.raw.length),s.tokens=this.inlineTokens(s.text,[],n,r),t.push(s);else if(s=this.tokenizer.autolink(e,G))e=e.substring(s.raw.length),t.push(s);else if(n||!(s=this.tokenizer.url(e,G))){if(s=this.tokenizer.inlineText(e,r,J))e=e.substring(s.raw.length),i=s.raw.slice(-1),t.push(s);else if(e){var u="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(u);break}throw new Error(u)}}else e=e.substring(s.raw.length),t.push(s);return t},n=t,i=[{key:"rules",get:function(){return{block:q,inline:W}}}],(r=null)&&e(n.prototype,r),i&&e(n,i),t}(),Y=r.defaults,K=E,X=w,Q=function(){function e(e){this.options=e||Y}var t=e.prototype;return t.code=function(e,t,n){var r=(t||"").match(/\S*/)[0];if(this.options.highlight){var i=this.options.highlight(e,r);null!=i&&i!==e&&(n=!0,e=i)}return r?'<pre><code class="'+this.options.langPrefix+X(r,!0)+'">'+(n?e:X(e,!0))+"</code></pre>\n":"<pre><code>"+(n?e:X(e,!0))+"</code></pre>\n"},t.blockquote=function(e){return"<blockquote>\n"+e+"</blockquote>\n"},t.html=function(e){return e},t.heading=function(e,t,n,r){return this.options.headerIds?"<h"+t+' id="'+this.options.headerPrefix+r.slug(n)+'">'+e+"</h"+t+">\n":"<h"+t+">"+e+"</h"+t+">\n"},t.hr=function(){return this.options.xhtml?"<hr/>\n":"<hr>\n"},t.list=function(e,t,n){var r=t?"ol":"ul";return"<"+r+(t&&1!==n?' start="'+n+'"':"")+">\n"+e+"</"+r+">\n"},t.listitem=function(e){return"<li>"+e+"</li>\n"},t.checkbox=function(e){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "},t.paragraph=function(e){return"<p>"+e+"</p>\n"},t.table=function(e,t){return t&&(t="<tbody>"+t+"</tbody>"),"<table>\n<thead>\n"+e+"</thead>\n"+t+"</table>\n"},t.tablerow=function(e){return"<tr>\n"+e+"</tr>\n"},t.tablecell=function(e,t){var n=t.header?"th":"td";return(t.align?"<"+n+' align="'+t.align+'">':"<"+n+">")+e+"</"+n+">\n"},t.strong=function(e){return"<strong>"+e+"</strong>"},t.em=function(e){return"<em>"+e+"</em>"},t.codespan=function(e){return"<code>"+e+"</code>"},t.br=function(){return this.options.xhtml?"<br/>":"<br>"},t.del=function(e){return"<del>"+e+"</del>"},t.link=function(e,t,n){if(null===(e=K(this.options.sanitize,this.options.baseUrl,e)))return n;var r='<a href="'+X(e)+'"';return t&&(r+=' title="'+t+'"'),r+=">"+n+"</a>"},t.image=function(e,t,n){if(null===(e=K(this.options.sanitize,this.options.baseUrl,e)))return n;var r='<img src="'+e+'" alt="'+n+'"';return t&&(r+=' title="'+t+'"'),r+=this.options.xhtml?"/>":">"},t.text=function(e){return e},e}(),ee=function(){function e(){}var t=e.prototype;return t.strong=function(e){return e},t.em=function(e){return e},t.codespan=function(e){return e},t.del=function(e){return e},t.html=function(e){return e},t.text=function(e){return e},t.link=function(e,t,n){return""+n},t.image=function(e,t,n){return""+n},t.br=function(){return""},e}(),te=function(){function e(){this.seen={}}return e.prototype.slug=function(e){var t=e.toLowerCase().trim().replace(/<[!\/a-z].*?>/gi,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-");if(this.seen.hasOwnProperty(t)){var n=t;do{this.seen[n]++,t=n+"-"+this.seen[n]}while(this.seen.hasOwnProperty(t))}return this.seen[t]=0,t},e}(),ne=r.defaults,re=x,ie=function(){function e(e){this.options=e||ne,this.options.renderer=this.options.renderer||new Q,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new ee,this.slugger=new te}e.parse=function(t,n){return new e(n).parse(t)};var t=e.prototype;return t.parse=function(e,t){void 0===t&&(t=!0);var n,r,i,s,a,l,o,u,c,h,p,d,f,m,g,b,v,y,k="",w=e.length;for(n=0;n<w;n++)switch((h=e[n]).type){case"space":continue;case"hr":k+=this.renderer.hr();continue;case"heading":k+=this.renderer.heading(this.parseInline(h.tokens),h.depth,re(this.parseInline(h.tokens,this.textRenderer)),this.slugger);continue;case"code":k+=this.renderer.code(h.text,h.lang,h.escaped);continue;case"table":for(u="",o="",s=h.header.length,r=0;r<s;r++)o+=this.renderer.tablecell(this.parseInline(h.tokens.header[r]),{header:!0,align:h.align[r]});for(u+=this.renderer.tablerow(o),c="",s=h.cells.length,r=0;r<s;r++){for(o="",a=(l=h.tokens.cells[r]).length,i=0;i<a;i++)o+=this.renderer.tablecell(this.parseInline(l[i]),{header:!1,align:h.align[i]});c+=this.renderer.tablerow(o)}k+=this.renderer.table(u,c);continue;case"blockquote":c=this.parse(h.tokens),k+=this.renderer.blockquote(c);continue;case"list":for(p=h.ordered,d=h.start,f=h.loose,s=h.items.length,c="",r=0;r<s;r++)b=(g=h.items[r]).checked,v=g.task,m="",g.task&&(y=this.renderer.checkbox(b),f?g.tokens.length>0&&"text"===g.tokens[0].type?(g.tokens[0].text=y+" "+g.tokens[0].text,g.tokens[0].tokens&&g.tokens[0].tokens.length>0&&"text"===g.tokens[0].tokens[0].type&&(g.tokens[0].tokens[0].text=y+" "+g.tokens[0].tokens[0].text)):g.tokens.unshift({type:"text",text:y}):m+=y),m+=this.parse(g.tokens,f),c+=this.renderer.listitem(m,v,b);k+=this.renderer.list(c,p,d);continue;case"html":k+=this.renderer.html(h.text);continue;case"paragraph":k+=this.renderer.paragraph(this.parseInline(h.tokens));continue;case"text":for(c=h.tokens?this.parseInline(h.tokens):h.text;n+1<w&&"text"===e[n+1].type;)c+="\n"+((h=e[++n]).tokens?this.parseInline(h.tokens):h.text);k+=t?this.renderer.paragraph(c):c;continue;default:var x='Token with "'+h.type+'" type was not found.';if(this.options.silent)return void console.error(x);throw new Error(x)}return k},t.parseInline=function(e,t){t=t||this.renderer;var n,r,i="",s=e.length;for(n=0;n<s;n++)switch((r=e[n]).type){case"escape":i+=t.text(r.text);break;case"html":i+=t.html(r.text);break;case"link":i+=t.link(r.href,r.title,this.parseInline(r.tokens,t));break;case"image":i+=t.image(r.href,r.title,r.text);break;case"strong":i+=t.strong(this.parseInline(r.tokens,t));break;case"em":i+=t.em(this.parseInline(r.tokens,t));break;case"codespan":i+=t.codespan(r.text);break;case"br":i+=t.br();break;case"del":i+=t.del(this.parseInline(r.tokens,t));break;case"text":i+=t.text(r.text);break;default:var a='Token with "'+r.type+'" type was not found.';if(this.options.silent)return void console.error(a);throw new Error(a)}return i},e}(),se=C,ae=O,le=w,oe=r.getDefaults,ue=r.changeDefaults,ce=r.defaults;function he(e,t,n){if(null==e)throw new Error("marked(): input parameter is undefined or null");if("string"!=typeof e)throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(e)+", string expected");if("function"==typeof t&&(n=t,t=null),t=se({},he.defaults,t||{}),ae(t),n){var r,i=t.highlight;try{r=Z.lex(e,t)}catch(e){return n(e)}var s=function(e){var s;if(!e)try{s=ie.parse(r,t)}catch(t){e=t}return t.highlight=i,e?n(e):n(null,s)};if(!i||i.length<3)return s();if(delete t.highlight,!r.length)return s();var a=0;return he.walkTokens(r,(function(e){"code"===e.type&&(a++,setTimeout((function(){i(e.text,e.lang,(function(t,n){if(t)return s(t);null!=n&&n!==e.text&&(e.text=n,e.escaped=!0),0==--a&&s()}))}),0))})),void(0===a&&s())}try{var l=Z.lex(e,t);return t.walkTokens&&he.walkTokens(l,t.walkTokens),ie.parse(l,t)}catch(e){if(e.message+="\nPlease report this to https://github.com/markedjs/marked.",t.silent)return"<p>An error occurred:</p><pre>"+le(e.message+"",!0)+"</pre>";throw e}}return he.options=he.setOptions=function(e){return se(he.defaults,e),ue(he.defaults),he},he.getDefaults=oe,he.defaults=ce,he.use=function(e){var t=se({},e);if(e.renderer&&function(){var n=he.defaults.renderer||new Q,r=function(t){var r=n[t];n[t]=function(){for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];var l=e.renderer[t].apply(n,s);return!1===l&&(l=r.apply(n,s)),l}};for(var i in e.renderer)r(i);t.renderer=n}(),e.tokenizer&&function(){var n=he.defaults.tokenizer||new D,r=function(t){var r=n[t];n[t]=function(){for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];var l=e.tokenizer[t].apply(n,s);return!1===l&&(l=r.apply(n,s)),l}};for(var i in e.tokenizer)r(i);t.tokenizer=n}(),e.walkTokens){var n=he.defaults.walkTokens;t.walkTokens=function(t){e.walkTokens(t),n&&n(t)}}he.setOptions(t)},he.walkTokens=function(e,t){for(var r,i=n(e);!(r=i()).done;){var s=r.value;switch(t(s),s.type){case"table":for(var a,l=n(s.tokens.header);!(a=l()).done;){var o=a.value;he.walkTokens(o,t)}for(var u,c=n(s.tokens.cells);!(u=c()).done;)for(var h,p=n(u.value);!(h=p()).done;){var d=h.value;he.walkTokens(d,t)}break;case"list":he.walkTokens(s.items,t);break;default:s.tokens&&he.walkTokens(s.tokens,t)}}},he.Parser=ie,he.parser=ie.parse,he.Renderer=Q,he.TextRenderer=ee,he.Lexer=Z,he.lexer=Z.lex,he.Tokenizer=D,he.Slugger=te,he.parse=he,he}()},function(e,t,n){"use strict";n.r(t);const r=Symbol("Services");class i{constructor(e){this[r]=e}lookup({type:e,name:t}){return this[r][t]}}const s="undefined"!=typeof Symbol?Symbol:e=>`__${e}${Math.floor(Math.random()*Date.now())}__`;let a=1;const l=s("TAG_COMPUTE");function o(e){return a}function u(e,t){return t>=e[l]()}const c=s("TAG_TYPE");class h{constructor(e){this.revision=1,this.lastChecked=1,this.lastValue=1,this.isUpdating=!1,this.subtags=null,this.subtag=null,this.subtagBufferCache=null,this[c]=e}[l](){let{lastChecked:e}=this;if(!0===this.isUpdating)this.lastChecked=++a;else if(e!==a){this.isUpdating=!0,this.lastChecked=a;try{let{subtags:e,subtag:t,subtagBufferCache:n,lastValue:r,revision:i}=this;if(null!==t){let e=t[l]();e===n?i=Math.max(i,r):(this.subtagBufferCache=null,i=Math.max(i,e))}if(null!==e)for(let t=0;t<e.length;t++){let n=e[t][l]();i=Math.max(n,i)}this.lastValue=i}finally{this.isUpdating=!1}}return this.lastValue}static updateTag(e,t){let n=e,r=t;r===g?n.subtag=null:(n.subtagBufferCache=r[l](),n.subtag=r)}static dirtyTag(e){e.revision=++a}}const p=h.dirtyTag,d=h.updateTag;function f(){return new h(0)}function m(){return new h(1)}const g=new h(3);function b({tag:e}){return e===g}function v(e){return e===g}new class{[l](){return 9007199254740991}};new class{[l](){return a}};function y(e){let t=[];for(let n=0,r=e.length;n<r;n++){let r=e[n];r!==g&&t.push(r)}return k(t)}function k(e){switch(e.length){case 0:return g;case 1:return e[0];default:let t=new h(2);return t.subtags=e,t}}let w=function(){};function x(e){return"object"==typeof e&&null!==e||"function"==typeof e}const S=new WeakMap;function E(e,t){if(x(e)){let n=S.get(e);if(void 0===n)n=new Map,S.set(e,n);else if(n.has(t))return n.get(t);let r=m();return n.set(t,r),r}return g}class A{constructor(){this.tags=new Set,this.last=null}add(e){this.tags.add(e),this.last=e}combine(){let{tags:e}=this;if(0===e.size)return g;if(1===e.size)return this.last;{let t=[];return e.forEach(e=>t.push(e)),y(t)}}}let C=null;const z=[];function _(){z.push(C),C=new A}function T(){let e=C;return C=z.pop(),e.combine()}new WeakMap;function O(e,t){let n;_();try{e()}finally{n=T()}return n}function R(e){null!==C&&C.add(e)}function L(e){z.push(C),C=null;try{e()}finally{C=z.pop()}}const P=f();function M(e,t){let n=new WeakMap,r="function"==typeof t;return{getter:function(i){let s;return R(E(i,e)),r&&!n.has(i)?(s=t.call(i),n.set(i,s)):s=n.get(i),s},setter:function(t,r){p(P),function(e,t){if(!x(e))throw new Error("BUG: Can't update a tag for a primitive");{let n=S.get(e);if(void 0===n)return;let r=n.get(t);void 0!==r&&(p(r),w())}}(t,e),n.set(t,r)}}}const N=Object.freeze([]);var B=function(e,t){if(!e)throw new Error(t||"assertion failure")};let D=0;function j(e){return e._guid=++D}function U(){return Object.create(null)}function I(e){return"object"==typeof e&&null!==e}class H{constructor(){this.stack=[],this.current=null}get size(){return this.stack.length}push(e){this.current=e,this.stack.push(e)}pop(){let e=this.stack.pop(),t=this.stack.length;return this.current=0===t?null:this.stack[t-1],void 0===e?null:e}nth(e){let t=this.stack.length;return t<e?null:this.stack[t-e]}isEmpty(){return 0===this.stack.length}toArray(){return this.stack}}function $(e="unreachable"){return new Error(e)}function F(e){throw new Error("Exhausted "+e)}const V="undefined"!=typeof Symbol?Symbol:e=>`__${e}${Math.floor(Math.random()*Date.now())}__`,q=V("DESTROY");function W(e){let t=e.firstChild;for(;t;){let n=t.nextSibling;e.removeChild(t),t=n}}const J=new WeakMap,G=V("WILL_DROP"),Z=V("DID_DROP"),Y=V("CHILDREN"),K=new WeakMap;function X(e){return null!==e&&"object"==typeof e&&void 0!==e[Z]}function Q(e,t){ee(e,re(t))}function ee(e,t){let n=J.get(e);n||(n=new Set,J.set(e,n)),n.add(t)}function te(e){let t=J.get(e);t&&t.forEach(e=>{e[G]()})}function ne(e){let t=J.get(e);t&&t.forEach(e=>{e[Z](),t.delete(e)})}function re(e){let t=K.get(e);return t||(t=function(e){return!(!e||void 0===e[q])}(e)?new ae(e):function(e){return!(!e||"object"!=typeof e||"function"!=typeof e.destroy)}(e)?new le(e):new oe(e),K.set(e,t)),t}function ie(e){return new se(e)}class se{constructor(e){this.destructors=e}[G](){this.destructors.forEach(e=>e[G]())}[Z](){this.destructors.forEach(e=>e[Z]())}get[Y](){return this.destructors}toString(){return"SnapshotDestructor"}}class ae{constructor(e){this.inner=e}[G](){te(this.inner)}[Z](){this.inner[q](),ne(this.inner)}get[Y](){return J.get(this.inner)||[]}toString(){return"DestroyableDestructor"}}class le{constructor(e){this.inner=e}[G](){"function"==typeof this.inner.willDestroy&&this.inner.willDestroy(),te(this.inner)}[Z](){this.inner.destroy(),ne(this.inner)}get[Y](){return J.get(this.inner)||[]}toString(){return"StringDestroyableDestructor"}}class oe{constructor(e){this.inner=e}[G](){te(this.inner)}[Z](){ne(this.inner)}get[Y](){return J.get(this.inner)||[]}toString(){return"SimpleDestructor"}}class ue{constructor(){this.clear()}head(){return this._head}tail(){return this._tail}clear(){this._head=this._tail=null}toArray(){let e=[];return this.forEachNode(t=>e.push(t)),e}nextNode(e){return e.next}forEachNode(e){let t=this._head;for(;null!==t;)e(t),t=t.next}insertBefore(e,t=null){return null===t?this.append(e):(t.prev?t.prev.next=e:this._head=e,e.prev=t.prev,e.next=t,t.prev=e,e)}append(e){let t=this._tail;return t?(t.next=e,e.prev=t,e.next=null):this._head=e,this._tail=e}remove(e){return e.prev?e.prev.next=e.next:this._head=e.next,e.next?e.next.prev=e.prev:this._tail=e.prev,e}[G](){this.forEachNode(e=>re(e)[G]())}[Z](){this.forEachNode(e=>re(e)[Z]())}get[Y](){let e=[];return this.forEachNode(t=>e.push(...re(t)[Y])),e}}class ce{constructor(e,t){this._head=e,this._tail=t}forEachNode(e){let t=this._head;for(;null!==t;)e(t),t=this.nextNode(t)}head(){return this._head}tail(){return this._tail}toArray(){let e=[];return this.forEachNode(t=>e.push(t)),e}nextNode(e){return e===this._tail?null:e.next}}new ce(null,null);const{keys:he}=Object;function pe(e){for(let t=1;t<arguments.length;t++){let n=arguments[t];if(null===n||"object"!=typeof n)continue;let r=he(n);for(let t=0;t<r.length;t++){let i=r[t];e[i]=n[i]}}return e}function de(e){return"number"==typeof e?e<0?1073741827-e:e:!1===e?1073741824:!0===e?1073741825:null===e?1073741826:void 0===e?1073741827:F(e)}function fe(e){return function(e,t,n){return e%1==0&&e>=t&&e<=n}(e,-1073741820,1073741823)}function me(e){return e<0}function ge(e,t=2147483647,n=-1){if(e>t)throw new Error(`index ${e} overflowed range 0 to ${t}`);return n-e}function be(e,t=-1){return t-e}function ve(e){if("number"==typeof e)return e;{let t=e.errors[0];throw new Error(`Compile Error: ${t.problem} @ ${t.span.start}..${t.span.end}`)}}function ye(e){if("error"===e.result)throw new Error(`Compile Error: ${e.problem} @ ${e.span.start}..${e.span.end}`);return e}function ke(e,t="unexpected unreachable branch"){console.log("unreachable",e),console.trace(`${t} :: ${JSON.stringify(e)} (${e})`)}function we(e){return e<=3}var xe,Se;!function(e){e[e.s0=4]="s0",e[e.s1=5]="s1"}(xe||(xe={})),function(e){e[e.t0=6]="t0",e[e.t1=7]="t1"}(Se||(Se={}));const Ee=V("INNER_VM"),Ae=V("DESTRUCTOR_STACK"),Ce=V("STACKS"),ze=V("REGISTERS"),_e=V("HEAP"),Te=V("CONSTANTS"),Oe=V("ARGS");V("PC");class Re{constructor(e,t){this.element=e,this.nextSibling=t}}class Le{constructor(e,t,n){this.parentNode=e,this.first=t,this.last=n}parentElement(){return this.parentNode}firstNode(){return this.first}lastNode(){return this.last}}class Pe{constructor(e,t){this.parentNode=e,this.node=t}parentElement(){return this.parentNode}firstNode(){return this.node}lastNode(){return this.node}}function Me(e,t){let n=e.parentElement(),r=e.firstNode(),i=e.lastNode(),s=r;for(;;){let e=s.nextSibling;if(n.insertBefore(s,t),s===i)return e;s=e}}function Ne(e){let t=e.parentElement(),n=e.firstNode(),r=e.lastNode(),i=n;for(;;){let e=i.nextSibling;if(t.removeChild(i),i===r)return e;i=e}}function Be(e,t){let n=function(e){return J.get(e)||null}(e);null!==n&&t.willDestroy(ie(n))}function De(e,t){let n=function(e){let t=J.get(e);return t&&t.size>0?(J.delete(e),t):null}(e);null!==n&&t.didDestroy(ie(n))}function je(e,t){t.willDestroy(re(e))}function Ue(e,t){t.didDestroy(re(e))}var Ie;class He{constructor(e){this.node=e}firstNode(){return this.node}}class $e{constructor(e){this.node=e}lastNode(){return this.node}}const Fe=V("CURSOR_STACK");class Ve{constructor(e,t,n){this.constructing=null,this.operations=null,this[Ie]=new H,this.modifierStack=new H,this.blockStack=new H,this.pushElement(t,n),this.env=e,this.dom=e.getAppendOperations(),this.updateOperations=e.getDOM()}static forInitialRender(e,t){return new this(e,t.element,t.nextSibling).initialize()}static resume(e,t){let n=new this(e,t.parentElement(),t.reset(e)).initialize();return n.pushLiveBlock(t),n}initialize(){return this.pushSimpleBlock(),this}debugBlocks(){return this.blockStack.toArray()}get element(){return this[Fe].current.element}get nextSibling(){return this[Fe].current.nextSibling}get hasBlocks(){return this.blockStack.size>0}block(){return this.blockStack.current}popElement(){this[Fe].pop(),this[Fe].current}pushSimpleBlock(){return this.pushLiveBlock(new qe(this.element))}pushUpdatableBlock(){return this.pushLiveBlock(new Je(this.element))}pushBlockList(e){return this.pushLiveBlock(new Ge(this.element,e))}pushLiveBlock(e,t=!1){let n=this.blockStack.current;return null!==n&&(t||n.didAppendBounds(e)),this.__openBlock(),this.blockStack.push(e),e}popBlock(){return this.block().finalize(this),this.__closeBlock(),this.blockStack.pop()}__openBlock(){}__closeBlock(){}openElement(e){let t=this.__openElement(e);return this.constructing=t,t}__openElement(e){return this.dom.createElement(e,this.element)}flushElement(e){let t=this.element,n=this.constructing;this.__flushElement(t,n),this.constructing=null,this.operations=null,this.pushModifiers(e),this.pushElement(n,null),this.didOpenElement(n)}__flushElement(e,t){this.dom.insertBefore(e,t,this.nextSibling)}closeElement(){return this.willCloseElement(),this.popElement(),this.popModifiers()}pushRemoteElement(e,t,n){return this.__pushRemoteElement(e,t,n)}__pushRemoteElement(e,t,n){if(this.pushElement(e,n),void 0===n)for(;e.lastChild;)e.removeChild(e.lastChild);let r=new We(e);return this.pushLiveBlock(r,!0)}popRemoteElement(){this.popBlock(),this.popElement()}pushElement(e,t=null){this[Fe].push(new Re(e,t))}pushModifiers(e){this.modifierStack.push(e)}popModifiers(){return this.modifierStack.pop()}didAppendBounds(e){return this.block().didAppendBounds(e),e}didAppendNode(e){return this.block().didAppendNode(e),e}didOpenElement(e){return this.block().openElement(e),e}willCloseElement(){this.block().closeElement()}appendText(e){return this.didAppendNode(this.__appendText(e))}__appendText(e){let{dom:t,element:n,nextSibling:r}=this,i=t.createTextNode(e);return t.insertBefore(n,i,r),i}__appendNode(e){return this.dom.insertBefore(this.element,e,this.nextSibling),e}__appendFragment(e){let t=e.firstChild;if(t){let n=new Le(this.element,t,e.lastChild);return this.dom.insertBefore(this.element,e,this.nextSibling),n}return new Pe(this.element,this.__appendComment(""))}__appendHTML(e){return this.dom.insertHTMLBefore(this.element,this.nextSibling,e)}appendDynamicHTML(e){let t=this.trustedContent(e);this.didAppendBounds(t)}appendDynamicText(e){let t=this.untrustedContent(e);return this.didAppendNode(t),t}appendDynamicFragment(e){let t=this.__appendFragment(e);this.didAppendBounds(t)}appendDynamicNode(e){let t=this.__appendNode(e),n=new Pe(this.element,t);this.didAppendBounds(n)}trustedContent(e){return this.__appendHTML(e)}untrustedContent(e){return this.__appendText(e)}appendComment(e){return this.didAppendNode(this.__appendComment(e))}__appendComment(e){let{dom:t,element:n,nextSibling:r}=this,i=t.createComment(e);return t.insertBefore(n,i,r),i}__setAttribute(e,t,n){this.dom.setAttribute(this.constructing,e,t,n)}__setProperty(e,t){this.constructing[e]=t}setStaticAttribute(e,t,n){this.__setAttribute(e,t,n)}setDynamicAttribute(e,t,n,r){let i=this.constructing,s=this.env.attributeFor(i,e,n,r);return s.set(this,t,this.env),s}}Ie=Fe;class qe{constructor(e){this.parent=e,this.first=null,this.last=null,this.destroyables=null,this.nesting=0}parentElement(){return this.parent}firstNode(){return this.first.firstNode()}lastNode(){return this.last.lastNode()}openElement(e){this.didAppendNode(e),this.nesting++}closeElement(){this.nesting--}didAppendNode(e){0===this.nesting&&(this.first||(this.first=new He(e)),this.last=new $e(e))}didAppendBounds(e){0===this.nesting&&(this.first||(this.first=e),this.last=e)}finalize(e){null===this.first&&e.appendComment("")}}class We extends qe{[q](){this.parentElement()===this.firstNode().parentNode&&Ne(this)}}class Je extends qe{reset(e){let t=function(e,t){return Be(e,t),De(e,t),Ne(e)}(this,e);return this.first=null,this.last=null,this.destroyables=null,this.nesting=0,t}}class Ge{constructor(e,t){this.parent=e,this.boundList=t,this.parent=e,this.boundList=t}parentElement(){return this.parent}firstNode(){return this.boundList.head().firstNode()}lastNode(){return this.boundList.tail().lastNode()}openElement(e){}closeElement(){}didAppendNode(e){}didAppendBounds(e){}finalize(e){}}class Ze{constructor(e){this.lastValue=null,this.lastRevision=null,this.initialized=!1,this.tag=e.tag,this.reference=e}peek(){return this.initialized?this.lastValue:this.initialize()}revalidate(){if(!this.initialized)return this.initialize();let{reference:e,lastRevision:t}=this,n=e.tag;if(u(n,t))return Ye;let{lastValue:r}=this,i=e.value();return this.lastRevision=o(),i===r?Ye:(this.lastValue=i,i)}initialize(){let{reference:e}=this,t=this.lastValue=e.value();return this.lastRevision=o(e.tag),this.initialized=!0,t}}const Ye=V("NOT_MODIFIED");const Ke=new class{constructor(e){this.inner=e,this.tag=g}value(){return this.inner}get(e){return Ke}}(void 0);class Xe{constructor(e){this.inner=e,this.tag=g}value(){return this.inner}get(e){return Ke}}class Qe extends class{constructor(e){this.next=null,this.prev=null,this.value=e}}{constructor(e,t){super(e.valueReferenceFor(t)),this.retained=!1,this.seen=!1,this.key=t.key,this.iterable=e,this.memo=e.memoReferenceFor(t)}update(e){this.retained=!0,this.iterable.updateValueReference(this.value,e),this.iterable.updateMemoReference(this.memo,e)}shouldRemove(){return!this.retained}reset(){this.retained=!1,this.seen=!1}}class et{constructor(e){this.iterator=null,this.map=new Map,this.list=new ue,this.tag=e.tag,this.iterable=e}isEmpty(){return(this.iterator=this.iterable.iterate()).isEmpty()}iterate(){let e;return e=null===this.iterator?this.iterable.iterate():this.iterator,this.iterator=null,e}advanceToKey(e,t){let n=t;for(;null!==n&&n.key!==e;)n=this.advanceNode(n);return n}has(e){return this.map.has(e)}get(e){return this.map.get(e)}wasSeen(e){let t=this.map.get(e);return void 0!==t&&t.seen}update(e){let t=this.get(e.key);return t.update(e),t}append(e){let{map:t,list:n,iterable:r}=this,i=new Qe(r,e);return t.set(e.key,i),n.append(i),i}insertBefore(e,t){let{map:n,list:r,iterable:i}=this,s=new Qe(i,e);return n.set(e.key,s),s.retained=!0,r.insertBefore(s,t),s}move(e,t){let{list:n}=this;e.retained=!0,n.remove(e),n.insertBefore(e,t)}remove(e){let{list:t}=this;t.remove(e),this.map.delete(e.key)}nextNode(e){return this.list.nextNode(e)}advanceNode(e){return e.seen=!0,this.list.nextNode(e)}head(){return this.list.head()}}class tt{constructor(e){this.iterator=null;let t=new et(e);this.artifacts=t}next(){let{artifacts:e}=this,t=(this.iterator=this.iterator||e.iterate()).next();return null===t?null:e.append(t)}}var nt;!function(e){e[e.Append=0]="Append",e[e.Prune=1]="Prune",e[e.Done=2]="Done"}(nt||(nt={}));const rt=V("END");class it{constructor({target:e,artifacts:t,env:n}){this.target=e,this.artifacts=t,this.iterator=t.iterate(),this.current=t.head(),this.env=n}sync(){let e=nt.Append;for(;;)switch(e){case nt.Append:e=this.nextAppend();break;case nt.Prune:e=this.nextPrune();break;case nt.Done:return void this.nextDone()}}advanceToKey(e){let{current:t,artifacts:n}=this;if(null===t)return;let r=n.advanceNode(t);if(r.key===e)return void(this.current=n.advanceNode(r));let i=n.advanceToKey(e,t);i&&(this.move(i,t),this.current=n.nextNode(t))}move(e,t){e.next!==t&&(this.artifacts.move(e,t),this.target.move(this.env,e.key,e.value,e.memo,t?t.key:rt))}nextAppend(){let{iterator:e,current:t,artifacts:n}=this,r=e.next();if(null===r)return this.startPrune();let{key:i}=r;return null!==t&&t.key===i?this.nextRetain(r,t):n.has(i)?this.nextMove(r):this.nextInsert(r),nt.Append}nextRetain(e,t){let{artifacts:n}=this;t.update(e),this.current=n.nextNode(t),this.target.retain(this.env,e.key,t.value,t.memo)}nextMove(e){let{current:t,artifacts:n}=this,{key:r}=e,i=n.update(e);n.wasSeen(r)?this.move(i,t):this.advanceToKey(r)}nextInsert(e){let{artifacts:t,target:n,current:r}=this,i=t.insertBefore(e,r);n.insert(this.env,i.key,i.value,i.memo,r?r.key:null)}startPrune(){return this.current=this.artifacts.head(),nt.Prune}nextPrune(){let{artifacts:e,target:t,current:n}=this;if(null===n)return nt.Done;let r=n;return this.current=e.nextNode(r),r.shouldRemove()?(e.remove(r),t.delete(this.env,r.key)):r.reset(),nt.Prune}nextDone(){this.target.done(this.env)}}const st=V("UPDATE_REFERENCED_VALUE");class at{constructor(e){this.env=e,this.children=U(),this.tag=g}get(e){{let t=this.children[e];return void 0===t&&(t=this.children[e]=new ut(this,e,this.env)),t}}}class lt extends at{constructor(e,t){super(t),this.inner=e}value(){return this.inner}}class ot extends at{constructor(e,t,n,r){super(n),this.fn=e,this.args=t,this.computeRevision=null,this.computeTag=null,b(t)&&this.compute();let{tag:i,computeTag:s}=this;if(null!==s&&v(s))i=this.tag=g,this.computeRevision=o();else{let e=this.valueTag=m();i=this.tag=y([t.tag,e]),null!==s&&(d(e,s),this.computeRevision=o())}}compute(){this.computeTag=O(()=>{this.computeValue=this.fn(this.args)})}value(){let{tag:e,computeRevision:t}=this;return null!==t&&u(e,t)||(this.compute(),d(this.valueTag,this.computeTag),this.computeRevision=o()),this.computeValue}}class ut{constructor(e,t,n){this.parentReference=e,this.propertyKey=t,this.env=n,this.children=U(),this.lastRevision=null;let r=this.valueTag=m(),i=e.tag;this.tag=y([i,r])}value(){let{tag:e,lastRevision:t,lastValue:n,parentReference:r,valueTag:i,propertyKey:s}=this;if(null===t||!u(e,t)){let e=r.value();if(null!=e){let t=O(()=>{n=this.env.getPath(e,s)});d(i,t)}else n=void 0;this.lastValue=n,this.lastRevision=o()}return n}get(e){{let t=this.children[e];return void 0===t&&(t=this.children[e]=new ut(this,e,this.env)),t}}[st](e){let{parentReference:t,propertyKey:n}=this,r=t.value();this.env.setPath(r,n,e)}}class ct{constructor(e,t,n,r){this.parentReference=e,this.itemValue=t,this.env=r,this.tag=m(),this.children=U()}value(){return this.itemValue}update(e){p(this.tag),this.itemValue=e}get(e){{let t=this.children[e];return void 0===t&&(t=this.children[e]=new ut(this,e,this.env)),t}}}const ht={},pt=(e,t)=>t,dt=(e,t)=>String(t),ft=e=>null===e?ht:e;function mt(e,t){switch(e){case"@key":return vt(pt);case"@index":return vt(dt);case"@identity":return vt(ft);default:return function(e,t){return vt(n=>t(n,e))}(e,t)}}class gt{get weakMap(){return void 0===this._weakMap&&(this._weakMap=new WeakMap),this._weakMap}get primitiveMap(){return void 0===this._primitiveMap&&(this._primitiveMap=new Map),this._primitiveMap}set(e,t){I(e)||"function"==typeof e?this.weakMap.set(e,t):this.primitiveMap.set(e,t)}get(e){return I(e)||"function"==typeof e?this.weakMap.get(e):this.primitiveMap.get(e)}}const bt=new gt;function vt(e){let t=new gt;return(n,r)=>{let i=e(n,r),s=t.get(n)||0;return t.set(i,s+1),0===s?i:function(e,t){let n=bt.get(e);void 0===n&&(n=[],bt.set(e,n));let r=n[t];return void 0===r&&(r={value:e,count:t},n[t]=r),r}(i,s)}}class yt{constructor(e,t,n){this.parentRef=e,this.key=t,this.env=n,this.tag=e.tag}iterate(){let{parentRef:e,key:t,env:n}=this,r=e.value(),i=mt(t,n.getPath);if(Array.isArray(r))return new wt(r,i);let s=n.toIterator(r);return null===s?new wt(N,()=>null):new kt(s,i)}valueReferenceFor(e){let{parentRef:t,env:n}=this;return new ct(t,e.value,e.memo,n)}updateValueReference(e,t){e.update(t.value)}memoReferenceFor(e){let{parentRef:t,env:n}=this;return new ct(t,e.memo,"",n)}updateMemoReference(e,t){e.update(t.memo)}}class kt{constructor(e,t){this.inner=e,this.keyFor=t}isEmpty(){return this.inner.isEmpty()}next(){let e=this.inner.next();return null!==e&&(e.key=this.keyFor(e.value,e.memo)),e}}class wt{constructor(e,t){this.iterator=e,this.keyFor=t,this.pos=0,0===e.length?this.current={kind:"empty"}:this.current={kind:"first",value:e[this.pos]}}isEmpty(){return"empty"===this.current.kind}next(){let e,t=this.current;if("first"===t.kind)this.current={kind:"progress"},e=t.value;else{if(this.pos>=this.iterator.length-1)return null;e=this.iterator[++this.pos]}let{keyFor:n}=this;return{key:n(e,this.pos),value:e,memo:this.pos}}}const xt={foreignObject:1,desc:1,title:1},St=Object.create(null);class Et{constructor(e){this.document=e,this.setupUselessElement()}setupUselessElement(){this.uselessElement=this.document.createElement("div")}createElement(e,t){let n,r;if(t?(n="http://www.w3.org/2000/svg"===t.namespaceURI||"svg"===e,r=!!xt[t.tagName]):(n="svg"===e,r=!1),n&&!r){if(St[e])throw new Error(`Cannot create a ${e} inside an SVG context`);return this.document.createElementNS("http://www.w3.org/2000/svg",e)}return this.document.createElement(e)}insertBefore(e,t,n){e.insertBefore(t,n)}insertHTMLBefore(e,t,n){if(""===n){let n=this.createComment("");return e.insertBefore(n,t),new Le(e,n,n)}let r,i=t?t.previousSibling:e.lastChild;if(null===t)e.insertAdjacentHTML("beforeend",n),r=e.lastChild;else if(t instanceof HTMLElement)t.insertAdjacentHTML("beforebegin",n),r=t.previousSibling;else{let{uselessElement:i}=this;e.insertBefore(i,t),i.insertAdjacentHTML("beforebegin",n),r=i.previousSibling,e.removeChild(i)}let s=i?i.nextSibling:e.firstChild;return new Le(e,s,r)}createTextNode(e){return this.document.createTextNode(e)}createComment(e){return this.document.createComment(e)}}function At(e,t,n){if(!e)return t;if(!function(e,t){let n=e.createElementNS(t,"svg");try{n.insertAdjacentHTML("beforeend","<circle></circle>")}catch(e){}finally{return 1!==n.childNodes.length||"http://www.w3.org/2000/svg"!==n.firstChild.namespaceURI}}(e,n))return t;let r=e.createElement("div");return class extends t{insertHTMLBefore(e,t,i){return""===i||e.namespaceURI!==n?super.insertHTMLBefore(e,t,i):function(e,t,n,r){let i;if("FOREIGNOBJECT"===e.tagName.toUpperCase()){let e="<svg><foreignObject>"+n+"</foreignObject></svg>";W(t),t.insertAdjacentHTML("afterbegin",e),i=t.firstChild.firstChild}else{let e="<svg>"+n+"</svg>";W(t),t.insertAdjacentHTML("afterbegin",e),i=t.firstChild}return function(e,t,n){let r=e.firstChild,i=r,s=r;for(;s;){let e=s.nextSibling;t.insertBefore(s,n),i=s,s=e}return new Le(t,r,i)}(i,e,r)}(e,r,i,t)}}}function Ct(e,t){return e&&function(e){let t=e.createElement("div");if(t.appendChild(e.createTextNode("first")),t.insertAdjacentHTML("beforeend","second"),2===t.childNodes.length)return!1;return!0}(e)?class extends t{constructor(e){super(e),this.uselessComment=e.createComment("")}insertHTMLBefore(e,t,n){if(""===n)return super.insertHTMLBefore(e,t,n);let r=!1,i=t?t.previousSibling:e.lastChild;i&&i instanceof Text&&(r=!0,e.insertBefore(this.uselessComment,t));let s=super.insertHTMLBefore(e,t,n);return r&&e.removeChild(this.uselessComment),s}}:t}["b","big","blockquote","body","br","center","code","dd","div","dl","dt","em","embed","h1","h2","h3","h4","h5","h6","head","hr","i","img","li","listing","main","meta","nobr","ol","p","pre","ruby","s","small","span","strong","strike","sub","sup","table","tt","u","ul","var"].forEach(e=>St[e]=1);let zt="undefined"==typeof document?null:document;var _t;!function(e){class t extends Et{createElementNS(e,t){return this.document.createElementNS(e,t)}setAttribute(e,t,n,r=null){r?e.setAttributeNS(r,t,n):e.setAttribute(t,n)}}e.TreeConstruction=t;let n=t;n=Ct(zt,n),n=At(zt,n,"http://www.w3.org/2000/svg"),e.DOMTreeConstruction=n}(_t||(_t={}));class Tt extends Et{constructor(e){super(e),this.document=e,this.namespace=null}setAttribute(e,t,n){e.setAttribute(t,n)}removeAttribute(e,t){e.removeAttribute(t)}insertAfter(e,t,n){this.insertBefore(e,t,n.nextSibling)}}let Ot=Tt;Ot=Ct(zt,Ot),Ot=At(zt,Ot,"http://www.w3.org/2000/svg");const Rt=_t.DOMTreeConstruction;class Lt extends Xe{static create(e){return void 0===e?Nt:null===e?Bt:!0===e?Dt:!1===e?jt:"number"==typeof e?new Mt(e):new Pt(e)}constructor(e){super(e)}get(e){return Nt}}class Pt extends Lt{constructor(){super(...arguments),this.lengthReference=null}get(e){if("length"===e){let{lengthReference:e}=this;return null===e&&(e=this.lengthReference=new Mt(this.inner.length)),e}return super.get(e)}}class Mt extends Lt{constructor(e){super(e)}}const Nt=new Mt(void 0),Bt=new Mt(null),Dt=new Mt(!0),jt=new Mt(!1);class Ut{constructor(e,t=It){this.inner=e,this.toBool=t,this.tag=e.tag}value(){return this.toBool(this.inner.value())}}function It(e){return!!e}function Ht(e){return $t(e)?"":String(e)}function $t(e){return null==e||"function"!=typeof e.toString}function Ft(e){return"object"==typeof e&&null!==e&&"function"==typeof e.toHTML}function Vt(e){return"object"==typeof e&&null!==e&&"number"==typeof e.nodeType}function qt(e){return"string"==typeof e}function Wt(e,t){let n,r;if(t in e)r=t,n="prop";else{let i=t.toLowerCase();i in e?(n="prop",r=i):(n="attr",r=t)}return"prop"!==n||"style"!==r.toLowerCase()&&!function(e,t){let n=Jt[e.toUpperCase()];return n&&n[t.toLowerCase()]||!1}(e.tagName,r)||(n="attr"),{normalized:r,type:n}}const Jt={INPUT:{form:!0,autocorrect:!0,list:!0},SELECT:{form:!0},OPTION:{form:!0},TEXTAREA:{form:!0},LABEL:{form:!0},FIELDSET:{form:!0},LEGEND:{form:!0},OBJECT:{form:!0},BUTTON:{form:!0}};const Gt=["javascript:","vbscript:"],Zt=["A","BODY","LINK","IMG","IFRAME","BASE","FORM"],Yt=["EMBED"],Kt=["href","src","background","action"],Xt=["src"];function Qt(e,t){return-1!==e.indexOf(t)}function en(e,t){return(null===e||Qt(Zt,e))&&Qt(Kt,t)}function tn(e,t){return null!==e&&(Qt(Yt,e)&&Qt(Xt,t))}function nn(e,t){return en(e,t)||tn(e,t)}function rn(e,t,n,r){let i=null;if(null==r)return r;if(Ft(r))return r.toHTML();i=t?t.tagName.toUpperCase():null;let s=Ht(r);if(en(i,n)){let t=e.protocolForURL(s);if(Qt(Gt,t))return"unsafe:"+s}return tn(i,n)?"unsafe:"+s:s}function sn(e,t,n){let{tagName:r,namespaceURI:i}=e,s={element:e,name:t,namespace:n};if("http://www.w3.org/2000/svg"===i)return an(r,t,s);let{type:a,normalized:l}=Wt(e,t);return"attr"===a?an(r,l,s):function(e,t,n){if(nn(e,t))return new cn(t,n);if(function(e,t){return("INPUT"===e||"TEXTAREA"===e)&&"value"===t}(e,t))return new pn(t,n);if(function(e,t){return"OPTION"===e&&"selected"===t}(e,t))return new dn(t,n);return new un(t,n)}(r,l,s)}function an(e,t,n){return nn(e,t)?new hn(n):new on(n)}class ln{constructor(e){this.attribute=e}}class on extends ln{set(e,t,n){let r=fn(t);if(null!==r){let{name:t,namespace:n}=this.attribute;e.__setAttribute(t,r,n)}}update(e,t){let n=fn(e),{element:r,name:i}=this.attribute;null===n?r.removeAttribute(i):r.setAttribute(i,n)}}class un extends ln{constructor(e,t){super(t),this.normalizedName=e}set(e,t,n){null!=t&&(this.value=t,e.__setProperty(this.normalizedName,t))}update(e,t){let{element:n}=this.attribute;this.value!==e&&(n[this.normalizedName]=this.value=e,null==e&&this.removeAttribute())}removeAttribute(){let{element:e,namespace:t}=this.attribute;t?e.removeAttributeNS(t,this.normalizedName):e.removeAttribute(this.normalizedName)}}class cn extends un{set(e,t,n){let{element:r,name:i}=this.attribute,s=rn(n,r,i,t);super.set(e,s,n)}update(e,t){let{element:n,name:r}=this.attribute,i=rn(t,n,r,e);super.update(i,t)}}class hn extends on{set(e,t,n){let{element:r,name:i}=this.attribute,s=rn(n,r,i,t);super.set(e,s,n)}update(e,t){let{element:n,name:r}=this.attribute,i=rn(t,n,r,e);super.update(i,t)}}class pn extends un{set(e,t){e.__setProperty("value",Ht(t))}update(e){let t=this.attribute.element,n=t.value,r=Ht(e);n!==r&&(t.value=r)}}class dn extends un{set(e,t){null!=t&&!1!==t&&e.__setProperty("selected",!0)}update(e){let t=this.attribute.element;t.selected=!!e}}function fn(e){return!1===e||null==e||void 0===e.toString?null:!0===e?"":"function"==typeof e?null:String(e)}const mn={},gn=Object.freeze([]);class bn{constructor(){this.strings=[],this.arrays=[gn],this.tables=[],this.handles=[],this.resolved=[],this.numbers=[],this.others=[]}other(e){return this.others.push(e)-1}string(e){let t=this.strings.indexOf(e);return t>-1?t:this.strings.push(e)-1}stringArray(e){let t=new Array(e.length);for(let n=0;n<e.length;n++)t[n]=this.string(e[n]);return this.array(t)}array(e){if(0===e.length)return 0;let t=this.arrays.indexOf(e);return t>-1?t:this.arrays.push(e)-1}serializable(e){let t=JSON.stringify(e),n=this.strings.indexOf(t);return n>-1?n:this.strings.push(t)-1}templateMeta(e){return this.serializable(e)}number(e){let t=this.numbers.indexOf(e);return t>-1?t:this.numbers.push(e)-1}toPool(){return{strings:this.strings,arrays:this.arrays,handles:this.handles,numbers:this.numbers}}}class vn{constructor(e){this.strings=e.strings,this.arrays=e.arrays,this.handles=e.handles,this.numbers=e.numbers,this.others=[]}getString(e){return this.strings[e]}getNumber(e){return this.numbers[e]}getStringArray(e){let t=this.getArray(e),n=new Array(t.length);for(let e=0;e<t.length;e++){let r=t[e];n[e]=this.getString(r)}return n}getArray(e){return this.arrays[e]}getSerializable(e){return JSON.parse(this.strings[e])}getTemplateMeta(e){return this.getSerializable(e)}getOther(e){return this.others[e]}}class yn extends bn{constructor(e){super(),this.metas=[],e&&(this.strings=e.strings,this.arrays=e.arrays,this.handles=e.handles,this.resolved=this.handles.map(()=>mn),this.numbers=e.numbers),this.others=[]}templateMeta(e){let t=this.metas.indexOf(e);return t>-1?t:this.metas.push(e)-1}getNumber(e){return this.numbers[e]}getString(e){return this.strings[e]}getStringArray(e){let t=this.getArray(e),n=new Array(t.length);for(let e=0;e<t.length;e++){let r=t[e];n[e]=this.getString(r)}return n}getArray(e){return this.arrays[e]}getSerializable(e){return JSON.parse(this.strings[e])}getTemplateMeta(e){return this.metas[e]}getOther(e){return this.others[e]}}class kn{constructor(e){this.heap=e,this.offset=0}get size(){return 1+((768&this.heap.getbyaddr(this.offset))>>8)}get isMachine(){return 1024&this.heap.getbyaddr(this.offset)?1:0}get type(){return 255&this.heap.getbyaddr(this.offset)}get op1(){return this.heap.getbyaddr(this.offset+1)}get op2(){return this.heap.getbyaddr(this.offset+2)}get op3(){return this.heap.getbyaddr(this.offset+3)}}function wn(e,t){return t|e<<2}function xn(e,t){return e|t<<30}class Sn{constructor(e){let{buffer:t,table:n}=e;this.heap=new Int32Array(t),this.table=n}getaddr(e){return this.table[e]}getbyaddr(e){return this.heap[e]}sizeof(e){return zn(this.table,e)}scopesizeof(e){return _n(this.table,e)}}class En{constructor(){this.placeholders=[],this.stdlibs=[],this.offset=0,this.handle=0,this.capacity=1048576,this.heap=new Int32Array(1048576),this.table=[]}push(e){this.sizeCheck(),this.heap[this.offset++]=e}sizeCheck(){if(0===this.capacity){let e=Cn(this.heap,0,this.offset);this.heap=new Int32Array(e.length+1048576),this.heap.set(e,0),this.capacity=1048576}this.capacity--}getbyaddr(e){return this.heap[e]}setbyaddr(e,t){this.heap[e]=t}malloc(){this.table.push(this.offset,0,0);let e=this.handle;return this.handle+=3,e}finishMalloc(e,t){this.table[e+1]=wn(t,0)}size(){return this.offset}getaddr(e){return this.table[e]}gethandle(e){this.table.push(e,wn(0,3),0);let t=this.handle;return this.handle+=3,t}sizeof(e){return zn(this.table,e)}scopesizeof(e){return _n(this.table,e)}free(e){let t=this.table[e+1];this.table[e+1]=xn(t,1)}compact(){let e=0,{table:t,table:{length:n},heap:r}=this;for(let i=0;i<n;i+=3){let n=t[i],s=t[i+1],a=s&Size.SIZE_MASK,l=0&s;if(2!==l)if(1===l)t[i+1]=xn(s,2),e+=a;else if(0===l){for(let t=n;t<=i+a;t++)r[t-e]=r[t];t[i]=n-e}else 3===l&&(t[i]=n-e)}this.offset=this.offset-e}pushPlaceholder(e){this.sizeCheck();let t=this.offset++;this.heap[t]=2147483647,this.placeholders.push([t,e])}pushStdlib(e){this.sizeCheck();let t=this.offset++;this.heap[t]=2147483647,this.stdlibs.push([t,e])}patchPlaceholders(){let{placeholders:e}=this;for(let t=0;t<e.length;t++){let[n,r]=e[t];this.setbyaddr(n,r())}}patchStdlibs(e){let{stdlibs:t}=this;for(let n=0;n<t.length;n++){let[r,{value:i}]=t[n];this.setbyaddr(r,e[i])}this.stdlibs=[]}capture(e,t=this.offset){this.patchPlaceholders(),this.patchStdlibs(e);let n=Cn(this.heap,0,t).buffer;return{handle:this.handle,table:this.table,buffer:n}}}class An{constructor(e,t){this.constants=e,this.heap=t,this._opcode=new kn(this.heap)}static hydrate(e){let t=new Sn(e.heap),n=new vn(e.constants);return new An(n,t)}opcode(e){return this._opcode.offset=e,this._opcode}}function Cn(e,t,n){if(void 0!==e.slice)return e.slice(t,n);let r=new Int32Array(n);for(;t<n;t++)r[t]=e[t];return r}function zn(e,t){return-1}function _n(e,t){return e[t+1]>>2}function Tn(e){e.heap.patchStdlibs(e.stdlib)}var On;class Rn{constructor(e,t,n,r){this.slots=e,this.callerScope=t,this.evalScope=n,this.partialMap=r}static root(e,t=0){let n=new Array(t+1);for(let e=0;e<=t;e++)n[e]=Nt;return new Rn(n,null,null,null).init({self:e})}static sized(e=0){let t=new Array(e+1);for(let n=0;n<=e;n++)t[n]=Nt;return new Rn(t,null,null,null)}init({self:e}){return this.slots[0]=e,this}getSelf(){return this.get(0)}getSymbol(e){return this.get(e)}getBlock(e){let t=this.get(e);return t===Nt?null:t}getEvalScope(){return this.evalScope}getPartialMap(){return this.partialMap}bind(e,t){this.set(e,t)}bindSelf(e){this.set(0,e)}bindSymbol(e,t){this.set(e,t)}bindBlock(e,t){this.set(e,t)}bindEvalScope(e){this.evalScope=e}bindPartialMap(e){this.partialMap=e}bindCallerScope(e){this.callerScope=e}getCallerScope(){return this.callerScope}child(){return new Rn(this.slots.slice(),this.callerScope,this.evalScope,this.partialMap)}get(e){if(e>=this.slots.length)throw new RangeError(`BUG: cannot get $${e} from scope; length=${this.slots.length}`);return this.slots[e]}set(e,t){if(e>=this.slots.length)throw new RangeError(`BUG: cannot get $${e} from scope; length=${this.slots.length}`);this.slots[e]=t}}const Ln=V("TRANSACTION");class Pn{constructor(){this.scheduledInstallManagers=[],this.scheduledInstallModifiers=[],this.scheduledUpdateModifierManagers=[],this.scheduledUpdateModifiers=[],this.createdComponents=[],this.createdManagers=[],this.updatedComponents=[],this.updatedManagers=[],this.destructors=[]}didCreate(e,t){this.createdComponents.push(e),this.createdManagers.push(t)}didUpdate(e,t){this.updatedComponents.push(e),this.updatedManagers.push(t)}scheduleInstallModifier(e,t){this.scheduledInstallModifiers.push(e),this.scheduledInstallManagers.push(t)}scheduleUpdateModifier(e,t){this.scheduledUpdateModifiers.push(e),this.scheduledUpdateModifierManagers.push(t)}willDestroy(e){e[G]()}didDestroy(e){this.destructors.push(e)}commit(){let{createdComponents:e,createdManagers:t}=this;for(let n=0;n<e.length;n++){let r=e[n];t[n].didCreate(r)}let{updatedComponents:n,updatedManagers:r}=this;for(let e=0;e<n.length;e++){let t=n[e];r[e].didUpdate(t)}let{destructors:i}=this;for(let e=0;e<i.length;e++)i[e][Z]();let{scheduledInstallManagers:s,scheduledInstallModifiers:a}=this;for(let e=0;e<s.length;e++){let t=a[e];s[e].install(t)}let{scheduledUpdateModifierManagers:l,scheduledUpdateModifiers:o}=this;for(let e=0;e<l.length;e++){let t=o[e];l[e].update(t)}}}function Mn(e,t){let n=void 0!==e?e:t;return n}class Nn{constructor(e,t){this.delegate=t,this[On]=null,this.extra=this.delegate.extra,this.isInteractive="boolean"!=typeof this.delegate.isInteractive||this.delegate.isInteractive,this.protocolForURL=Mn(this.delegate.protocolForURL,Bn),this.attributeFor=Mn(this.delegate.attributeFor,Dn),this.getPath=Mn(this.delegate.getPath,jn),this.setPath=Mn(this.delegate.setPath,Un),this.toBool=Mn(this.delegate.toBool,In),this.toIterator=Mn(this.delegate.toIterator,Hn),e.appendOperations?(this.appendOperations=e.appendOperations,this.updateOperations=e.updateOperations):e.document&&(this.appendOperations=new Rt(e.document),this.updateOperations=new Tt(e.document))}getTemplatePathDebugContext(e){return void 0!==this.delegate.getTemplatePathDebugContext?this.delegate.getTemplatePathDebugContext(e):""}setTemplatePathDebugContext(e,t,n){void 0!==this.delegate.setTemplatePathDebugContext&&this.delegate.setTemplatePathDebugContext(e,t,n)}iterableFor(e,t){let n=null===t?"@identity":String(t);return new yt(e,n,this)}toConditionalReference(e){return new Ut(e,this.delegate.toBool)}getAppendOperations(){return this.appendOperations}getDOM(){return this.updateOperations}begin(){void 0!==this.delegate.onTransactionBegin&&this.delegate.onTransactionBegin(),this[Ln]=new Pn}get transaction(){return this[Ln]}didCreate(e,t){this.transaction.didCreate(e,t)}didUpdate(e,t){this.transaction.didUpdate(e,t)}scheduleInstallModifier(e,t){this.isInteractive&&this.transaction.scheduleInstallModifier(e,t)}scheduleUpdateModifier(e,t){this.isInteractive&&this.transaction.scheduleUpdateModifier(e,t)}willDestroy(e){this.transaction.willDestroy(e)}didDestroy(e){this.transaction.didDestroy(e)}commit(){let e=this.transaction;this[Ln]=null,e.commit(),void 0!==this.delegate.onTransactionCommit&&this.delegate.onTransactionCommit()}}function Bn(e){return"object"==typeof URL||"undefined"==typeof URL?function(e){if("undefined"==typeof window){let t=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\S\s]*)/i.exec(e);return t&&t[1]?t[1].toLowerCase():""}let t=window.document.createElement("a");return t.href=e,t.protocol}(e):"undefined"!=typeof document?new URL(e,document.baseURI).protocol:new URL(e,"https://www.example.com").protocol}function Dn(e,t,n,r){return sn(e,t,r)}function jn(e,t){return e[t]}function Un(e,t,n){return e[t]=n}function In(e){return Boolean(e)}function Hn(e){return e&&e[Symbol.iterator]?e[Symbol.iterator]():null}On=Ln;class $n{constructor(e){this.inner=e}lookupComponent(e,t){if(this.inner.lookupComponent){let n=this.inner.lookupComponent(e,t);if(void 0===n)throw new Error(`Unexpected component ${e} (from ${t}) (lookupComponent returned undefined)`);return n}throw new Error("lookupComponent not implemented on RuntimeResolver.")}lookupPartial(e,t){if(this.inner.lookupPartial){let n=this.inner.lookupPartial(e,t);if(void 0===n)throw new Error(`Unexpected partial ${e} (from ${t}) (lookupPartial returned undefined)`);return n}throw new Error("lookupPartial not implemented on RuntimeResolver.")}resolve(e){if(this.inner.resolve){let t=this.inner.resolve(e);if(void 0===t)throw new Error(`Unexpected handle ${e} (resolve returned undefined)`);return t}throw new Error("resolve not implemented on RuntimeResolver.")}compilable(e){if(this.inner.compilable){let t=this.inner.compilable(e);if(void 0===t)throw new Error(`Unable to compile ${name} (compilable returned undefined)`);return t}throw new Error("compilable not implemented on RuntimeResolver.")}getInvocation(e){if(this.inner.getInvocation){let t=this.inner.getInvocation(e);if(void 0===t)throw new Error(`Unable to get invocation for ${JSON.stringify(e)} (getInvocation returned undefined)`);return t}throw new Error("getInvocation not implemented on RuntimeResolver.")}}const Fn=new class{constructor(){this.evaluateOpcode=function(e){let t=new Array(e);for(let n=0;n<e;n++)t[n]=null;return t}(107).slice()}add(e,t,n="syscall"){this.evaluateOpcode[e]={syscall:"machine"!==n,evaluate:t}}debugBefore(e,t){return{sp:void 0,pc:e.fetchValue(0),name:void 0,params:void 0,type:t.type,isMachine:t.isMachine,size:t.size,state:void 0}}debugAfter(e,t){let{sp:n,type:r,isMachine:i,pc:s}=t}evaluate(e,t,n){let r=this.evaluateOpcode[n];r.syscall?r.evaluate(e,t):r.evaluate(e[Ee],t)}};class Vn extends class{constructor(){j(this)}}{constructor(){super(...arguments),this.next=null,this.prev=null}}function qn(e){let t=[];for(let n=0,r=e.length;n<r;n++){let r=e[n].tag;r!==g&&t.push(r)}return k(t)}function Wn(e){let t=[],n=e.head();for(;null!==n;){let r=n.tag;r!==g&&t.push(r),n=e.nextNode(n)}return k(t)}class Jn extends class{constructor(){this.lastRevision=null,this.lastValue=null}value(){let{tag:e,lastRevision:t,lastValue:n}=this;return null!==t&&u(e,t)||(n=this.lastValue=this.compute(),this.lastRevision=o()),n}invalidate(){this.lastRevision=null}}{constructor(e){super(),this.parts=e,this.tag=qn(e)}compute(){let e=new Array;for(let t=0;t<this.parts.length;t++){let n=this.parts[t].value();null!=n&&(e[t]=Gn(n))}return e.length>0?e.join(""):null}}function Gn(e){return"function"!=typeof e.toString?"":String(e)}function Zn(e){return e===Nt}function Yn(e){return 0|(e.dynamicLayout?1:0)|(e.dynamicTag?2:0)|(e.prepareArgs?4:0)|(e.createArgs?8:0)|(e.attributeHook?16:0)|(e.elementHook?32:0)|(e.dynamicScope?64:0)|(e.createCaller?128:0)|(e.updateHook?256:0)|(e.createInstance?512:0)|(e.wrapped?1024:0)|(e.willDestroy?2048:0)}function Kn(e,t,n){return!!(t&n)}function Xn(e,t){return!!(e&t)}var Qn;Fn.add(16,(e,{op1:t})=>{let n=e.stack,r=e.runtime.resolver.resolve(t)(n.pop(),e);e.loadValue(8,r)}),Fn.add(22,(e,{op1:t})=>{let n=e.referenceForSymbol(t);e.stack.push(n)}),Fn.add(19,(e,{op1:t})=>{let n=e.stack.pop();e.scope().bindSymbol(t,n)}),Fn.add(21,(e,{op1:t})=>{let n=e.stack.pop(),r=e.stack.pop(),i=e.stack.pop(),s=i?[n,r,i]:null;e.scope().bindBlock(t,s)},"jit"),Fn.add(20,(e,{op1:t})=>{let n=e.stack.pop(),r=e.stack.pop(),i=e.stack.pop(),s=i?[n,r,i]:null;e.scope().bindBlock(t,s)}),Fn.add(105,(e,{op1:t})=>{let n=e[Te].getString(t),r=e.scope().getPartialMap()[n];void 0===r&&(r=e.getSelf().get(n)),e.stack.push(r)}),Fn.add(37,(e,{op1:t})=>{e.pushRootScope(t)}),Fn.add(23,(e,{op1:t})=>{let n=e[Te].getString(t),r=e.stack.pop();e.stack.push(r.get(n))}),Fn.add(24,(e,{op1:t})=>{let{stack:n}=e,r=e.scope().getBlock(t);n.push(r)}),Fn.add(25,e=>{let{stack:t}=e,n=t.pop();n&&!Zn(n)?(t.push(n[2]),t.push(n[1]),t.push(n[0])):(t.push(null),t.push(null),t.push(null))}),Fn.add(26,e=>{let{stack:t}=e,n=t.pop();n&&!Zn(n)?t.push(Dt):t.push(jt)}),Fn.add(27,e=>{e.stack.pop(),e.stack.pop();let t=e.stack.pop(),n=t&&t.parameters.length;e.stack.push(n?Dt:jt)}),Fn.add(28,(e,{op1:t})=>{let n=new Array(t);for(let r=t;r>0;r--){n[r-1]=e.stack.pop()}e.stack.push(new Jn(n))});const er=V("CURRIED COMPONENT DEFINITION");function tr(e){return!(!e||!e[er])}class nr{constructor(e,t){this.inner=e,this.args=t,this[Qn]=!0}unwrap(e){e.realloc(this.offset);let t=this;for(;;){let{args:n,inner:r}=t;if(n&&(e.positional.prepend(n.positional),e.named.merge(n.named)),!tr(r))return r;t=r}}get offset(){let{inner:e,args:t}=this,n=t?t.positional.length:0;return tr(e)?n+e.offset:n}}function rr(e,t,n){return e.lookupComponent(t,n)}Qn=er;class ir{constructor(e){this.list=e,this.tag=qn(e),this.list=e}value(){let e=[],{list:t}=this;for(let n=0;n<t.length;n++){let r=Ht(t[n].value());r&&e.push(r)}return 0===e.length?null:e.join(" ")}}class sr{constructor(e,t,n,r){this.inner=e,this.resolver=t,this.meta=n,this.args=r,this.tag=e.tag,this.lastValue=null,this.lastDefinition=null}value(){let{inner:e,lastValue:t}=this,n=e.value();if(n===t)return this.lastDefinition;let r=null;if(tr(n))r=n;else if("string"==typeof n&&n){let{resolver:e,meta:t}=this;r=rr(e,n,t)}return r=this.curry(r),this.lastValue=n,this.lastDefinition=r,r}get(){return Nt}curry(e){let{args:t}=this;return!t&&tr(e)?e:e?new nr(e,t):null}}class ar extends Vn{constructor(e,t,n){super(),this.node=e,this.reference=t,this.lastValue=n,this.type="dynamic-text",this.tag=t.tag,this.lastRevision=o(this.tag)}evaluate(){let{reference:e,tag:t}=this;u(t,this.lastRevision)||(this.lastRevision=o(),this.update(e.value()))}update(e){let t,{lastValue:n}=this;if(e!==n&&(t=$t(e)?"":qt(e)?e:String(e),t!==n)){this.node.nodeValue=this.lastValue=t}}}class lr{constructor(e){this.inner=e,this.tag=e.tag}value(){let e=this.inner.value();return function(e){return qt(e)||$t(e)||"boolean"==typeof e||"number"==typeof e}(e)?1:(t=e)&&t[er]?0:Ft(e)?3:function(e){return Vt(e)&&11===e.nodeType}(e)?4:Vt(e)?5:1;var t}}Fn.add(43,e=>{let t=e.stack.pop().value(),n=$t(t)?"":String(t);e.elements().appendDynamicHTML(n)}),Fn.add(44,e=>{let t=e.stack.pop().value().toHTML(),n=$t(t)?"":t;e.elements().appendDynamicHTML(n)}),Fn.add(47,e=>{let t=e.stack.pop(),n=t.value(),r=$t(n)?"":String(n),i=e.elements().appendDynamicText(r);b(t)||e.updateWith(new ar(i,t,r))}),Fn.add(45,e=>{let t=e.stack.pop().value();e.elements().appendDynamicFragment(t)}),Fn.add(46,e=>{let t=e.stack.pop().value();e.elements().appendDynamicNode(t)}),Fn.add(39,e=>e.pushChildScope()),Fn.add(40,e=>e.popScope()),Fn.add(59,e=>e.pushDynamicScope()),Fn.add(60,e=>e.popDynamicScope()),Fn.add(29,(e,{op1:t})=>{e.stack.push(e[Te].getOther(t))}),Fn.add(30,(e,{op1:t})=>{let n=e.stack;if(me(t)){let r;r=t>-1073741825?e[Te].getString(be(t,-1)):e[Te].getNumber(be(t,-1073741825)),n.pushJs(r)}else n.pushRaw(t)}),Fn.add(31,e=>{let t=e.stack;t.push(Lt.create(t.pop()))}),Fn.add(32,e=>{let t=e.stack;t.push(t.peek().value())}),Fn.add(33,(e,{op1:t,op2:n})=>{let r=e.fetchValue(t)-n;e.stack.dup(r)}),Fn.add(34,(e,{op1:t})=>{e.stack.pop(t)}),Fn.add(35,(e,{op1:t})=>{e.load(t)}),Fn.add(36,(e,{op1:t})=>{e.fetch(t)}),Fn.add(58,(e,{op1:t})=>{let n=e[Te].getArray(t);e.bindDynamicScope(n)}),Fn.add(69,(e,{op1:t})=>{e.enter(t)}),Fn.add(70,e=>{e.exit()}),Fn.add(63,(e,{op1:t})=>{e.stack.push(e[Te].getSerializable(t))}),Fn.add(62,e=>{e.stack.push(e.scope())}),Fn.add(61,e=>{let t=e.stack,n=t.pop();n?t.push(e.compile(n)):t.push(null)},"jit"),Fn.add(64,e=>{let{stack:t}=e,n=t.pop(),r=t.pop(),i=t.pop(),s=t.pop();if(null===i)return e.pushFrame(),void e.pushScope(r);let a=r;{let e=i.parameters,t=e.length;if(t>0){a=a.child();for(let n=0;n<t;n++)a.bindSymbol(e[n],s.at(n))}}e.pushFrame(),e.pushScope(a),e.call(n)}),Fn.add(65,(e,{op1:t})=>{let n=e.stack.pop();if(b(n))n.value()&&e.goto(t);else{let r=new Ze(n);r.peek()&&e.goto(t),e.updateWith(new or(r))}}),Fn.add(66,(e,{op1:t})=>{let n=e.stack.pop();if(b(n))n.value()||e.goto(t);else{let r=new Ze(n);r.peek()||e.goto(t),e.updateWith(new or(r))}}),Fn.add(67,(e,{op1:t,op2:n})=>{e.stack.peek()===n&&e.goto(t)}),Fn.add(68,e=>{let t=e.stack.peek();b(t)||e.updateWith(or.initialize(new Ze(t)))}),Fn.add(71,e=>{let{env:t,stack:n}=e;n.push(t.toConditionalReference(n.pop()))});class or extends Vn{constructor(e){super(),this.type="assert",this.tag=e.tag,this.cache=e}static initialize(e){let t=new or(e);return e.peek(),t}evaluate(e){let{cache:t}=this;t.revalidate()!==Ye&&e.throw()}}class ur extends Vn{constructor(e,t){super(),this.target=t,this.type="jump-if-not-modified",this.tag=e,this.lastRevision=o()}evaluate(e){let{tag:t,target:n,lastRevision:r}=this;!e.alwaysRevalidate&&u(t,r)&&e.goto(n)}didModify(){this.lastRevision=o(this.tag)}}class cr extends Vn{constructor(e){super(),this.target=e,this.type="did-modify",this.tag=g}evaluate(){this.target.didModify()}}class hr{constructor(e){this.tag=g,this.type="label",this.label=null,this.prev=null,this.next=null,j(this),this.label=e}evaluate(){}inspect(){return`${this.label} [${this._guid}]`}}Fn.add(41,(e,{op1:t})=>{e.elements().appendText(e[Te].getString(t))}),Fn.add(42,(e,{op1:t})=>{e.elements().appendComment(e[Te].getString(t))}),Fn.add(48,(e,{op1:t})=>{e.elements().openElement(e[Te].getString(t))}),Fn.add(49,e=>{let t=e.stack.pop().value();e.elements().openElement(t)}),Fn.add(50,e=>{let t,n,r=e.stack.pop(),i=e.stack.pop(),s=e.stack.pop().value();if(b(r))t=r.value();else{let n=new Ze(r);t=n.peek(),e.updateWith(new or(n))}if(void 0!==i.value())if(b(i))n=i.value();else{let t=new Ze(i);n=t.peek(),e.updateWith(new or(t))}let a=e.elements().pushRemoteElement(t,s,n);a&&e.associateDestroyable(a)}),Fn.add(56,e=>{e.elements().popRemoteElement()}),Fn.add(54,e=>{let t=e.fetchValue(6),n=null;t&&(n=t.flush(e),e.loadValue(6,null)),e.elements().flushElement(n)}),Fn.add(55,e=>{let t=e.elements().closeElement();t&&t.forEach(([t,n])=>{e.env.scheduleInstallModifier(n,t);let r=t.getDestructor(n);r&&e.associateDestroyable(r)})}),Fn.add(57,(e,{op1:t})=>{let{manager:n,state:r}=e.runtime.resolver.resolve(t),i=e.stack.pop(),{constructing:s,updateOperations:a}=e.elements(),l=e.dynamicScope(),o=n.create(s,r,i,l,a);e.fetchValue(6).addModifier(n,o);let u=n.getTag(o);v(u)||e.updateWith(new pr(u,n,o))});class pr extends Vn{constructor(e,t,n){super(),this.tag=e,this.manager=t,this.modifier=n,this.type="update-modifier",this.lastUpdated=o()}evaluate(e){let{manager:t,modifier:n,tag:r,lastUpdated:i}=this;u(r,i)||(e.env.scheduleUpdateModifier(n,t),this.lastUpdated=o())}}Fn.add(51,(e,{op1:t,op2:n,op3:r})=>{let i=e[Te].getString(t),s=e[Te].getString(n),a=r?e[Te].getString(r):null;e.elements().setStaticAttribute(i,s,a)}),Fn.add(52,(e,{op1:t,op2:n,op3:r})=>{let i=e[Te].getString(t),s=e.stack.pop(),a=s.value(),l=r?e[Te].getString(r):null,o=e.elements().setDynamicAttribute(i,a,!!n,l);b(s)||e.updateWith(new dr(s,o))});class dr extends Vn{constructor(e,t){super(),this.reference=e,this.attribute=t,this.type="patch-element";let{tag:n}=e;this.tag=n,this.lastRevision=o()}evaluate(e){let{attribute:t,reference:n,tag:r}=this;u(r,this.lastRevision)||(t.update(n.value(),e.env),this.lastRevision=o())}}const fr=V("COMPONENT_INSTANCE");Fn.add(77,e=>{let t=e.stack,n=t.pop();t.push(new Ut(n,tr))}),Fn.add(78,e=>{let t=e.stack,n=t.peek();t.push(new lr(n))}),Fn.add(79,(e,{op1:t})=>{let n=e.stack,r=n.pop(),i=n.pop(),s=e[Te].getTemplateMeta(t),a=e.runtime.resolver;e.loadValue(8,new sr(r,a,s,i))}),Fn.add(80,(e,{op1:t})=>{let n=e.runtime.resolver.resolve(t),{manager:r}=n,i=Yn(r.getCapabilities(n.state)),s={[fr]:!0,definition:n,manager:r,capabilities:i,state:null,handle:null,table:null,lookup:null};e.stack.push(s)}),Fn.add(83,(e,{op1:t})=>{let n,r=e.stack,i=r.pop().value(),s=e[Te].getTemplateMeta(t);if(e.loadValue(7,null),"string"==typeof i){n=rr(e.runtime.resolver,i,s)}else{if(!tr(i))throw $();n=i}r.push(n)}),Fn.add(81,e=>{let t,n,{stack:r}=e,i=r.pop();tr(i)?n=t=null:(n=i.manager,t=Yn(n.getCapabilities(i.state))),r.push({definition:i,capabilities:t,manager:n,state:null,handle:null,table:null})}),Fn.add(82,e=>{let t,n=e.stack,r=n.pop().value();if(!tr(r))throw $();t=r,n.push(t)}),Fn.add(84,(e,{op1:t,op2:n,op3:r})=>{let i=e.stack,s=e[Te].getStringArray(t),a=r>>4,l=8&r,o=7&r?e[Te].getStringArray(n):N;e[Oe].setup(i,s,o,a,!!l),i.push(e[Oe])}),Fn.add(85,e=>{let{stack:t}=e;t.push(e[Oe].empty(t))}),Fn.add(88,e=>{let t=e.stack,n=t.pop().capture();t.push(n)}),Fn.add(87,(e,{op1:t})=>{let n=e.stack,r=e.fetchValue(t),i=n.pop(),{definition:s}=r;tr(s)&&(s=function(e,t,n){let r=e.definition=t.unwrap(n),{manager:i,state:s}=r;return e.manager=i,e.capabilities=Yn(i.getCapabilities(s)),r}(r,s,i));let{manager:a,state:l}=s;if(!Kn(0,r.capabilities,4))return void n.push(i);let o=i.blocks.values,u=i.blocks.names,c=a.prepareArgs(l,i);if(c){i.clear();for(let e=0;e<o.length;e++)n.push(o[e]);let{positional:e,named:t}=c,r=e.length;for(let t=0;t<r;t++)n.push(e[t]);let s=Object.keys(t);for(let e=0;e<s.length;e++)n.push(t[s[e]]);i.setup(n,s,u,r,!1)}n.push(i)}),Fn.add(89,(e,{op1:t,op2:n})=>{let r=e.fetchValue(n),{definition:i,manager:s}=r,a=r.capabilities=Yn(s.getCapabilities(i.state));if(!Kn(0,a,512))throw new Error("BUG");let l=null;Kn(0,a,64)&&(l=e.dynamicScope());let o=1&t,u=null;Kn(0,a,8)&&(u=e.stack.peek());let c=null;Kn(0,a,128)&&(c=e.getSelf());let h=s.create(e.env,i.state,u,l,c,!!o);r.state=h;let p=s.getTag(h);Kn(0,a,256)&&!v(p)&&e.updateWith(new wr(p,h,s,l))}),Fn.add(90,(e,{op1:t})=>{let{manager:n,state:r,capabilities:i}=e.fetchValue(t),s=n.getDestructor(r);s&&e.associateDestroyable(s)}),Fn.add(100,e=>{e.beginCacheGroup(),e.elements().pushSimpleBlock()}),Fn.add(91,e=>{e.loadValue(6,new mr)}),Fn.add(53,(e,{op1:t,op2:n,op3:r})=>{let i=e[Te].getString(t),s=e.stack.pop(),a=r?e[Te].getString(r):null;e.fetchValue(6).setAttribute(i,s,!!n,a)}),Fn.add(108,(e,{op1:t,op2:n,op3:r})=>{let i=e[Te].getString(t),s=e[Te].getString(n),a=r?e[Te].getString(r):null;e.fetchValue(6).setStaticAttribute(i,s,a)});class mr{constructor(){this.attributes=U(),this.classes=[],this.modifiers=[]}setAttribute(e,t,n,r){let i={value:t,namespace:r,trusting:n};"class"===e&&this.classes.push(t),this.attributes[e]=i}setStaticAttribute(e,t,n){let r={value:t,namespace:n};"class"===e&&this.classes.push(t),this.attributes[e]=r}addModifier(e,t){this.modifiers.push([e,t])}flush(e){let t,n=this.attributes;for(let r in this.attributes){if("type"===r){t=n[r];continue}let i=this.attributes[r];"class"===r?br(e,"class",gr(this.classes),i.namespace,i.trusting):br(e,r,i.value,i.namespace,i.trusting)}return void 0!==t&&br(e,"type",t.value,t.namespace,t.trusting),this.modifiers}}function gr(e){return 0===e.length?"":1===e.length?e[0]:function(e){for(let t=0;t<e.length;t++)if("string"!=typeof e[t])return!1;return!0}(e)?e.join(" "):function(e){for(let t=0;t<e.length;t++){const n=e[t];"string"==typeof n&&(e[t]=Lt.create(n))}return new ir(e)}(e)}function br(e,t,n,r,i=!1){if("string"==typeof n)e.elements().setStaticAttribute(t,n,r);else{let s=e.elements().setDynamicAttribute(t,n.value(),i,r);b(n)||e.updateWith(new dr(n,s))}}function vr(e,t){return!1===Kn(0,e,1)}function yr(e,t){return!0===Kn(0,e,1)}function kr(e,t,n,r,i){let s=n.table.symbols.indexOf(e),a=r.get(t);-1!==s&&i.scope().bindBlock(s+1,a),n.lookup&&(n.lookup[e]=a)}Fn.add(102,(e,{op1:t})=>{let{definition:n,state:r}=e.fetchValue(t),{manager:i}=n,s=e.fetchValue(6);i.didCreateElement(r,e.elements().constructing,s)}),Fn.add(92,(e,{op1:t})=>{let{definition:n,state:r}=e.fetchValue(t),{manager:i}=n;e.stack.push(i.getSelf(r))}),Fn.add(93,(e,{op1:t})=>{let{definition:n,state:r}=e.fetchValue(t),{manager:i}=n;e.stack.push(i.getTagName(r))}),Fn.add(95,(e,{op1:t})=>{let n,r=e.fetchValue(t),i=r.manager,{definition:s}=r,{stack:a}=e,{capabilities:l}=r;if(vr(l,i))n=i.getJitStaticLayout(s.state,e.runtime.resolver);else{if(!yr(l,i))throw $();{let t=ye(i.getJitDynamicLayout(r.state,e.runtime.resolver));n=Xn(l,1024)?t.asWrappedLayout():t.asLayout()}}let o=n.compile(e.context);a.push(n.symbolTable),a.push(o)},"jit"),Fn.add(94,(e,{op1:t})=>{let n,r=e.fetchValue(t),{manager:i,definition:s}=r,{stack:a}=e,{state:l,capabilities:o}=r,{state:u}=s;if(vr(o,i))n=i.getAotStaticLayout(u,e.runtime.resolver);else{if(!yr(o,i))throw $();n=i.getAotDynamicLayout(l,e.runtime.resolver)}a.push(n.symbolTable),a.push(n.handle)}),Fn.add(76,(e,{op1:t})=>{let n=e.stack.pop(),r=e.stack.pop(),{manager:i}=n,s=Yn(i.getCapabilities(n.state)),a={[fr]:!0,definition:n,manager:i,capabilities:s,state:null,handle:r.handle,table:r.symbolTable,lookup:null};e.loadValue(t,a)}),Fn.add(98,(e,{op1:t})=>{let{stack:n}=e,r=n.pop(),i=n.pop(),s=e.fetchValue(t);s.handle=r,s.table=i}),Fn.add(38,(e,{op1:t})=>{let{symbols:n}=e.fetchValue(t).table;e.pushRootScope(n.length+1)}),Fn.add(97,(e,{op1:t})=>{let n=e.fetchValue(t);if(n.table.hasEval){let t=n.lookup=U();e.scope().bindEvalScope(t)}}),Fn.add(17,(e,{op1:t})=>{let n=e.fetchValue(t),r=e.scope(),i=e.stack.peek(),s=i.named.atNames;for(let e=s.length-1;e>=0;e--){let t=s[e],a=n.table.symbols.indexOf(s[e]),l=i.named.get(t,!0);-1!==a&&r.bindSymbol(a+1,l),n.lookup&&(n.lookup[t]=l)}}),Fn.add(18,(e,{op1:t})=>{let n=e.fetchValue(t),{blocks:r}=e.stack.peek();for(let t=0;t<r.names.length;t++)kr(r.symbolNames[t],r.names[t],n,r,e)}),Fn.add(99,(e,{op1:t})=>{let n=e.fetchValue(t);e.call(n.handle)}),Fn.add(103,(e,{op1:t})=>{let{manager:n,state:r,capabilities:i}=e.fetchValue(t),s=e.elements().popBlock();if(!Kn(0,i,512))throw new Error("BUG");n.didRenderLayout(r,s),e.env.didCreate(r,n),e.updateWith(new xr(n,r,s))}),Fn.add(101,e=>{e.commitCacheGroup()});class wr extends Vn{constructor(e,t,n,r){super(),this.tag=e,this.component=t,this.manager=n,this.dynamicScope=r,this.type="update-component"}evaluate(e){let{component:t,manager:n,dynamicScope:r}=this;n.update(t,r)}}class xr extends Vn{constructor(e,t,n){super(),this.manager=e,this.component=t,this.bounds=n,this.type="did-update-layout",this.tag=g}evaluate(e){let{manager:t,component:n,bounds:r}=this;t.didUpdateLayout(n,r),e.env.didUpdate(n,t)}}function Sr(e,t){console.info("Use `context`, and `get(<path>)` to debug this template."),t("this")}let Er=Sr;class Ar{constructor(e,t,n){this.scope=e,this.locals=U();for(let r=0;r<n.length;r++){let i=n[r],s=t[i-1],a=e.getSymbol(i);this.locals[s]=a}}get(e){let t,{scope:n,locals:r}=this,i=e.split("."),[s,...a]=e.split("."),l=n.getEvalScope();return"this"===s?t=n.getSelf():r[s]?t=r[s]:0===s.indexOf("@")&&l[s]?t=l[s]:(t=this.scope.getSelf(),a=i),a.reduce((e,t)=>e.get(t),t)}}Fn.add(106,(e,{op1:t,op2:n})=>{let r=e[Te].getStringArray(t),i=e[Te].getArray(n),s=new Ar(e.scope(),r,i);Er(e.getSelf().value(),e=>s.get(e).value())}),Fn.add(104,(e,{op1:t,op2:n,op3:r})=>{let{[Te]:i,stack:s}=e,a=s.pop().value(),l=i.getTemplateMeta(t),o=i.getStringArray(n),u=i.getArray(r),c=e.runtime.resolver.lookupPartial(a,l),h=e.runtime.resolver.resolve(c),{symbolTable:p,handle:d}=h.getPartial(e.context);{let t=p.symbols,n=e.scope(),r=e.pushRootScope(t.length),i=n.getEvalScope();r.bindEvalScope(i),r.bindSelf(n.getSelf());let s=Object.create(n.getPartialMap());for(let e=0;e<u.length;e++){let t=u[e],r=o[t-1],i=n.getSymbol(t);s[r]=i}if(i)for(let e=0;e<t.length;e++){let n=e+1,s=i[t[e]];void 0!==s&&r.bind(n,s)}r.bindPartialMap(s),e.pushFrame(),e.call(ve(d))}},"jit");class Cr{constructor(e){this.tag=e.tag,this.artifacts=e}value(){return!this.artifacts.isEmpty()}}Fn.add(74,e=>{let t=e.stack,n=t.pop(),r=t.pop(),i=e.env.iterableFor(n,r.value()),s=new tt(i);t.push(s),t.push(new Cr(s.artifacts))}),Fn.add(72,(e,{op1:t})=>{e.enterList(t)}),Fn.add(73,e=>{e.exitList()}),Fn.add(75,(e,{op1:t})=>{let n=e.stack.peek().next();if(n){let t=e.iterate(n.memo,n.value);e.enterItem(n.key,t)}else e.goto(t)});const zr={dynamicLayout:!1,dynamicTag:!1,prepareArgs:!1,createArgs:!1,attributeHook:!1,elementHook:!1,dynamicScope:!1,createCaller:!1,updateHook:!1,createInstance:!1,wrapped:!1,willDestroy:!1};new class{getCapabilities(e){return zr}prepareArgs(e,t){throw new Error("Unimplemented prepareArgs in SimpleComponentManager")}create(e,t,n,r,i,s){throw new Error("Unimplemented create in SimpleComponentManager")}getSelf(e){return Nt}getTag(e){throw new Error("Unimplemented getTag in SimpleComponentManager")}didRenderLayout(e,t){throw new Error("Unimplemented didRenderLayout in SimpleComponentManager")}didCreate(e){throw new Error("Unimplemented didCreate in SimpleComponentManager")}update(e,t){throw new Error("Unimplemented update in SimpleComponentManager")}didUpdateLayout(e,t){throw new Error("Unimplemented didUpdateLayout in SimpleComponentManager")}didUpdate(e){throw new Error("Unimplemented didUpdate in SimpleComponentManager")}getDestructor(e){return null}};class _r{constructor(e){this.bucket=e?pe({},e):{}}get(e){return this.bucket[e]}set(e,t){return this.bucket[e]=t}child(){return new _r(this.bucket)}}class Tr{constructor(){this.stack=null,this.positional=new Or,this.named=new Lr,this.blocks=new Nr}empty(e){let t=e[ze][3]+1;return this.named.empty(e,t),this.positional.empty(e,t),this.blocks.empty(e,t),this}setup(e,t,n,r,i){this.stack=e;let s=this.named,a=t.length,l=e[ze][3]-a+1;s.setup(e,l,a,t,i);let o=l-r;this.positional.setup(e,o,r);let u=this.blocks,c=n.length,h=o-3*c;u.setup(e,h,c,n)}get tag(){return qn([this.positional,this.named])}get base(){return this.blocks.base}get length(){return this.positional.length+this.named.length+3*this.blocks.length}at(e){return this.positional.at(e)}realloc(e){let{stack:t}=this;if(e>0&&null!==t){let{positional:n,named:r}=this,i=n.base+e;for(let e=n.length+r.length-1;e>=0;e--)t.copy(e+n.base,e+i);n.base+=e,r.base+=e,t[ze][3]+=e}}capture(){let e=0===this.positional.length?Ur:this.positional.capture(),t=0===this.named.length?jr:this.named.capture();return new Dr(this.tag,e,t,this.length)}clear(){let{stack:e,length:t}=this;t>0&&null!==e&&e.pop(t)}}class Or{constructor(){this.base=0,this.length=0,this.stack=null,this._tag=null,this._references=null}empty(e,t){this.stack=e,this.base=t,this.length=0,this._tag=g,this._references=N}setup(e,t,n){this.stack=e,this.base=t,this.length=n,0===n?(this._tag=g,this._references=N):(this._tag=null,this._references=null)}get tag(){let e=this._tag;return e||(e=this._tag=qn(this.references)),e}at(e){let{base:t,length:n,stack:r}=this;return e<0||e>=n?Nt:r.get(e,t)}capture(){return new Rr(this.tag,this.references)}prepend(e){let t=e.length;if(t>0){let{base:n,length:r,stack:i}=this;this.base=n-=t,this.length=r+t;for(let r=0;r<t;r++)i.set(e.at(r),r,n);this._tag=null,this._references=null}}get references(){let e=this._references;if(!e){let{stack:t,base:n,length:r}=this;e=this._references=t.sliceArray(n,n+r)}return e}}class Rr{constructor(e,t,n=t.length){this.tag=e,this.references=t,this.length=n}static empty(){return new Rr(g,N,0)}at(e){return this.references[e]}value(){return this.references.map(this.valueOf)}get(e){let{references:t,length:n}=this;if("length"===e)return Lt.create(n);{let r=parseInt(e,10);return r<0||r>=n?Nt:t[r]}}valueOf(e){return e.value()}}class Lr{constructor(){this.base=0,this.length=0,this._references=null,this._names=N,this._atNames=N}empty(e,t){this.stack=e,this.base=t,this.length=0,this._references=N,this._names=N,this._atNames=N}setup(e,t,n,r,i){this.stack=e,this.base=t,this.length=n,0===n?(this._references=N,this._names=N,this._atNames=N):(this._references=null,i?(this._names=null,this._atNames=r):(this._names=r,this._atNames=null))}get tag(){return qn(this.references)}get names(){let e=this._names;return e||(e=this._names=this._atNames.map(this.toSyntheticName)),e}get atNames(){let e=this._atNames;return e||(e=this._atNames=this._names.map(this.toAtName)),e}has(e){return-1!==this.names.indexOf(e)}get(e,t=!1){let{base:n,stack:r}=this,i=(t?this.atNames:this.names).indexOf(e);return-1===i?Nt:r.get(i,n)}capture(){return new Pr(this.tag,this.names,this.references)}merge(e){let{length:t}=e;if(t>0){let{names:n,length:r,stack:i}=this,{names:s}=e;Object.isFrozen(n)&&0===n.length&&(n=[]);for(let a=0;a<t;a++){let t=s[a];-1===n.indexOf(t)&&(r=n.push(t),i.push(e.references[a]))}this.length=r,this._references=null,this._names=n,this._atNames=null}}get references(){let e=this._references;if(!e){let{base:t,length:n,stack:r}=this;e=this._references=r.sliceArray(t,t+n)}return e}toSyntheticName(e){return e.slice(1)}toAtName(e){return"@"+e}}class Pr{constructor(e,t,n){this.tag=e,this.names=t,this.references=n,this.length=t.length,this._map=null}get map(){let e=this._map;if(!e){let{names:t,references:n}=this;e=this._map=U();for(let r=0;r<t.length;r++){e[t[r]]=n[r]}}return e}has(e){return-1!==this.names.indexOf(e)}get(e){let{names:t,references:n}=this,r=t.indexOf(e);return-1===r?Nt:n[r]}value(){let{names:e,references:t}=this,n=U();for(let r=0;r<e.length;r++){n[e[r]]=t[r].value()}return n}}function Mr(e){return"&"+e}class Nr{constructor(){this.internalValues=null,this._symbolNames=null,this.internalTag=null,this.names=N,this.length=0,this.base=0}empty(e,t){this.stack=e,this.names=N,this.base=t,this.length=0,this._symbolNames=null,this.internalTag=g,this.internalValues=N}setup(e,t,n,r){this.stack=e,this.names=r,this.base=t,this.length=n,this._symbolNames=null,0===n?(this.internalTag=g,this.internalValues=N):(this.internalTag=null,this.internalValues=null)}get values(){let e=this.internalValues;if(!e){let{base:t,length:n,stack:r}=this;e=this.internalValues=r.sliceArray(t,t+3*n)}return e}has(e){return-1!==this.names.indexOf(e)}get(e){let t=this.names.indexOf(e);if(-1===t)return null;let{base:n,stack:r}=this,i=r.get(3*t,n),s=r.get(3*t+1,n),a=r.get(3*t+2,n);return null===a?null:[a,s,i]}capture(){return new Br(this.names,this.values)}get symbolNames(){let e=this._symbolNames;return null===e&&(e=this._symbolNames=this.names.map(Mr)),e}}class Br{constructor(e,t){this.names=e,this.values=t,this.length=e.length}has(e){return-1!==this.names.indexOf(e)}get(e){let t=this.names.indexOf(e);return-1===t?null:[this.values[3*t+2],this.values[3*t+1],this.values[3*t]]}}class Dr{constructor(e,t,n,r){this.tag=e,this.positional=t,this.named=n,this.length=r}value(){return{named:this.named.value(),positional:this.positional.value()}}}const jr=new Pr(g,N,N),Ur=new Rr(g,N);new Dr(g,Ur,jr,0);class Ir{constructor(e,t,n,r,i){this.stack=e,this.heap=t,this.program=n,this.externs=r,this.registers=i,this.currentOpSize=0}fetchRegister(e){return this.registers[e]}loadRegister(e,t){this.registers[e]=t}setPc(e){this.registers[0]=e}pushFrame(){this.stack.push(this.registers[1]),this.stack.push(this.registers[2]),this.registers[2]=this.registers[3]-1}popFrame(){this.registers[3]=this.registers[2]-1,this.registers[1]=this.stack.get(0),this.registers[2]=this.stack.get(1)}pushSmallFrame(){this.stack.push(this.registers[1])}popSmallFrame(){this.registers[1]=this.stack.pop()}goto(e){this.setPc(this.target(e))}target(e){return this.registers[0]+e-this.currentOpSize}call(e){this.registers[1]=this.registers[0],this.setPc(this.heap.getaddr(e))}returnTo(e){this.registers[1]=this.target(e)}return(){this.setPc(this.registers[1])}nextStatement(){let{registers:e,program:t}=this,n=e[0];if(-1===n)return null;let r=t.opcode(n),i=this.currentOpSize=r.size;return this.registers[0]+=i,r}evaluateOuter(e,t){this.evaluateInner(e,t)}evaluateInner(e,t){e.isMachine?this.evaluateMachine(e):this.evaluateSyscall(e,t)}evaluateMachine(e){switch(e.type){case 0:return this.pushFrame();case 1:return this.popFrame();case 3:return this.call(e.op1);case 2:return this.call(this.stack.pop());case 4:return this.goto(e.op1);case 5:return this.return();case 6:return this.returnTo(e.op1)}}evaluateSyscall(e,t){Fn.evaluate(t,e,e.type)}}class Hr{constructor(e,{alwaysRevalidate:t=!1}){this.frameStack=new H,this.env=e,this.dom=e.getDOM(),this.alwaysRevalidate=t}execute(e,t){let{frameStack:n}=this;for(this.try(e,t);!n.isEmpty();){let e=this.frame.nextStatement();null!==e?e.evaluate(this):n.pop()}}get frame(){return this.frameStack.current}goto(e){this.frame.goto(e)}try(e,t){this.frameStack.push(new Jr(e,t))}throw(){this.frame.handleException(),this.frameStack.pop()}}class $r{constructor(e,t){this.state=e,this.resumeCallback=t}resume(e,t){return this.resumeCallback(e,this.state,t)}}class Fr extends Vn{constructor(e,t,n,r){super(),this.state=e,this.runtime=t,this.type="block",this.next=null,this.prev=null,this.children=r,this.bounds=n}parentElement(){return this.bounds.parentElement()}firstNode(){return this.bounds.firstNode()}lastNode(){return this.bounds.lastNode()}evaluate(e){e.try(this.children,null)}}class Vr extends Fr{constructor(e,t,n,r){super(e,t,n,r),this.type="try",this.tag=this._tag=m()}didInitializeChildren(){d(this._tag,Wn(this.children))}evaluate(e){e.try(this.children,this)}handleException(){let{state:e,bounds:t,children:n,prev:r,next:i,runtime:s}=this;Be(this,s.env),n.clear(),De(this,s.env);let a=Ve.resume(s.env,t),l=e.resume(s,a),o=new ue;Q(this,l.execute(e=>{e.pushUpdating(o),e.updateWith(this),e.pushUpdating(n)}).drop),this.prev=r,this.next=i}}class qr{constructor(e,t){this.opcode=e,this.marker=t,this.didInsert=!1,this.didDelete=!1,this.map=e.map,this.updating=e.children}insert(e,t,n,r,i){let{map:s,opcode:a,updating:l}=this,o=null,u=null;u=s.get(i),o=void 0!==u?u.bounds.firstNode():this.marker;let c=a.vmForInsertion(o),h=null,p=c.execute(e=>{h=e.iterate(r,n),s.set(t,h),e.pushUpdating(new ue),e.updateWith(h),e.pushUpdating(h.children)});l.insertBefore(h,u),Q(a,p.drop),this.didInsert=!0}retain(e,t,n,r){}move(e,t,n,r,i){let{map:s,updating:a}=this,l=s.get(t);if(i===rt)Me(l,this.marker),a.remove(l),a.append(l);else{let e=s.get(i);Me(l,e.firstNode()),a.remove(l),a.insertBefore(l,e)}}delete(e,t){let{map:n,updating:r}=this,i=n.get(t);!function(e,t){je(e,t),Ne(e),Ue(e,t)}(i,e),r.remove(i),n.delete(t),this.didDelete=!0}done(){this.opcode.didInitializeChildren(this.didInsert||this.didDelete)}}class Wr extends Fr{constructor(e,t,n,r,i){super(e,t,n,r),this.type="list-block",this.map=new Map,this.lastIterated=1,this.artifacts=i;let s=this._tag=m();this.tag=y([i.tag,s])}didInitializeChildren(e=!0){this.lastIterated=o(this.artifacts.tag),e&&d(this._tag,Wn(this.children))}evaluate(e){let{artifacts:t,lastIterated:n}=this;if(!u(t.tag,n)){let{bounds:n}=this,{dom:r}=e,i=r.createComment("");r.insertAfter(n.parentElement(),i,n.lastNode());let s=new qr(this,i);new it({target:s,artifacts:t,env:e.env}).sync(),this.parentElement().removeChild(i)}super.evaluate(e)}vmForInsertion(e){let{bounds:t,state:n,runtime:r}=this,i=Ve.forInitialRender(r.env,{element:t.parentElement(),nextSibling:e});return n.resume(r,i)}}class Jr{constructor(e,t){this.ops=e,this.exceptionHandler=t,this.current=e.head()}goto(e){this.current=e}nextStatement(){let{current:e,ops:t}=this;return e&&(this.current=t.nextNode(e)),e}handleException(){this.exceptionHandler&&this.exceptionHandler.handleException()}}class Gr{constructor(e,t,n,r){this.env=e,this.updating=t,this.bounds=n,this.drop=r,Q(this,r)}rerender({alwaysRevalidate:e=!1}={alwaysRevalidate:!1}){let{env:t,updating:n}=this;new Hr(t,{alwaysRevalidate:e}).execute(n,this)}parentElement(){return this.bounds.parentElement()}firstNode(){return this.bounds.firstNode()}lastNode(){return this.bounds.lastNode()}handleException(){throw"this should never happen"}[q](){Ne(this.bounds)}destroy(){!function(e,t){if(e[Ln])t();else{e.begin();try{t()}finally{e.commit()}}}(this.env,()=>{je(this,this.env),Ue(this,this.env)})}}class Zr{constructor(e=[]){this.vec=e}clone(){return new Zr(this.vec.slice())}sliceFrom(e){return new Zr(this.vec.slice(e))}slice(e,t){return new Zr(this.vec.slice(e,t))}copy(e,t){this.vec[t]=this.vec[e]}writeRaw(e,t){this.vec[e]=t}getRaw(e){return this.vec[e]}reset(){this.vec.length=0}len(){return this.vec.length}}class Yr{constructor(e=new Zr,t=[]){this.inner=e,this.js=t}slice(e,t){let n;return n="number"==typeof e&&"number"==typeof t?this.inner.slice(e,t):"number"==typeof e&&void 0===t?this.inner.sliceFrom(e):this.inner.clone(),new Yr(n,this.js.slice(e,t))}sliceInner(e,t){let n=[];if(-1===e)return n;for(let r=e;r<t;r++)n.push(this.get(r));return n}copy(e,t){this.inner.copy(e,t)}write(e,t){switch(typeof t){case"boolean":case"undefined":this.writeRaw(e,de(t));break;case"number":if(fe(t)){this.writeRaw(e,de(t));break}case"object":if(null===t){this.writeRaw(e,de(t));break}default:this.writeJs(e,t)}}writeJs(e,t){let n=this.js.length;this.js.push(t),this.inner.writeRaw(e,ge(n))}writeRaw(e,t){this.inner.writeRaw(e,t)}get(e){let t=this.inner.getRaw(e);return me(t)?this.js[be(t)]:function(e){if(e>1073741823)switch(e){case 1073741824:return!1;case 1073741825:return!0;case 1073741826:return null;case 1073741827:return;default:return 1073741827-e}return e}(t)}reset(){this.inner.reset(),this.js.length=0}get length(){return this.inner.len()}}var Kr,Xr;class Qr{constructor(){this.scope=new H,this.dynamicScope=new H,this.updating=new H,this.cache=new H,this.list=new H}}class ei{constructor(e,{pc:t,scope:n,dynamicScope:r,stack:i},s){this.runtime=e,this.elementStack=s,this[Kr]=new Qr,this[Xr]=new H,this.s0=null,this.s1=null,this.t0=null,this.t1=null,this.v0=null;let a=class{constructor(e,t){this.stack=e,this[ze]=t}static restore(e){let t=new Yr;for(let n=0;n<e.length;n++)t.write(n,e[n]);return new this(t,[0,-1,e.length-1,0])}push(e){this.stack.write(++this[ze][3],e)}pushJs(e){this.stack.writeJs(++this[ze][3],e)}pushRaw(e){this.stack.writeRaw(++this[ze][3],e)}dup(e=this[ze][3]){this.stack.copy(e,++this[ze][3])}copy(e,t){this.stack.copy(e,t)}pop(e=1){let t=this.stack.get(this[ze][3]);return this[ze][3]-=e,t}peek(e=0){return this.stack.get(this[ze][3]-e)}get(e,t=this[ze][2]){return this.stack.get(t+e)}set(e,t,n=this[ze][2]){this.stack.write(n+t,e)}slice(e,t){return this.stack.slice(e,t)}sliceArray(e,t){return this.stack.sliceInner(e,t)}capture(e){let t=this[ze][3]+1,n=t-e;return this.stack.sliceInner(n,t)}reset(){this.stack.reset()}toArray(){return console.log(this[ze]),this.stack.sliceInner(this[ze][2],this[ze][3]+1)}}.restore(i);a[ze][0]=t,a[ze][3]=i.length-1,a[ze][2]=-1,this[_e]=this.program.heap,this[Te]=this.program.constants,this.elementStack=s,this[Ce].scope.push(n),this[Ce].dynamicScope.push(r),this[Oe]=new Tr,this[Ee]=new Ir(a,this[_e],e.program,{debugBefore:e=>Fn.debugBefore(this,e),debugAfter:e=>{Fn.debugAfter(this,e)}},a[ze]),this.destructor={},this[Ae].push(this.destructor)}get stack(){return this[Ee].stack}get pc(){return this[Ee].fetchRegister(0)}fetch(e){this.stack.push(this.fetchValue(e))}load(e){let t=this.stack.pop();this.loadValue(e,t)}fetchValue(e){if(we(e))return this[Ee].fetchRegister(e);switch(e){case 4:return this.s0;case 5:return this.s1;case 6:return this.t0;case 7:return this.t1;case 8:return this.v0}}loadValue(e,t){switch(we(e)&&this[Ee].loadRegister(e,t),e){case 4:this.s0=t;break;case 5:this.s1=t;break;case 6:this.t0=t;break;case 7:this.t1=t;break;case 8:this.v0=t}}pushFrame(){this[Ee].pushFrame()}popFrame(){this[Ee].popFrame()}goto(e){this[Ee].goto(e)}call(e){this[Ee].call(e)}returnTo(e){this[Ee].returnTo(e)}return(){this[Ee].return()}get program(){return this.runtime.program}get env(){return this.runtime.env}captureState(e,t=this[Ee].fetchRegister(0)){return{pc:t,dynamicScope:this.dynamicScope(),scope:this.scope(),stack:this.stack.capture(e)}}beginCacheGroup(){this[Ce].cache.push(this.updating().tail())}commitCacheGroup(){let e=new hr("END"),t=this.updating(),n=this[Ce].cache.pop(),r=n?t.nextNode(n):t.head(),i=t.tail(),s=Wn(new ce(r,i)),a=new ur(s,e);t.insertBefore(a,r),t.append(new cr(a)),t.append(e)}enter(e){let t=new ue,n=this.capture(e),r=this.elements().pushUpdatableBlock(),i=new Vr(n,this.runtime,r,t);this.didEnter(i)}iterate(e,t){let n=this.stack;n.push(t),n.push(e);let r=this.capture(2),i=this.elements().pushUpdatableBlock();return new Vr(r,this.runtime,i,new ue)}enterItem(e,t){this.listBlock().map.set(e,t),this.didEnter(t)}enterList(e){let t=new ue,n=this[Ee].target(e),r=this.capture(0,n),i=this.elements().pushBlockList(t),s=this.stack.peek().artifacts,a=new Wr(r,this.runtime,i,t,s);this[Ce].list.push(a),this.didEnter(a)}didEnter(e){this.associateDestructor(re(e)),this[Ae].push(e),this.updateWith(e),this.pushUpdating(e.children)}exit(){this[Ae].pop(),this.elements().popBlock(),this.popUpdating(),this.updating().tail().didInitializeChildren()}exitList(){this.exit(),this[Ce].list.pop()}pushUpdating(e=new ue){this[Ce].updating.push(e)}popUpdating(){return this[Ce].updating.pop()}updateWith(e){this.updating().append(e)}listBlock(){return this[Ce].list.current}associateDestructor(e){if(!X(e))return;ee(this[Ae].current,e)}associateDestroyable(e){this.associateDestructor(re(e))}tryUpdating(){return this[Ce].updating.current}updating(){return this[Ce].updating.current}elements(){return this.elementStack}scope(){return this[Ce].scope.current}dynamicScope(){return this[Ce].dynamicScope.current}pushChildScope(){this[Ce].scope.push(this.scope().child())}pushDynamicScope(){let e=this.dynamicScope().child();return this[Ce].dynamicScope.push(e),e}pushRootScope(e){let t=Rn.sized(e);return this[Ce].scope.push(t),t}pushScope(e){this[Ce].scope.push(e)}popScope(){this[Ce].scope.pop()}popDynamicScope(){this[Ce].dynamicScope.pop()}getSelf(){return this.scope().getSelf()}referenceForSymbol(e){return this.scope().getSymbol(e)}execute(e){let t;e&&e(this);try{for(;t=this.next(),!t.done;);}finally{let e=this.elements();for(;e.hasBlocks;)e.popBlock()}return t.value}next(){let e,{env:t,elementStack:n}=this,r=this[Ee].nextStatement();return null!==r?(this[Ee].evaluateOuter(r,this),e={done:!1,value:null}):(this.stack.reset(),e={done:!0,value:new Gr(t,this.popUpdating(),n.popBlock(),this.destructor)}),e}bindDynamicScope(e){let t=this.dynamicScope();for(let n=e.length-1;n>=0;n--){let r=this[Te].getString(e[n]);t.set(r,this.stack.pop())}}}function ti(e,t=Rn.root(Nt,0),n){return{pc:e,scope:t,dynamicScope:n,stack:[]}}Kr=Ce,Xr=Ae;function ni(e){return(t,n,r)=>new ri(t,n,r,e)}class ri extends ei{constructor(e,t,n,r){super(e,t,n),this.context=r,this.resume=ni(this.context)}static initial(e,t,{handle:n,self:r,dynamicScope:i,treeBuilder:s}){let a=e.program.heap.scopesizeof(n),l=Rn.root(r,a),o=ti(e.program.heap.getaddr(n),l,i),u=ni(t)(e,o,s);return u.pushUpdating(),u}static empty(e,{handle:t,treeBuilder:n,dynamicScope:r},i){let s=ni(i)(e,ti(e.program.heap.getaddr(t),Rn.root(Nt,0),r),n);return s.pushUpdating(),s}capture(e,t=this[Ee].fetchRegister(0)){return new $r(this.captureState(e,t),this.resume)}compile(e){return ve(e.compile(this.context))}}class ii{constructor(e){this.vm=e}next(){return this.vm.next()}sync(){return function(e,t){let n;e.begin();do{n=t.next()}while(!n.done);let r=n.value;return e.commit(),r}(this.vm.runtime.env,this)}}function si(e,t,n,r){const i=Object.keys(r).map(e=>[e,r[e]]),s=["main","else","attrs"],a=i.map(([e])=>"@"+e);e.pushFrame();for(let t=0;t<3*s.length;t++)e.stack.push(null);return e.stack.push(null),i.forEach(([,t])=>{e.stack.push(t)}),e[Oe].setup(e.stack,a,s,0,!0),e.stack.push(e[Oe]),e.stack.push(t),e.stack.push(n),new ii(e)}function ai(e){return{type:"array",value:e}}function li(e){return{type:"string-array",value:e}}function oi(e){return{type:"template-meta",value:e}}function ui(e){return{type:"other",value:e}}function ci(e){return{type:"label",value:e}}function hi(e,t){return{type:"primitive",value:{primitive:e,type:t}}}const pi={dynamicLayout:!1,dynamicTag:!1,prepareArgs:!1,createArgs:!1,attributeHook:!1,elementHook:!1,dynamicScope:!1,createCaller:!1,updateHook:!1,createInstance:!1,wrapped:!1,willDestroy:!1};class di{constructor(e){this.inner=e}lookupHelper(e,t){if(this.inner.lookupHelper){let n=this.inner.lookupHelper(e,t);if(void 0===n)throw new Error(`Unexpected helper (${e} from ${JSON.stringify(t)}) (lookupHelper returned undefined)`);return n}throw new Error("Can't compile global helper invocations without an implementation of lookupHelper")}lookupModifier(e,t){if(this.inner.lookupModifier){let n=this.inner.lookupModifier(e,t);if(void 0===n)throw new Error(`Unexpected modifier (${e} from ${JSON.stringify(t)}) (lookupModifier returned undefined)`);return n}throw new Error("Can't compile global modifier invocations without an implementation of lookupModifier")}lookupComponent(e,t){if(this.inner.lookupComponent){let n=this.inner.lookupComponent(e,t);if(void 0===n)throw new Error(`Unexpected component (${e} from ${JSON.stringify(t)}) (lookupComponent returned undefined)`);return n}throw new Error("Can't compile global component invocations without an implementation of lookupComponent")}lookupPartial(e,t){if(this.inner.lookupPartial){let n=this.inner.lookupPartial(e,t);if(void 0===n)throw new Error(`Unexpected partial (${e} from ${JSON.stringify(t)}) (lookupPartial returned undefined)`);return n}throw new Error("Can't compile global partial invocations without an implementation of lookupPartial")}resolve(e){if(this.inner.resolve)return this.inner.resolve(e);throw new Error("Compile-time debugging requires an implementation of resolve")}}function fi(e,{resolver:t,meta:{referrer:n}}){let r=t.lookupComponent(e,n);if(null===r)return r;let{handle:i,compilable:s,capabilities:a}=r;return{handle:i,compilable:s,capabilities:a||pi}}class mi{constructor(e){this.buffer=e,this.size=0}encode(e,t){if(e>255)throw new Error(`Opcode type over 8-bits. Got ${e}.`);let n=e|t|arguments.length-2<<8;this.buffer.push(n);for(let e=2;e<arguments.length;e++){let t=arguments[e];if("number"==typeof t&&t>2147483647)throw new Error(`Operand over 32-bits. Got ${t}.`);this.buffer.push(t)}this.size=this.buffer.length}patch(e,t){if(-1!==this.buffer[e+1])throw new Error("Trying to patch operand in populated slot instead of a reserved slot.");this.buffer[e+1]=t}}function gi(e){return[bi(e),ns(31)]}function bi(e){let t;switch(typeof e){case"number":t=fe(e)?hi(e,0):hi(e,2);break;case"string":t=hi(e,1);break;case"boolean":case"object":case"undefined":t=hi(e,0);break;default:throw new Error("Invalid primitive passed to pushPrimitive")}return ns(30,t)}function vi({handle:e,params:t,hash:n}){return[ns(0),ns("SimpleArgs",{params:t,hash:n,atNames:!1}),ns(16,e),ns(1),ns(36,8)]}function yi(e,t){return[ns(59),ns(58,li(e)),t(),ns(60)]}function ki(e,t){return[ns("SimpleArgs",{params:t,hash:null,atNames:!0}),ns(24,e),ns(25),ns("Option",ns("JitCompileBlock")),ns(64),ns(40),ns(1)]}function wi(e){return[Ei(e&&e.symbolTable),ns(62),ns("PushCompilable",e)]}function xi(e){return[ns(0),ns("PushCompilable",e),ns("JitCompileBlock"),ns(2),ns(1)]}function Si(e,t){let{parameters:n}=e.symbolTable,r=n.length,i=Math.min(t,r);if(0===i)return xi(e);let s=[];if(s.push(ns(0)),i){s.push(ns(39));for(let e=0;e<i;e++)s.push(ns(33,2,t-e)),s.push(ns(19,n[e]))}return s.push(ns("PushCompilable",e)),s.push(ns("JitCompileBlock")),s.push(ns(2)),i&&s.push(ns(40)),s.push(ns(1)),s}function Ei(e){return e?ns(63,{type:"serializable",value:e}):bi(null)}function Ai(e){let t=[],n=0;e((function(e,r){t.push({match:e,callback:r,label:"CLAUSE"+n++})}));let r=[ns(69,2),ns(68),ns(32),ns("StartLabels")];for(let e of t.slice(0,-1))r.push(ns(67,ci(e.label),e.match));for(let e=t.length-1;e>=0;e--){let n=t[e];r.push(ns("Label",n.label),ns(34,2),n.callback()),0!==e&&r.push(ns(4,ci("END")))}return r.push(ns("Label","END"),ns("StopLabels"),ns(70)),r}function Ci({args:e,body:t}){let{count:n,actions:r}=e();return[ns("StartLabels"),ns(0),ns(6,ci("ENDINITIAL")),r,ns(69,n),t(),ns("Label","FINALLY"),ns(70),ns(5),ns("Label","ENDINITIAL"),ns(1),ns("StopLabels")]}function zi({args:e,ifTrue:t,ifFalse:n}){return Ci({args:e,body:()=>{let e=[ns(66,ci("ELSE")),t(),ns(4,ci("FINALLY")),ns("Label","ELSE")];return n&&e.push(n()),e}})}function _i(e,t){let{encoder:n,syntax:{program:{mode:r,constants:i}}}=e;switch(t.op){case"Option":return ji(e,function(e){let t=e.op1;return null===t?Mi:t}(t));case"Label":return n.label(t.op1);case"StartLabels":return n.startLabels();case"StopLabels":return n.stopLabels();case"JitCompileBlock":return ji(e,function(e){return"jit"===e?ns(61):Mi}(r));case"GetComponentLayout":return n.push(i,function(e){return"aot"===e?94:95}(r),t.op1);case"SetBlock":return n.push(i,function(e){return"aot"===e?20:21}(r),t.op1);default:return F(t)}}function Ti(e,t){Ii(e,function(e,t){switch(t.op){case"CompileBlock":return function(e,t){return function(e,t){let[,n,r,i,s]=e,a=Xi(s,t.meta),l=Qi(n,t.meta,"Expected block head to be a string");if("string"!=typeof l)return l;return t.syntax.macros.blocks.compile(l,r||[],i,a,t)}(t.op1,e)}(e,t);case"CompileInline":return function(e,t){let{inline:n,ifUnhandled:r}=t.op1,i=function(e,t){return t.syntax.macros.inlines.compile(e,t)}(n,e);return Di(i)?i:r(n)}(e,t);case"InvokeStatic":return function(e,t){let n=t.op1;if("aot"===e.program.mode){let t=n.compile(e);return"number"!=typeof t?ns("Error",{problem:"Invalid block",start:0,end:0}):ns(3,t===Wi?()=>n.compile(e):t)}return[ns(29,ui(t.op1)),ns(61),ns(2)]}(e.syntax,t);case"Args":return function({params:e,hash:t,blocks:n,atNames:r}){let i=[],s=n.names;for(let e=0;e<s.length;e++)i.push(wi(n.get(s[e])));let{count:a,actions:l}=is(e);i.push(l);let o=a<<4;r&&(o|=8);n&&(o|=7);let u=N;if(t){u=t[0];let e=t[1];for(let t=0;t<e.length;t++)i.push(ns("Expr",e[t]))}return i.push(ns(84,li(u),li(s),o)),i}(t.op1);case"PushCompilable":return function(e,t){if(null===e)return bi(null);if("aot"===t.program.mode){let n=e.compile(t);return"number"!=typeof n?ns("Error",{problem:"Compile Error (TODO: thread better)",start:0,end:0}):bi(n)}return ns(29,ui(e))}(t.op1,e.syntax);case"DynamicComponent":return function(e,t){let{definition:n,attrs:r,params:i,args:s,blocks:a,atNames:l}=t.op1,o=r&&r.length>0?Zi(r,e.meta):null,u=Array.isArray(a)||null===a?Xi(a,e.meta):a;return us(e.meta,{definition:n,attrs:o,params:i,hash:s,atNames:l,blocks:u})}(e,t);case"IfResolvedComponent":return function(e,t){let{name:n,attrs:r,blocks:i,staticTemplate:s,dynamicTemplate:a,orElse:l}=t.op1,o=fi(n,{resolver:e.syntax.program.resolverDelegate,meta:e.meta}),{meta:u}=e;if(null!==o){let{handle:e,capabilities:t,compilable:n}=o,l=Zi(r,u),c=Xi(i,u);return null!==n?s(e,t,n,{attrs:l,blocks:c}):a(e,t,{attrs:l,blocks:c})}if(l)return l();throw new Error("Compile Error: Cannot find component "+n)}(e,t);default:return F(t)}}(e,t))}function Oi(e,t,n){void 0!==n.op3?e.push(t,n.op,n.op1,n.op2,n.op3):void 0!==n.op2?e.push(t,n.op,n.op1,n.op2):void 0!==n.op1?e.push(t,n.op,n.op1):e.push(t,n.op)}class Ri{constructor(){this.names={},this.funcs=[]}add(e,t){this.names[e]=this.funcs.push(t)-1}compile(e,t){let n=e[0],r=this.names[n];return(0,this.funcs[r])(e,t)}}const Li=new Ri;function Pi(e,t,n,r){switch(n.op){case"SimpleArgs":Ui(e,t,function(e,t,n){let r=[],{count:i,actions:s}=is(e);r.push(s);let a=i<<4;n&&(a|=8);let l=N;if(t){l=t[0];let e=t[1];for(let t=0;t<e.length;t++)r.push(ns("Expr",e[t]))}return r.push(ns(84,li(l),li(N),a)),r}(n.op1.params,n.op1.hash,n.op1.atNames),r);break;case"Expr":Ui(e,t,(i=n.op1,s=t.meta,Array.isArray(i)?Li.compile(i,s):[bi(i),ns(31)]),r);break;case"IfResolved":Ui(e,t,function(e,{op1:t}){let{kind:n,name:r,andThen:i,orElse:s,span:a}=t,l=function(e,t,n,r){switch(t){case"Modifier":return e.lookupModifier(n,r);case"Helper":return e.lookupHelper(n,r);case"ComponentDefinition":{let t=e.lookupComponent(n,r);return t&&t.handle}}}(e.syntax.program.resolverDelegate,n,r,e.meta.referrer);return null!==l?i(l):s?s():ts(`Unexpected ${n} ${r}`,a.start,a.end)}(t,n),r);break;case"ResolveFree":throw new Error("Unimplemented HighLevelResolutionOpcode.ResolveFree");case"ResolveContextualFree":{let{freeVar:i,context:s}=n.op1;if(t.meta.asPartial){Ui(e,t,[ns(105,t.meta.upvars[i])],r);break}switch(s){case"Expression":{let n=t.meta.upvars[i];Ui(e,t,[ns(22,0),ns(23,n)],r);break}case"AppendSingleId":{let n,s=t.syntax.program.resolverDelegate,a=t.meta.upvars[i],l=s.lookupHelper(a,t.meta.referrer);n=l?vi({handle:l,params:null,hash:null}):[ns(22,0),ns(23,a)],Ui(e,t,n,r);break}default:throw new Error("unimplemented: Can't evaluate expression in context "+s)}break}default:return F(n)}var i,s}Li.add(32,([,e])=>{let t=[];for(let n of e)t.push(ns("Expr",n));return t.push(ns(28,e.length)),t}),Li.add(31,([,e,t,n,r,i],s)=>{if(function(e,t){if(!Array.isArray(e))return!1;if(27===e[0]){let n=e[1];return!(26!==n[0]||!t.upvars||"component"!==t.upvars[n[1]])}return!1}(n,s)){if(!r||0===r.length)return ns("Error",{problem:"component helper requires at least one argument",start:e,end:e+t});let[n,...a]=r;return function({definition:e,params:t,hash:n,atNames:r},i){return[ns(0),ns("SimpleArgs",{params:t,hash:n,atNames:r}),ns(88),ns("Expr",e),ns(79,oi(i)),ns(1),ns(36,8)]}({definition:n,params:a,hash:i,atNames:!1},s.referrer)}let a=Qi(n,s,"Expected call head to be a string");return"string"!=typeof a?a:ns("IfResolved",{kind:"Helper",name:a,andThen:e=>vi({handle:e,params:r,hash:i}),span:{start:e,end:e+t}})}),Li.add(24,([,e])=>[ns(22,e)]),Li.add(27,([,e,t])=>[ns("Expr",e),...t.map(e=>ns(23,e))]),Li.add(25,([,e])=>ns("ResolveFree",e)),Li.add(26,([,e,t])=>ns("ResolveContextualFree",{freeVar:e,context:t})),Li.add(30,()=>gi(void 0)),Li.add(28,([,e])=>[ns("Expr",e),ns(26)]),Li.add(29,([,e])=>[ns("Expr",e),ns(25),ns("JitCompileBlock"),ns(27)]);const Mi={"no-action":!0},Ni={"not-handled":!0};function Bi(e){return e&&!!e["no-action"]}function Di(e){return!e||!e["not-handled"]}function ji(e,t){if(!Bi(t))if(Array.isArray(t))for(let n of t)ji(e,n);else"Simple"===t.type?_i(e,t):Oi(e.encoder,e.syntax.program.constants,t)}function Ui(e,t,n,r){if(!Bi(n))if(Array.isArray(n))for(let i of n)Ui(e,t,i,r);else if("Number"===n.type)Oi(e,r,n);else if("Resolution"===n.type)Pi(e,t,n,r);else if("Simple"===n.type)_i(t,n);else{if("Error"!==n.type)throw ke(n,"unexpected action kind");e.error({problem:n.op1.problem,span:{start:n.op1.start,end:n.op1.end}})}}function Ii(e,t){if(!Bi(t))if(Array.isArray(t))for(let n of t)Ii(e,n);else if("Number"===t.type)Oi(e.encoder,e.syntax.program.constants,t);else if("Compile"===t.type)Ti(e,t);else if("Resolution"===t.type)Pi(e.encoder,e,t,e.syntax.program.constants);else if("Simple"===t.type)_i(e,t);else if("Error"!==t.type)throw ke(t,"unexpected action type")}class Hi{constructor(){let{blocks:e,inlines:t}=function(e,t){return e.add("if",(e,t,n)=>{if(!e||1!==e.length)throw new Error("SYNTAX ERROR: #if requires a single argument");return zi({args:()=>({count:1,actions:[ns("Expr",e[0]),ns(71)]}),ifTrue:()=>xi(n.get("default")),ifFalse:()=>n.has("else")?xi(n.get("else")):Mi})}),e.add("unless",(e,t,n)=>{if(!e||1!==e.length)throw new Error("SYNTAX ERROR: #unless requires a single argument");return zi({args:()=>({count:1,actions:[ns("Expr",e[0]),ns(71)]}),ifTrue:()=>n.has("else")?xi(n.get("else")):Mi,ifFalse:()=>xi(n.get("default"))})}),e.add("with",(e,t,n)=>{if(!e||1!==e.length)throw new Error("SYNTAX ERROR: #with requires a single argument");return zi({args:()=>({count:2,actions:[ns("Expr",e[0]),ns(33,3,0),ns(71)]}),ifTrue:()=>Si(n.get("default"),1),ifFalse:()=>n.has("else")?xi(n.get("else")):Mi})}),e.add("let",(e,t,n)=>{if(!e)return ts("let requires arguments",0,0);let{count:r,actions:i}=is(e);return[i,Si(n.get("default"),r)]}),e.add("each",(e,t,n)=>Ci({args(){let n;return n=t&&"key"===t[0][0]?[ns("Expr",t[1][0])]:[gi(null)],n.push(ns("Expr",e[0])),{count:2,actions:n}},body(){let e=[ns(74),ns(66,ci("ELSE")),ns(0),ns(33,2,1),ns(6,ci("ITER")),ns(72,ci("BODY")),ns("Label","ITER"),ns(75,ci("BREAK")),ns("Label","BODY"),Si(n.get("default"),2),ns(34,2),ns(4,ci("FINALLY")),ns("Label","BREAK"),ns(73),ns(1),ns(4,ci("FINALLY")),ns("Label","ELSE")];return n.has("else")&&e.push(xi(n.get("else"))),e}})),e.add("in-element",(e,t,n)=>{if(!e||1!==e.length)throw new Error("SYNTAX ERROR: #in-element requires a single argument");return zi({args(){let[n,r]=t,i=[];for(let e=0;e<n.length;e++){let t=n[e];if("guid"!==t&&"insertBefore"!==t)throw new Error(`SYNTAX ERROR: #in-element does not take a \`${n[0]}\` option`);i.push(ns("Expr",r[e]))}return i.push(ns("Expr",e[0]),ns(33,3,0)),{count:4,actions:i}},ifTrue:()=>[ns(50),xi(n.get("default")),ns(56)]})}),e.add("-with-dynamic-vars",(e,t,n)=>{if(t){let[e,r]=t,{actions:i}=is(r);return[i,yi(e,()=>xi(n.get("default")))]}return xi(n.get("default"))}),e.add("component",(e,t,n,r)=>{if("string"==typeof e[0]){let i=ls(r,e[0],t,n.get("default"));if(Di(i))return i}let[i,...s]=e;return ns("DynamicComponent",{definition:i,attrs:null,params:s,args:t,atNames:!1,blocks:n})}),t.add("component",(e,t,n,r)=>{let i=t&&t[0];if("string"==typeof i){let e=ls(r,i,n,null);if(e!==Ni)return e}let[s,...a]=t;return us(r.meta,{definition:s,attrs:null,params:a,hash:n,atNames:!1,blocks:Ki})}),{blocks:e,inlines:t}}(new $i,new Fi);this.blocks=e,this.inlines=t}}class $i{constructor(){this.names=U(),this.funcs=[]}add(e,t){this.funcs.push(t),this.names[e]=this.funcs.length-1}addMissing(e){this.missing=e}compile(e,t,n,r,i){let s=this.names[e],a={resolver:i.syntax.program.resolverDelegate,meta:i.meta};if(void 0===s){return(0,this.missing)(e,t,n,r,a)}return(0,this.funcs[s])(t,n,r,a)}}class Fi{constructor(){this.names=U(),this.funcs=[]}add(e,t){this.funcs.push(t),this.names[e]=this.funcs.length-1}addMissing(e){this.missing=e}compile(e,t){let n,r,i,[,,,,s]=e;if(!Array.isArray(s))return Ni;if(31===s[0]){let e=Qi(s[3],t.meta,"Expected head of call to be a string");if("string"!=typeof e)return e;n=e,r=s[4],i=s[5]}else{if(27!==s[0])return Ni;{let e=function([,e,t],n){if(t.length>0)return null;if(25===e[0]||26===e[0])return n.upvars[e[1]];return null}(s,t.meta);if(null===e)return Ni;n=e,r=null,i=null}}let a=this.names[n],l={resolver:t.syntax.program.resolverDelegate,meta:t.meta};if(void 0===a&&this.missing){return(0,this.missing)(n,r,i,l)}if(void 0!==a){return(0,this.funcs[a])(n,r,i,l)}return Ni}}function Vi(e,t){return{syntax:e,encoder:new rs,meta:t}}const qi=new Ri;qi.add(2,e=>ns(42,e[1])),qi.add(11,()=>ns(55)),qi.add(10,()=>ns(54)),qi.add(3,(e,t)=>{let[,,,n,r,i]=e,s=Qi(n,t,"Expected modifier head to be a string");return"string"!=typeof s?s:ns("IfResolved",{kind:"Modifier",name:s,andThen:e=>[ns(0),ns("SimpleArgs",{params:r,hash:i,atNames:!1}),ns(57,e),ns(1)],span:{start:0,end:0}})}),qi.add(12,([,e,t,n])=>ns(51,e,t,n)),qi.add(23,([,e,t,n])=>ns(108,e,t,n)),qi.add(13,([,e,t,n])=>[ns("Expr",t),ns(52,e,!1,n)]),qi.add(20,([,e,t,n])=>[ns("Expr",t),ns(52,e,!0,n)]),qi.add(14,([,e,t,n])=>[ns("Expr",t),ns(53,e,!1,n)]),qi.add(21,([,e,t,n])=>[ns("Expr",t),ns(53,e,!0,n)]),qi.add(9,([,e,t])=>t?ns(48,e):[ns(91),ns(48,e)]),qi.add(7,([,e,t,n,r])=>"string"==typeof e?ns("IfResolvedComponent",{name:e,attrs:t,blocks:r,staticTemplate:(e,t,r,{blocks:i,attrs:s})=>[ns(80,e),os({capabilities:t,layout:r,attrs:s,params:null,hash:n,blocks:i})],dynamicTemplate:(e,t,{attrs:r,blocks:i})=>[ns(80,e),cs({capabilities:t,attrs:r,params:null,hash:n,atNames:!0,blocks:i})]}):ns("DynamicComponent",{definition:e,attrs:t,params:null,args:n,blocks:r,atNames:!0})),qi.add(17,([,e,t],n)=>zi({args:()=>({count:2,actions:[ns("Expr",e),ns(33,3,0)]}),ifTrue:()=>[ns(104,oi(n.referrer),li(n.evalSymbols),ai(t)),ns(40),ns(1)]})),qi.add(16,([,e,t])=>ki(e,t)),qi.add(15,([,e])=>ki(e,N)),qi.add(22,([,e],t)=>ns(106,li(t.evalSymbols),ai(e))),qi.add(1,e=>{let[,t,,,n]=e;return"string"==typeof n&&t?ns(41,n):ns("CompileInline",{inline:e,ifUnhandled:()=>[ns(0),ns("Expr",n),ns(3,{type:"stdlib",value:t?"trusting-append":"cautious-append"}),ns(1)]})}),qi.add(5,e=>ns("CompileBlock",e));const Wi=-1;class Ji{constructor(e,t,n){this.statements=e,this.meta=t,this.symbolTable=n,this.compiled=null}compile(e){return function(e,t){if(null!==e.compiled)return e.compiled;e.compiled=Wi;let{statements:n,meta:r}=e,i=function(e,t,n){let r=qi,i=Vi(n,t);for(let t=0;t<e.length;t++)Ii(i,r.compile(e[t],i.meta));0;return i.encoder.commit(n.program.heap,t.size)}(n,r,t);return Tn(t.program),e.compiled=i,i}(this,e)}}function Gi(e){let t=e.block;return new Ji(t.statements,ss(e),{symbols:t.symbols,hasEval:t.hasEval})}function Zi(e,t){let n=Array.isArray(e)?{statements:e,parameters:N}:e;return new Ji(n.statements,t,{parameters:n.parameters})}class Yi{constructor(e){this.blocks=e,this.names=e?Object.keys(e):[]}get(e){return this.blocks&&this.blocks[e]||null}has(e){let{blocks:t}=this;return null!==t&&e in t}with(e,t){let{blocks:n}=this;return new Yi(n?pe({},n,{[e]:t}):{[e]:t})}get hasAny(){return null!==this.blocks}}const Ki=new Yi(null);function Xi(e,t){if(null===e)return Ki;let n=U(),[r,i]=e;for(let e=0;e<r.length;e++)n[r[e]]=Zi(i[e],t);return new Yi(n)}function Qi(e,t,n){if(!t.upvars)return ts(n+", but there were no free variables in the template",0,0);if(!Array.isArray(e)||27!==e[0])throw new Error(`${n}, got ${JSON.stringify(e)}`);if(0!==e[2].length)throw new Error(`${n}, got ${JSON.stringify(e)}`);if(26===e[1][0]||25===e[1][0]){let n=e[1][1];return t.upvars[n]}throw new Error(`${n}, got ${JSON.stringify(e)}`)}class es{constructor(){this.labels=U(),this.targets=[]}label(e,t){this.labels[e]=t}target(e,t){this.targets.push({at:e,target:t})}patch(e){let{targets:t,labels:n}=this;for(let r=0;r<t.length;r++){let{at:i,target:s}=t[r],a=n[s]-i;e.patch(i,a)}}}function ts(e,t,n){return ns("Error",{problem:e,start:t,end:n})}function ns(e,t,n,r){if("number"==typeof e)return void 0!==r?{type:"Number",op:e,op1:t,op2:n,op3:r}:void 0!==n?{type:"Number",op:e,op1:t,op2:n}:void 0!==t?{type:"Number",op:e,op1:t}:{type:"Number",op:e};{let n;if("CompileInline"===(i=e)||"CompileBlock"===i||"InvokeStatic"===i||"PushCompilable"===i||"Args"===i||"IfResolvedComponent"===i||"DynamicComponent"===i)n="Compile";else if(function(e){return"IfResolved"===e||"Expr"===e||"SimpleArgs"===e||"ResolveFree"===e||"ResolveContextualFree"===e}(e))n="Resolution";else if(function(e){return"Label"===e||"Option"===e||"GetComponentLayout"===e||"StartLabels"===e||"StopLabels"===e||"SimpleArgs"===e||"JitCompileBlock"===e||"SetBlock"===e}(e))n="Simple";else{if(!function(e){return"Error"===e}(e))throw new Error("Exhausted "+e);n="Error"}return void 0===t?{type:n,op:e,op1:void 0}:{type:n,op:e,op1:t}}var i}class rs{constructor(){this.labelsStack=new H,this.encoder=new mi([]),this.errors=[]}error(e){this.encoder.encode(30,0),this.errors.push(e)}commit(e,t){this.encoder.encode(5,1024);let n=function(e,t,n){let r=e.malloc();for(let t=0;t<n.length;t++){let r=n[t];"function"==typeof r?e.pushPlaceholder(r):"object"==typeof r?e.pushStdlib(r):e.push(r)}return e.finishMalloc(r,t),r}(e,t,this.encoder.buffer);return this.errors.length?{errors:this.errors,handle:n}:n}push(e,t,...n){if((r=t)>=0&&r<=15){let r=n.map((t,n)=>this.operand(e,t,n));return this.encoder.encode(t,1024,...r)}{let r=n.map((t,n)=>this.operand(e,t,n));return this.encoder.encode(t,0,...r)}var r}operand(e,t,n){return t&&"object"==typeof t&&"label"===t.type?(this.currentLabels.target(this.encoder.size+n,t.value),-1):function(e,t){if("number"==typeof t||"function"==typeof t)return t;if("boolean"==typeof t)return!0===t?1:0;if("string"==typeof t)return e.string(t);if(null===t)return 0;switch(t.type){case"array":return e.array(t.value);case"string-array":return e.stringArray(t.value);case"serializable":return e.serializable(t.value);case"template-meta":return e.templateMeta(t.value);case"other":return e.other(t.value);case"stdlib":return t;case"primitive":switch(t.value.type){case 1:return ge(e.string(t.value.primitive),1073741823,-1);case 2:return ge(e.number(t.value.primitive),1073741823,-1073741825);case 0:return de(t.value.primitive);default:return F(t.value)}case"lookup":throw $("lookup not reachable");default:return F(t)}}(e,t)}get currentLabels(){return this.labelsStack.current}label(e){this.currentLabels.label(e,this.encoder.size)}startLabels(){this.labelsStack.push(new es)}stopLabels(){this.labelsStack.pop().patch(this.encoder)}}function is(e){if(!e)return{count:0,actions:Mi};let t=[];for(let n=0;n<e.length;n++)t.push(ns("Expr",e[n]));return{count:e.length,actions:t}}function ss(e){return{asPartial:e.asPartial||!1,evalSymbols:as(e),upvars:e.block.upvars,referrer:e.referrer,size:e.block.symbols.length}}function as(e){let{block:t}=e;return t.hasEval?t.symbols:null}function ls(e,t,n,r){let i=fi(t,e);if(null!==i){let{compilable:e,handle:t,capabilities:s}=i;if(e){if(n)for(let e=0;e<n.length;e+=2)n[e][0]="@"+n[e][0];let i=[ns(80,t)];return i.push(os({capabilities:s,layout:e,attrs:null,params:null,hash:n,blocks:new Yi({default:r})})),i}}return Ni}function os({capabilities:e,layout:t,attrs:n,params:r,hash:i,blocks:s}){let{symbolTable:a}=t;if(a.hasEval||e.prepareArgs)return cs({capabilities:e,attrs:n,params:r,hash:i,atNames:!0,blocks:s,layout:t});let l=[ns(36,4),ns(33,3,1),ns(35,4)],{symbols:o}=a;e.createArgs&&l.push(ns(0),ns("SimpleArgs",{params:r,hash:i,atNames:!0})),l.push(ns(100)),e.dynamicScope&&l.push(ns(59)),e.createInstance&&l.push(ns(89,0|s.has("default"),4)),e.createArgs&&l.push(ns(1)),l.push(ns(0),ns(90,4));let u=[];l.push(ns(92,4)),u.push({symbol:0,isBlock:!1});for(let e=0;e<o.length;e++){let t=o[e];switch(t.charAt(0)){case"&":let r;r="&attrs"===t?n:s.get(t.slice(1)),r?(l.push(wi(r)),u.push({symbol:e+1,isBlock:!0})):(l.push(wi(null)),u.push({symbol:e+1,isBlock:!0}));break;case"@":if(!i)break;let[a,o]=i,c=t,h=a.indexOf(c);-1!==h&&(l.push(ns("Expr",o[h])),u.push({symbol:e+1,isBlock:!1}))}}l.push(ns(37,o.length+1,Object.keys(s).length>0?1:0));for(let e=u.length-1;e>=0;e--){let{symbol:t,isBlock:n}=u[e];n?l.push(ns("SetBlock",t)):l.push(ns(19,t))}return l.push(ns("InvokeStatic",t)),e.createInstance&&l.push(ns(103,4)),l.push(ns(1),ns(40)),e.dynamicScope&&l.push(ns(60)),l.push(ns(101),ns(35,4)),l}function us(e,{definition:t,attrs:n,params:r,hash:i,atNames:s,blocks:a}){return Ci({args:()=>({count:2,actions:[ns("Expr",t),ns(33,3,0)]}),body:()=>[ns(66,ci("ELSE")),ns(83,oi(e.referrer)),ns(81),cs({capabilities:!0,attrs:n,params:r,hash:i,atNames:s,blocks:a}),ns("Label","ELSE")]})}function cs({capabilities:e,attrs:t,params:n,hash:r,atNames:i,blocks:s,layout:a}){let l=!!s,o=!0===e||e.prepareArgs||!(!r||0===r[0].length),u=s.with("attrs",t);return[ns(36,4),ns(33,3,1),ns(35,4),ns(0),ns("Args",{params:n,hash:r,blocks:u,atNames:i}),ns(87,4),hs(u.has("default"),l,o,()=>{let e;return e=a?[Ei(a.symbolTable),ns("PushCompilable",a),ns("JitCompileBlock")]:[ns("GetComponentLayout",4)],e.push(ns(98,4)),e}),ns(35,4)]}function hs(e,t,n,r=null){let i=[ns(100),ns(59),ns(89,0|e,4)];return r&&i.push(r()),i.push(ns(90,4),ns(92,4),ns(38,4),ns(19,0),ns(97,4),n?ns(17,4):Mi,t?ns(18,4):Mi,ns(34,1),ns(99,4),ns(103,4),ns(1),ns(40),ns(60),ns(101)),i}function ps(e){return Zi(e.block.statements,ss(e))}class ds{constructor(e,t,n){this.main=e,this.trustingGuardedAppend=t,this.cautiousGuardedAppend=n}get"trusting-append"(){return this.trustingGuardedAppend}get"cautious-append"(){return this.cautiousGuardedAppend}getAppend(e){return e?this.trustingGuardedAppend:this.cautiousGuardedAppend}}function fs(){return[ns(76,4),hs(!1,!1,!0)]}function ms(e){return[ns(78),Ai(t=>{t(1,()=>e?[ns(68),ns(43)]:ns(47)),t(0,()=>[ns(82),ns(81),[ns(36,4),ns(33,3,1),ns(35,4),ns(0),ns(85),ns(87,4),hs(!1,!1,!0,()=>[ns("GetComponentLayout",4),ns(98,4)]),ns(35,4)]]),t(3,()=>[ns(68),ns(44)]),t(4,()=>[ns(68),ns(45)]),t(5,()=>[ns(68),ns(46)])})]}function gs(e){let t=vs(e,fs),n=vs(e,()=>ms(!0)),r=vs(e,()=>ms(!1));return new ds(t,n,r)}const bs={asPartial:!1,evalSymbols:null,upvars:null,referrer:{},size:0};function vs(e,t){let n=new rs,r=new Hi;ji({encoder:n,meta:bs,syntax:{macros:r,program:e}},t());let i=n.commit(e.heap,0);if("number"!=typeof i)throw new Error("Unexpected errors compiling std");return i}class ys{constructor(e){this.constants=new yn,this.heap=new En,this.mode="jit",this.resolverDelegate=e,this.stdlib=gs(this)}}class ks{constructor(e){this.layout=e,this.compiled=null;let{block:t}=e,n=t.symbols.slice(),r=n.indexOf("&attrs");this.attrsBlockNumber=-1===r?n.push("&attrs"):r+1,this.symbolTable={hasEval:t.hasEval,symbols:n}}compile(e){if(null!==this.compiled)return this.compiled;let t=ss(this.layout),n=Vi(e,t);var r,i,s,a;Ii(n,(r=this.layout,i=this.attrsBlockNumber,[ns("StartLabels"),(s=5,a=()=>[ns(93,4),ns(31),ns(33,3,0)],[ns(36,s),a(),ns(35,s)]),ns(66,ci("BODY")),ns(36,5),ns(91),ns(49),ns(102,4),ki(i,N),ns(54),ns("Label","BODY"),xi(ps(r)),ns(36,5),ns(66,ci("END")),ns(55),ns("Label","END"),ns(35,5),ns("StopLabels")]));let l=n.encoder.commit(n.syntax.program.heap,t.size);return"number"!=typeof l||(this.compiled=l,Tn(n.syntax.program)),l}}let ws=0;function xs({id:e,meta:t,block:n}){let r,i=e||"client-"+ws++;return{id:i,meta:t,create:e=>{let s=e?pe({},e,t):t;return r||(r=JSON.parse(n)),new Ss({id:i,block:r,referrer:s})}}}class Ss{constructor(e){this.parsedLayout=e,this.result="ok",this.layout=null,this.partial=null,this.wrappedLayout=null;let{block:t}=e;this.symbols=t.symbols,this.hasEval=t.hasEval,this.referrer=e.referrer,this.id=e.id||"client-"+ws++}asLayout(){return this.layout?this.layout:this.layout=Gi(pe({},this.parsedLayout,{asPartial:!1}))}asPartial(){return this.partial?this.partial:this.layout=Gi(pe({},this.parsedLayout,{asPartial:!0}))}asWrappedLayout(){return this.wrappedLayout?this.wrappedLayout:this.wrappedLayout=new ks(pe({},this.parsedLayout,{asPartial:!1}))}}function Es(e){return Array.isArray(e)?0!==e.length:Boolean(e)}class As{constructor(){this.toBool=Es}toIterator(e){return function(e){return"object"==typeof e&&null!==e&&Symbol.iterator in e}(e)?class{constructor(e,t){this.iterable=e,this.result=t,this.position=0}static from(e){const t=e[Symbol.iterator](),n=t.next(),{done:r}=n;return!0===r?null:new this(t,n)}isEmpty(){return!1}next(){const{iterable:e,result:t,position:n}=this;if(t.done)return null;const r=t.value,i=n;return this.position++,this.result=e.next(),{value:r,memo:i}}}.from(e):null}}class Cs extends As{constructor(){super(...arguments),this.isInteractive=!0,this.uselessAnchor=self.document.createElement("a"),this.protocolForURL=e=>(this.uselessAnchor.href=e,this.uselessAnchor.protocol)}}const zs=new WeakMap,_s=Object.getPrototypeOf;function Ts(e,t){return zs.set(t,e),t}const Os=new WeakMap,Rs=`__OWNER_${Math.floor(Math.random()*Date.now())}__`;let Ls={};const Ps=new WeakMap,Ms=new WeakMap,Ns=Object.getPrototypeOf;function Bs(e,t){return Ps.set(t,e),t}function Ds(e){let t=e;for(;null!=t;){const e=Ps.get(t);if(void 0!==e)return e;t=Ns(t)}}function js(e,t){let n=Ms.get(e);void 0===n&&(n=new WeakMap,Ms.set(e,n));let r=n.get(t);return void 0===r&&(r=t(e),n.set(t,r)),r}function Us(e,t){const n=Ds(t);if(void 0!==n&&"component"===n.type)return js(e,n.factory)}function Is(e){if("symbol"==typeof e)return null;const t=Number(e);return isNaN(t)?null:t%1==0?t:null}function Hs(e,t){const{named:n,positional:r}=e,i={get(e,t){if(n.has(t)){const e=n.get(t);return R(e.tag),e.value()}},has:(e,t)=>n.has(t),ownKeys:e=>n.names,isExtensible:()=>!1,getOwnPropertyDescriptor:(e,t)=>({enumerable:!0,configurable:!0})},s={get(e,t){if("length"===t)return R(r.tag),r.length;const n=Is(t);if(null!==n&&n<r.length){const e=r.at(n);return R(e.tag),e.value()}return e[t]},isExtensible:()=>!1,has(e,t){const n=Is(t);return null!==n&&n<r.length}},a=Object.create(null);return{named:new Proxy(a,i),positional:new Proxy([],s)}}const $s={createInstance:!0,dynamicLayout:!1,dynamicTag:!1,wrapped:!1,prepareArgs:!1,createArgs:!0,attributeHook:!1,elementHook:!1,updateHook:!1,createCaller:!1,dynamicScope:!0,willDestroy:!1};function Fs(e){return e.capabilities.asyncLifecycleCallbacks}function Vs(e){return e.capabilities.updateHook}function qs(e){return e.capabilities.destructor}class Ws{constructor(e,t,n,r,i){this.env=e,this.delegate=t,this.component=n,this.args=r,this.argsProxy=i}destroy(){const{delegate:e,component:t}=this;qs(e)&&e.destroyComponent(t)}}const Js=new class{create(e,t,n,r){const{ComponentDefinition:i}=t,s=n.capture(),a=Us(r.get(Rs).value(),i),l=Hs(s),o=a.createComponent(i,l);return new Ws(e,a,o,s,l)}update({delegate:e,component:t,argsProxy:n}){Vs(e)&&e.updateComponent(t,n)}didCreate({delegate:e,component:t}){Fs(e)&&e.didCreateComponent(t)}didUpdate({delegate:e,component:t}){(function(e){return Fs(e)&&Vs(e)})(e)&&e.didUpdateComponent(t)}getContext({delegate:e,component:t}){e.getContext(t)}getSelf({env:e,delegate:t,component:n}){return new lt(t.getContext(n),e)}getDestructor(e){return qs(e.delegate)?e:null}getCapabilities({capabilities:e}){return Object.assign({},$s,{updateHook:e.updateHook})}getTag({args:e}){return b(e)?f():e.tag}didRenderLayout(){}didUpdateLayout(){}getJitStaticLayout({definition:e}){return e.template.asLayout()}};class Gs{constructor(e,t,n){this.manager=Js,this.handle=e,this.template=ye(n);const r=Us(Ls,t).capabilities;this.state={ComponentDefinition:t,capabilities:r,definition:this}}}function Zs(e){let t,n,r;return()=>(n&&u(n,r)||(n=O(()=>t=e()),r=o()),R(n),t)}function Ys(e){return(t,n)=>{const r=function(e,t){const n=Ds(t);if(void 0!==n&&"helper"===n.type)return js(e,n.factory)}(n.dynamicScope().get(Rs).value(),e),i=t.capture();let s;if(void 0!==r)s=function(e,t,n,r){let i;const s=Hs(n),a=e.capabilities.updateHook;(function(e){return e.capabilities.destructor})(e)&&r.associateDestroyable({destroy(){void 0!==i&&e.destroyHelper(i)}});const l=Zs(()=>e.getValue(i)),o=Zs(()=>{void 0===i?i=e.createHelper(t,s):a&&e.updateHelper(i,s)});return()=>(o(),l())}(r,e,i,n);else{0;const t=e;s=e=>t(...e.positional.value())}return new ot(s,i,n.env)}}const Ks={attributeHook:!1,createArgs:!1,createCaller:!1,createInstance:!0,dynamicLayout:!1,dynamicScope:!1,dynamicTag:!1,elementHook:!1,prepareArgs:!1,updateHook:!1,wrapped:!1,willDestroy:!1};const Xs=new Xe(null);class Qs{static create(){return new Qs}getCapabilities(){return Ks}getJitStaticLayout({definition:e}){return e.template.asLayout()}create(e,t){}getSelf(e){return Xs}getTag(){return g}didRenderLayout(){}didCreate(){}didUpdateLayout(){}didUpdate(){}getDestructor(){return null}}const ea=new Qs;class ta{constructor(e,t,n){this.manager=ea,this.handle=e,this.template=ye(n),this.state={name:t,definition:this}}}class na{}function ra(e,t={}){return B("3.13"===e,"Invalid component manager compatibility specified"),{disableAutoTracking:Boolean(t.disableAutoTracking)}}const ia=new class{constructor(){this.capabilities=ra("3.13")}createModifier(e,t){return{definition:e}}installModifier(e,t,n){e.destructor=e.definition(t,...n.positional),e.element=t}updateModifier(e,t){this.destroyModifier(e),this.installModifier(e,e.element,t)}destroyModifier(e){const{destructor:t}=e;void 0!==t&&t()}};class sa{constructor(e,t,n,r,i){this.element=e,this.delegate=t,this.modifier=n,this.argsProxy=r,this.capturedArgs=i,this.tag=m()}destroy(){const{delegate:e,modifier:t,argsProxy:n}=this;e.destroyModifier(t,n)}}const aa=new class{create(e,t,n,r){let i=function(e,t){const n=Ds(t);if(void 0!==n&&"modifier"===n.type)return js(e,n.factory)}(r.get(Rs).value(),t);void 0===i&&(i=ia);const s=n.capture(),a=Hs(s),l=i.createModifier(t,a);return new sa(e,i,l,a,s)}getTag({tag:e,capturedArgs:t}){return y([e,t.tag])}install(e){const{element:t,argsProxy:n,delegate:r,modifier:i,tag:s}=e;if(!0===r.capabilities.disableAutoTracking)L(()=>r.installModifier(i,t,n));else{const e=O(()=>r.installModifier(i,t,n));d(s,e)}}update(e){const{argsProxy:t,delegate:n,modifier:r,tag:i}=e;if(!0===n.capabilities.disableAutoTracking)L(()=>n.updateModifier(r,t));else{const e=O(()=>n.updateModifier(r,t));d(i,e)}}getDestructor(e){return e}};class la{constructor(e,t){this.handle=e,this.state=t,this.manager=aa}}let oa=0;const ua=new WeakMap,ca=new WeakMap,ha=new WeakMap;function pa(e){return ua.get(e)||function(e){const t=xs(function(e){let t=e;for(;null!=t;){const e=zs.get(t);if(void 0!==e)return e;t=_s(t)}}(e)).create();let n;n=e instanceof na?new ta(oa++,"template-only-component",t):new Gs(oa++,e,t);return ua.set(e,n),n}(e)}function da(e){return ca.get(e)||function(e){const t={helper:Ys(e),handle:oa++};return ca.set(e,t),t}(e)}function fa(e){return ha.get(e)||function(e){const t=new la(oa++,e);return ha.set(e,t),t}(e)}const ma={if:(ga=function(e,t){return new ot(({positional:e})=>{if(e.length>3)throw new Error('The inline form of the `if` helper expects two or three arguments, e.g. `{{if trialExpired "Expired" expiryDate}}`.');const t=e.at(0),n=e.at(1),r=e.at(2);return!0===Es(t.value())?n.value():void 0!==r?r.value():void 0},e.capture(),t.env,"if")},{helper:ga,handle:oa++})};var ga;let ba=[];var va=async function(e,t){const n=t instanceof HTMLElement?{element:t}:t,{element:r,args:i,owner:s}=n,a=function(e,t,n,r,i={},s=Ls){const a=function(e,t={},n,r={}){return{env:new Nn(e,t),program:new An(n.program.constants,n.program.heap),resolver:new $n(r)}}(n,r,xa,wa),l=(u=a.env,c={element:t,nextSibling:null},Ve.forInitialRender(u,c)),o=wa.registerRoot(e);var u,c;let h;s&&(h=new _r({[Rs]:new Xe(s)}));return function(e,t,n,r,i,s={},a=new _r){let l=ri.empty(e,{treeBuilder:t,handle:r,dynamicScope:a},n);const o=rr(l.runtime.resolver,i),{manager:u,state:c}=o;let h;if(!vr(Yn(u.getCapabilities(c))))throw new Error("Cannot invoke components with dynamic layouts as a root component.");{let e=u.getJitStaticLayout(c,l.runtime.resolver),t=ve(e.compile(n));if(Array.isArray(t)){let e=t[0];throw new Error(`Compile Error: ${e.problem} ${e.span.start}..${e.span.end} :: TODO (thread better)`)}h={handle:t,symbolTable:e.symbolTable}}return si(l,h,o,s)}(a,l,xa,0,o,function(e,t){const n=new lt(e,t);return Object.keys(e).reduce((e,t)=>(e[t]=n.get(t),e),{})}(i,a.env),h)}(e,r,{document:self.document},new Cs,i,s).sync();ya.push(a)};const ya=[];w=function(){ka||(ka=!0,setTimeout(()=>{ka=!1;try{!function(){for(const e of ya){const{env:t}=e;t.begin(),e.rerender(),t.commit()}}(),ba.forEach(([e])=>e())}catch(e){ba.forEach(([,t])=>t(e))}ba=[]},0))};let ka=!1;const wa=new class{constructor(){this.registry=[]}registerRoot(e){const t=pa(e),{handle:n}=t;return this.registry[n]=t,n}lookupComponent(e,t){return this.registry[e]}resolve(e){return this.registry[e]}compilable(e){throw new Error("Method not implemented.")}lookupPartial(e,t){throw new Error("Method not implemented.")}},xa=function(e={},t=new Hi){return{program:new ys(new di(e)),macros:t}}(new class{constructor(e){this.inner=e}lookupHelper(e,t){const n=t.scope(),{helper:r,handle:i}=ma[e]||da(n[e]);return this.inner.registry[i]=r,i}lookupModifier(e,t){const n=fa(t.scope()[e]),{handle:r}=n;return this.inner.registry[r]=n,r}lookupComponent(e,t){const n=t.scope()[e];const r=pa(n),{state:i,manager:s,template:a,handle:l}=r;return this.inner.registry[l]=r,{handle:l,capabilities:s.getCapabilities(i),compilable:ye(a).asLayout()}}resolve(e){return this.inner.resolve(e)}lookupPartial(e,t){throw new Error("Method not implemented.")}}(wa));const Sa=new WeakMap,Ea=new WeakMap;const Aa=function(e,t={}){B("3.4"===e||"3.13"===e,"Invalid component manager compatibility specified");const n="3.4"===e||Boolean(t.updateHook);return{asyncLifecycleCallbacks:Boolean(t.asyncLifecycleCallbacks),destructor:Boolean(t.destructor),updateHook:n}}("3.13",{destructor:!0});class Ca extends class{constructor(e){this.owner=e}createComponent(e,t){return new e(this.owner,t.named)}getContext(e){return e}}{constructor(){super(...arguments),this.capabilities=Aa}destroyComponent(e){!function(e){Sa.set(e,!0)}(e),e.willDestroy(),function(e){Ea.set(e,!0)}(e)}}class za extends class{constructor(e,t){this.args=t,Sa.set(this,!1),Ea.set(this,!1)}get isDestroying(){return Sa.get(this)||!1}get isDestroyed(){return Ea.get(this)||!1}willDestroy(){}}{constructor(e,t){super(e,t),function(e,t){Os.set(e,t)}(this,e)}}Bs({factory:e=>new Ca(e),type:"component"},za);const _a=(...e)=>{const[t,n,r]=e;if(r)return Ta(t,n,r);Object.defineProperty(t,n,Ta(t,n))};function Ta(e,t,n){const{getter:r,setter:i}=M(t,n&&n.initializer);return{enumerable:!0,configurable:!0,get(){return r(this)},set(e){i(this,e)}}}function Oa(e){return()=>({enumerable:!0,configurable:!1,get(){return(t=this,Os.get(t)).lookup({type:"service",name:e});var t}})}function Ra(e,t){return"string"==typeof e?Oa(e):Oa(t)(e,t)}class La{constructor(e){this.owner=e,this.capabilities=function(e,t={}){return B("glimmerjs-2.0.0"===e,"Invalid helper manager compatibility specified"),{destructor:Boolean(t.destructor),updateHook:Boolean(t.updateHook)}}("glimmerjs-2.0.0")}getValue({fn:e,args:t,ownerProxy:n}){return e(t.positional,t.named,{services:n})}createHelper(e,t){const{owner:n}=this;return{fn:e,args:t,ownerProxy:new Proxy({},{get:(e,t)=>n.lookup({type:"service",name:t})})}}}const Pa=e=>new La(e);function Ma(e){return function(e,t){Bs({factory:e,type:"helper"},t)}(Pa,e),e}function Na(e,...t){return e.bind(null,...t)}var Ba=n(0);function Da(e,t="Oops!"){if(!e)throw new Error(t)}function ja(e){return Ma((t,n)=>e(n,...t))}ja(({},e)=>{throw new Error("Internal error: unreachable code... reached!")}),ja(({},...e)=>console.log(...e));const Ua=ja(({},e)=>!e),Ia=ja(({},e,t)=>e===t),Ha=ja((e,t)=>{var n;return t.join(null!==(n=e.separator)&&void 0!==n?n:" ")}),$a=ja((e,...t)=>e.callback()),Fa=ja(({},e)=>Ba.parse(e)),Va=ja(({},e,t)=>Array.from(Array(t-e),(t,n)=>e+n)),qa=ja(({},e)=>t=>{t.preventDefault(),Da(t.target instanceof HTMLFormElement);let n={};for(let[e,r]of new FormData(t.target).entries())"string"==typeof r&&(n[e]=r||null);e(n,t.target)}),Wa=ja(({},e)=>new Date(e).toLocaleDateString(void 0,{day:"numeric",month:"long",year:"numeric"})),Ja=ja(({},e,t,n)=>e[t]===n);var Ga,Za,Ya,Ka;function Xa(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function Qa(e,t,n,r,i){var s={};return Object.keys(r).forEach((function(e){s[e]=r[e]})),s.enumerable=!!s.enumerable,s.configurable=!!s.configurable,("value"in s||s.initializer)&&(s.writable=!0),s=n.slice().reverse().reduce((function(n,r){return r(e,t,n)||n}),s),i&&void 0!==s.initializer&&(s.value=s.initializer?s.initializer.call(i):void 0,s.initializer=void 0),void 0===s.initializer&&(Object.defineProperty(e,t,s),s=null),s}let el=(Za=Qa((Ga=class extends za{constructor(...e){super(...e),Xa(this,"routing",Za,this)}get path(){return nl(this.args.route,this.args.params)}}).prototype,"routing",[Ra],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ga);Ts({id:"jS6yBnUB",block:'{"symbols":["@route","&attrs","&default"],"statements":[[1,1,0,0,"\\n    "],[9,"a",false],[14,"href",[32,["#/",[27,[24,0],["path"]]]],null],[14,"class",[31,51,2,[27,[26,1,"CallHead"],[]],[[31,55,2,[27,[26,0,"CallHead"],[]],[[27,[24,0],["routing","activeRoute"]],"name",[27,[24,1],[]]],null],"active"],null],null],[15,2],[10],[1,1,0,0,"\\n      "],[16,3,null],[1,1,0,0,"\\n    "],[11],[1,1,0,0,"\\n  "]],"hasEval":false,"upvars":["is","if"]}',meta:{scope:()=>({is:Ja})}},el);let tl=(Ka=Qa((Ya=class{constructor(){var e,t,n;Xa(this,"activeRoute",Ka,this),n=()=>{this.activeRoute=rl()},(t="locationChanged")in(e=this)?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,addEventListener("popstate",this.locationChanged)}transitionTo(e,t=[]){location.hash="#/"+nl(e,t)}destroy(){removeEventListener("popstate",this.locationChanged)}}).prototype,"activeRoute",[_a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return rl()}}),Ya);function nl(e,t=[]){let n="string"==typeof t?[t]:t;switch(e){case"home":return"";case"profile":return"@"+n[0];case"favorites":return`@${n[0]}/favorites`;default:return[e,...n].join("/")}}function rl(){const[e,...t]=location.hash.replace(/^#\/?/,"").split("/");if(e.startsWith("@"))return{name:"favorites"===t[0]?"favorites":"profile",user:e.slice(1)};switch(e){case"":return{name:"home"};case"login":case"register":case"settings":return{name:e};case"editor":case"article":return{name:e,slug:t[0]}}return console.warn("Unrecognized route",[e,...t].join("/")),{name:"home"}}var il,sl,al;const ll=Symbol();let ol=Ts({id:"4R+Q8jdA",block:'{"symbols":["&rejected","&resolved","&pending"],"statements":[[1,1,0,0,"\\n"],[5,[27,[26,1,"BlockHead"],[]],[[31,12,2,[27,[26,0,"CallHead"],[]],[[27,[24,0],["inner"]],"state","pending"],null]],null,[["default","else"],[{"statements":[[1,1,0,0,"      "],[16,3,[[27,[24,0],["inner","previous"]]]],[1,1,0,0,"\\n"]],"parameters":[]},{"statements":[[5,[27,[26,1,"BlockHead"],[]],[[31,111,2,[27,[26,0,"CallHead"],[]],[[27,[24,0],["inner"]],"state","resolved"],null]],null,[["default","else"],[{"statements":[[1,1,0,0,"      "],[16,2,[[27,[24,0],["inner","value"]]]],[1,1,0,0,"\\n"]],"parameters":[]},{"statements":[[1,1,0,0,"      "],[16,1,[[27,[24,0],["inner","error"]]]],[1,1,0,0,"\\n    "]],"parameters":[]}]]]],"parameters":[]}]]],[1,1,0,0,"  "]],"hasEval":false,"upvars":["is","if"]}',meta:{scope:()=>({is:Ja})}},(al=class extends za{constructor(...e){var t,n,r,i,s,a,l;super(...e),t=this,n="state",i=this,(r=sl)&&Object.defineProperty(t,n,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0}),l=null,(a="lastPromise")in(s=this)?Object.defineProperty(s,a,{value:l,enumerable:!0,configurable:!0,writable:!0}):s[a]=l}get inner(){return this.revalidateState(this.args.promise,"resolved"===this.state.state?this.state.value:null),this.state}async revalidateState(e,t){e!==this.lastPromise&&(this.lastPromise=e,e.then(t=>this.maybeUpdate(e,{state:"resolved",value:t}),t=>this.maybeUpdate(e,{state:"rejected",error:t})),!1!==this.args.expectSettledPromises&&await Promise.race([e,ll])!==ll||(this.state={state:"pending",previous:t}))}maybeUpdate(e,t){e===this.lastPromise&&(this.state=t)}},ul=(il=al).prototype,cl="state",hl=[_a],pl={configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{state:"pending",previous:null}}},fl={},Object.keys(pl).forEach((function(e){fl[e]=pl[e]})),fl.enumerable=!!fl.enumerable,fl.configurable=!!fl.configurable,("value"in fl||fl.initializer)&&(fl.writable=!0),fl=hl.slice().reverse().reduce((function(e,t){return t(ul,cl,e)||e}),fl),dl&&void 0!==fl.initializer&&(fl.value=fl.initializer?fl.initializer.call(dl):void 0,fl.initializer=void 0),void 0===fl.initializer&&(Object.defineProperty(ul,cl,fl),fl=null),sl=fl,il));var ul,cl,hl,pl,dl,fl;function ml(e,t,n,r){}class gl{constructor(){this.capabilities=ra("3.13")}createModifier(e,t){return{args:t,previousArgs:t}}installModifier(e,t){const{args:n}=e,[r,i]=n.positional,s=Object.assign({},n.named);t.addEventListener(r,i,s),e.element=t,e.previousArgs={positional:[r,i],named:s}}updateModifier(e){this.destroyModifier(e),this.installModifier(e,e.element)}destroyModifier({element:e,previousArgs:t}){const[n,r]=t.positional;e.removeEventListener(n,r,t.named)}}!function(e,t){Bs({factory:e,type:"modifier"},t)}(()=>new gl,ml);const bl=new WeakMap;function vl(e,t,n){const r=n.value;return{enumerable:n.enumerable,configurable:n.configurable,get(){let e=bl.get(this);void 0===e&&(e=new Map,bl.set(this,e));let t=e.get(r);return void 0===t&&(t=r.bind(this),e.set(r,t)),t}}}var yl;let kl=Ts({id:"e9SBL5hb",block:'{"symbols":["@disabled","@active","&attrs","&default"],"statements":[[1,1,0,0,"\\n    "],[9,"a",false],[23,"href","",null],[14,"class",[32,["nav-link ",[31,46,2,[27,[26,0,"CallHead"],[]],[[27,[24,2],[]],"active"],null]," ",[31,70,2,[27,[26,0,"CallHead"],[]],[[27,[24,1],[]],"disabled"],null]]],null],[15,3],[3,0,0,[27,[26,1,"ModifierHead"],[]],["click",[27,[24,0],["clicked"]]],null],[10],[1,1,0,0,"\\n      "],[16,4,null],[1,1,0,0,"\\n    "],[11],[1,1,0,0,"\\n  "]],"hasEval":false,"upvars":["if","on"]}',meta:{scope:()=>({on:ml})}},(function(e,t,n,r,i){var s={};Object.keys(r).forEach((function(e){s[e]=r[e]})),s.enumerable=!!s.enumerable,s.configurable=!!s.configurable,("value"in s||s.initializer)&&(s.writable=!0),s=n.slice().reverse().reduce((function(n,r){return r(e,t,n)||n}),s),i&&void 0!==s.initializer&&(s.value=s.initializer?s.initializer.call(i):void 0,s.initializer=void 0),void 0===s.initializer&&(Object.defineProperty(e,t,s),s=null)}((yl=class extends za{clicked(e){var t,n;(e.preventDefault(),this.args.disabled)||(null===(t=(n=this.args).onClick)||void 0===t||t.call(n))}}).prototype,"clicked",[vl],Object.getOwnPropertyDescriptor(yl.prototype,"clicked"),yl.prototype),yl));var wl,xl,Sl,El,Al;function Cl(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function zl(e,t,n,r,i){var s={};return Object.keys(r).forEach((function(e){s[e]=r[e]})),s.enumerable=!!s.enumerable,s.configurable=!!s.configurable,("value"in s||s.initializer)&&(s.writable=!0),s=n.slice().reverse().reduce((function(n,r){return r(e,t,n)||n}),s),i&&void 0!==s.initializer&&(s.value=s.initializer?s.initializer.call(i):void 0,s.initializer=void 0),void 0===s.initializer&&(Object.defineProperty(e,t,s),s=null),s}let _l=Ts({id:"I0ho1+me",block:'{"symbols":["@mini"],"statements":[[1,1,0,0,"\\n    "],[9,"button",false],[14,"class",[32,["\\n        btn btn-sm\\n        ",[31,56,2,[27,[26,0,"CallHead"],[]],[[27,[24,0],["favorited"]],"btn-primary","btn-outline-primary"],null],"\\n        ",[31,122,2,[27,[26,0,"CallHead"],[]],[[27,[24,0],["disabled"]],"disabled"],null],"\\n      "]],null],[3,0,0,[27,[26,1,"ModifierHead"],[]],["click",[27,[24,0],["toggleFavorite"]]],null],[10],[1,1,0,0,"\\n      "],[9,"i",true],[12,"class","ion-heart",null],[10],[11],[1,1,0,0,"\\n"],[5,[27,[26,0,"BlockHead"],[]],[[27,[24,1],[]]],null,[["default","else"],[{"statements":[[1,1,0,0,"        "],[1,0,0,0,[27,[24,0],["count"]]],[1,1,0,0,"\\n"]],"parameters":[]},{"statements":[[1,1,0,0,"        "],[1,0,0,0,[31,307,2,[27,[26,0,"CallHead"],[]],[[27,[24,0],["favorited"]],"Unfavorite","Favorite"],null]],[1,1,0,0," Article ("],[1,0,0,0,[27,[24,0],["count"]]],[1,1,0,0,")\\n"]],"parameters":[]}]]],[1,1,0,0,"    "],[11],[1,1,0,0,"\\n  "]],"hasEval":false,"upvars":["if","on"]}',meta:{scope:()=>({on:ml})}},(xl=zl((wl=class extends za{constructor(...e){super(...e),Cl(this,"api",xl,this),Cl(this,"processing",Sl,this),Cl(this,"favorited",El,this),Cl(this,"count",Al,this)}get disabled(){return this.processing||!this.api.isLoggedIn}async toggleFavorite(){if(this.disabled)return;let{slug:e}=this.args.article;this.processing=!0;try{let t=await this.api[this.favorited?"unfavoriteArticle":"favoriteArticle"](e);this.favorited=t.favorited,this.count=t.favoritesCount}finally{this.processing=!1}}}).prototype,"api",[Ra],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Sl=zl(wl.prototype,"processing",[_a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),El=zl(wl.prototype,"favorited",[_a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.args.article.favorited}}),Al=zl(wl.prototype,"count",[_a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.args.article.favoritesCount}}),zl(wl.prototype,"toggleFavorite",[vl],Object.getOwnPropertyDescriptor(wl.prototype,"toggleFavorite"),wl.prototype),wl));var Tl,Ol,Rl;function Ll(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function Pl(e,t,n,r,i){var s={};return Object.keys(r).forEach((function(e){s[e]=r[e]})),s.enumerable=!!s.enumerable,s.configurable=!!s.configurable,("value"in s||s.initializer)&&(s.writable=!0),s=n.slice().reverse().reduce((function(n,r){return r(e,t,n)||n}),s),i&&void 0!==s.initializer&&(s.value=s.initializer?s.initializer.call(i):void 0,s.initializer=void 0),void 0===s.initializer&&(Object.defineProperty(e,t,s),s=null),s}let Ml=Ts({id:"BD4uqhy/",block:'{"symbols":["response","previous","@loadArticles"],"statements":[[1,1,0,0,"\\n    "],[1,0,0,0,[31,7,8,[27,[26,1,"CallHead"],[]],[[27,[24,3],[]]],[["callback"],[[31,40,2,[27,[26,0,"CallHead"],[]],[[27,[24,0],["updatePage"]],1],null]]]]],[1,1,0,0,"\\n\\n    "],[7,"Await",[],[["@promise"],[[27,[24,0],["articles"]]]],[["pending","rejected","resolved"],[{"statements":[[1,1,0,0,"\\n"],[5,[27,[26,2,"BlockHead"],[]],[[27,[24,2],["total"]]],null,[["default","else"],[{"statements":[[1,1,0,0,"          "],[7,"Articles",[],[["@articles","@onPageChange"],[[27,[24,2],[]],[27,[24,0],["updatePage"]]]],null],[1,1,0,0,"\\n"]],"parameters":[]},{"statements":[[1,1,0,0,"          "],[9,"div",true],[12,"class","article-preview",null],[10],[1,1,0,0,"Loading articles..."],[11],[1,1,0,0,"\\n"]],"parameters":[]}]]],[1,1,0,0,"      "]],"parameters":[2]},{"statements":[[1,1,0,0,"\\n        "],[9,"div",true],[12,"class","article-preview",null],[10],[1,1,0,0,"Oops! Something went wrong."],[11],[1,1,0,0,"\\n      "]],"parameters":[]},{"statements":[[1,1,0,0,"\\n        "],[7,"Articles",[],[["@articles","@onPageChange"],[[27,[24,1],[]],[27,[24,0],["updatePage"]]]],null],[1,1,0,0,"\\n      "]],"parameters":[1]}]]],[1,1,0,0,"\\n  "]],"hasEval":false,"upvars":["fn","onChange","if"]}',meta:{scope:()=>({fn:Na,onChange:$a,Await:ol,Articles:Nl})}},(Ol=Pl((Tl=class extends za{constructor(...e){super(...e),Ll(this,"offset",Ol,this),Ll(this,"limit",Rl,this)}updatePage(e){this.offset=(e-1)*this.limit}get articles(){return this.args.loadArticles(this.offset,this.limit)}}).prototype,"offset",[_a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Rl=Pl(Tl.prototype,"limit",[_a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),Pl(Tl.prototype,"updatePage",[vl],Object.getOwnPropertyDescriptor(Tl.prototype,"updatePage"),Tl.prototype),Tl));class Nl extends za{}Ts({id:"OX22FuUG",block:'{"symbols":["article","tag","@articles","@onPageChange"],"statements":[[1,1,0,0,"\\n"],[5,[27,[26,2,"BlockHead"],[]],[[27,[24,3],["items","length"]]],null,[["default","else"],[{"statements":[[5,[27,[26,0,"BlockHead"],[]],[[27,[24,3],["items"]]],[["key"],["slug"]],[["default"],[{"statements":[[1,1,0,0,"        "],[9,"div",true],[12,"class","article-preview",null],[10],[1,1,0,0,"\\n          "],[9,"div",true],[12,"class","article-meta",null],[10],[1,1,0,0,"\\n            "],[7,"LinkTo",[],[["@route","@params"],["profile",[27,[24,1],["author","username"]]]],[["default"],[{"statements":[[1,1,0,0,"\\n              "],[9,"img",true],[13,"src",[27,[24,1],["author","image"]],null],[10],[11],[1,1,0,0,"\\n            "]],"parameters":[]}]]],[1,1,0,0,"\\n\\n            "],[9,"div",true],[12,"class","info",null],[10],[1,1,0,0,"\\n              "],[7,"LinkTo",[[23,"class","author",null]],[["@route","@params"],["profile",[27,[24,1],["author","username"]]]],[["default"],[{"statements":[[1,1,0,0,"\\n                "],[1,0,0,0,[27,[24,1],["author","username"]]],[1,1,0,0,"\\n              "]],"parameters":[]}]]],[1,1,0,0,"\\n              "],[9,"span",true],[12,"class","date",null],[10],[1,0,0,0,[31,538,12,[27,[26,1,"CallHead"],[]],[[27,[24,1],["createdAt"]]],null]],[11],[1,1,0,0,"\\n            "],[11],[1,1,0,0,"\\n\\n            "],[7,"FavoriteButton",[[23,"class","pull-xs-right",null]],[["@article","@mini"],[[27,[24,1],[]],true]],null],[1,1,0,0,"\\n          "],[11],[1,1,0,0,"\\n\\n          "],[7,"LinkTo",[[23,"class","preview-link",null]],[["@route","@params"],["article",[27,[24,1],["slug"]]]],[["default"],[{"statements":[[1,1,0,0,"\\n            "],[9,"h1",true],[10],[1,0,0,0,[27,[24,1],["title"]]],[11],[1,1,0,0,"\\n            "],[9,"p",true],[10],[1,0,0,0,[27,[24,1],["description"]]],[11],[1,1,0,0,"\\n            "],[9,"span",true],[10],[1,1,0,0,"Read more..."],[11],[1,1,0,0,"\\n\\n"],[5,[27,[26,2,"BlockHead"],[]],[[27,[24,1],["tagList","length"]]],null,[["default"],[{"statements":[[1,1,0,0,"              "],[9,"ul",true],[12,"class","tag-list",null],[10],[1,1,0,0,"\\n"],[5,[27,[26,0,"BlockHead"],[]],[[27,[24,1],["tagList"]]],null,[["default"],[{"statements":[[1,1,0,0,"                  "],[9,"li",true],[12,"class","tag-default tag-pill tag-outline",null],[10],[1,0,0,0,[27,[24,2],[]]],[11],[1,1,0,0,"\\n"]],"parameters":[2]}]]],[1,1,0,0,"              "],[11],[1,1,0,0,"\\n"]],"parameters":[]}]]],[1,1,0,0,"          "]],"parameters":[]}]]],[1,1,0,0,"\\n        "],[11],[1,1,0,0,"\\n"]],"parameters":[1]}]]],[1,1,0,0,"\\n      "],[7,"Pagination",[],[["@data","@onChangePage"],[[27,[24,3],[]],[27,[24,4],[]]]],null],[1,1,0,0,"\\n"]],"parameters":[]},{"statements":[[1,1,0,0,"      "],[9,"div",true],[12,"class","article-preview",null],[10],[1,1,0,0,"No articles are here... yet."],[11],[1,1,0,0,"\\n"]],"parameters":[]}]]],[1,1,0,0,"  "]],"hasEval":false,"upvars":["each","humanizeDate","if"]}',meta:{scope:()=>({LinkTo:el,humanizeDate:Wa,FavoriteButton:_l,Pagination:Bl})}},Nl);class Bl extends za{get lastPage(){let{limit:e,total:t}=this.args.data;return Math.floor(t/e)+1}get currentPage(){let{limit:e,offset:t}=this.args.data;return Math.floor(t/e)+1}}var Dl,jl,Ul,Il,Hl;function $l(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function Fl(e,t,n,r,i){var s={};return Object.keys(r).forEach((function(e){s[e]=r[e]})),s.enumerable=!!s.enumerable,s.configurable=!!s.configurable,("value"in s||s.initializer)&&(s.writable=!0),s=n.slice().reverse().reduce((function(n,r){return r(e,t,n)||n}),s),i&&void 0!==s.initializer&&(s.value=s.initializer?s.initializer.call(i):void 0,s.initializer=void 0),void 0===s.initializer&&(Object.defineProperty(e,t,s),s=null),s}Ts({id:"+OnlA0Qf",block:'{"symbols":["page","@onChangePage"],"statements":[[1,1,0,0,"\\n    "],[9,"nav",true],[10],[1,1,0,0,"\\n      "],[9,"ul",true],[12,"class","pagination",null],[10],[1,1,0,0,"\\n"],[5,[27,[26,4,"BlockHead"],[]],[[31,58,5,[27,[26,3,"CallHead"],[]],[1,[27,[24,0],["lastPage"]]],null]],null,[["default"],[{"statements":[[1,1,0,0,"          "],[9,"li",true],[13,"class",[32,["page-item ",[31,126,2,[27,[26,1,"CallHead"],[]],[[31,130,2,[27,[26,0,"CallHead"],[]],[[27,[24,1],[]],[27,[24,0],["currentPage"]]],null],"active"],null]]],null],[10],[1,1,0,0,"\\n            "],[7,"FakeLink",[[23,"class","page-link",null]],[["@onClick"],[[31,220,2,[27,[26,2,"CallHead"],[]],[[27,[24,2],[]],[27,[24,1],[]]],null]]],[["default"],[{"statements":[[1,0,0,0,[27,[24,1],[]]]],"parameters":[]}]]],[1,1,0,0,"\\n          "],[11],[1,1,0,0,"\\n"]],"parameters":[1]}]]],[1,1,0,0,"      "],[11],[1,1,0,0,"\\n    "],[11],[1,1,0,0,"\\n  "]],"hasEval":false,"upvars":["eq","if","fn","range","each"]}',meta:{scope:()=>({fn:Na,range:Va,eq:Ia,FakeLink:kl})}},Bl);let Vl=Ts({id:"jL08VIyL",block:'{"symbols":["tag","@currentUser"],"statements":[[1,1,0,0,"\\n    "],[9,"div",true],[12,"class","home-page",null],[10],[1,1,0,0,"\\n      "],[9,"div",true],[12,"class","banner",null],[10],[1,1,0,0,"\\n        "],[9,"div",true],[12,"class","container",null],[10],[1,1,0,0,"\\n          "],[9,"h1",true],[12,"class","logo-font",null],[10],[1,1,0,0,"conduit"],[11],[1,1,0,0,"\\n          "],[9,"p",true],[10],[1,1,0,0,"A place to share your knowledge."],[11],[1,1,0,0,"\\n        "],[11],[1,1,0,0,"\\n      "],[11],[1,1,0,0,"\\n\\n      "],[9,"div",true],[12,"class","container page",null],[10],[1,1,0,0,"\\n        "],[9,"div",true],[12,"class","row",null],[10],[1,1,0,0,"\\n          "],[9,"div",true],[12,"class","col-md-9",null],[10],[1,1,0,0,"\\n            "],[9,"div",true],[12,"class","feed-toggle",null],[10],[1,1,0,0,"\\n              "],[9,"ul",true],[12,"class","nav nav-pills outline-active",null],[10],[1,1,0,0,"\\n                "],[9,"li",true],[12,"class","nav-item",null],[10],[1,1,0,0,"\\n                  "],[7,"FakeLink",[],[["@disabled","@active","@onClick"],[[31,498,3,[27,[26,1,"CallHead"],[]],[[27,[24,2],[]]],null],[31,547,2,[27,[26,2,"CallHead"],[]],[[27,[24,0],["tabState","tab"]],"your-feed"],null],[31,613,2,[27,[26,3,"CallHead"],[]],[[27,[24,0],["showTab"]],"your-feed"],null]]],[["default"],[{"statements":[[1,1,0,0,"\\n                    Your Feed\\n                  "]],"parameters":[]}]]],[1,1,0,0,"\\n                "],[11],[1,1,0,0,"\\n                "],[9,"li",true],[12,"class","nav-item",null],[10],[1,1,0,0,"\\n                  "],[7,"FakeLink",[],[["@active","@onClick"],[[31,821,2,[27,[26,2,"CallHead"],[]],[[27,[24,0],["tabState","tab"]],"global-feed"],null],[31,869,2,[27,[26,3,"CallHead"],[]],[[27,[24,0],["showTab"]],"global-feed"],null]]],[["default"],[{"statements":[[1,1,0,0,"\\n                    Global Feed\\n                  "]],"parameters":[]}]]],[1,1,0,0,"\\n                "],[11],[1,1,0,0,"\\n"],[5,[27,[26,5,"BlockHead"],[]],[[31,1009,2,[27,[26,4,"CallHead"],[]],[[27,[24,0],["tabState"]],"tab","tag"],null]],null,[["default"],[{"statements":[[5,[27,[26,0,"BlockHead"],[]],[[27,[24,0],["tabState","tag"]]],null,[["default"],[{"statements":[[1,1,0,0,"                    "],[9,"li",true],[12,"class","nav-item",null],[10],[1,1,0,0,"\\n                      "],[7,"FakeLink",[],[["@active"],[true]],[["default"],[{"statements":[[1,1,0,0,"\\n                        #"],[1,0,0,0,[27,[24,1],[]]],[1,1,0,0,"\\n                      "]],"parameters":[]}]]],[1,1,0,0,"\\n                    "],[11],[1,1,0,0,"\\n"]],"parameters":[1]}]]]],"parameters":[]}]]],[1,1,0,0,"              "],[11],[1,1,0,0,"\\n            "],[11],[1,1,0,0,"\\n\\n            "],[7,"ArticleList",[],[["@loadArticles"],[[27,[24,0],["articleLoader"]]]],null],[1,1,0,0,"\\n          "],[11],[1,1,0,0,"\\n\\n          "],[9,"div",true],[12,"class","col-md-3",null],[10],[1,1,0,0,"\\n            "],[7,"TagsPanel",[],[["@showTagPosts"],[[27,[24,0],["showTab"]]]],null],[1,1,0,0,"\\n          "],[11],[1,1,0,0,"\\n        "],[11],[1,1,0,0,"\\n      "],[11],[1,1,0,0,"\\n    "],[11],[1,1,0,0,"\\n  "]],"hasEval":false,"upvars":["let","not","eq","fn","is","if"]}',meta:{scope:()=>({fn:Na,eq:Ia,not:Ua,is:Ja,ArticleList:Ml,FakeLink:kl,TagsPanel:ql})}},(Il=Fl((Ul=class extends za{constructor(...e){super(...e),$l(this,"api",Il,this),$l(this,"tabState",Hl,this)}showTab(e){this.tabState="your-feed"===e||"global-feed"===e?{tab:e}:{tab:"tag",tag:e}}get articleLoader(){if("your-feed"===this.tabState.tab)return(e,t)=>this.api.listFeedArticles({limit:t,offset:e});if("global-feed"===this.tabState.tab)return(e,t)=>this.api.listArticles({limit:t,offset:e});{let{tag:e}=this.tabState;return(t,n)=>this.api.listArticles({tag:e,limit:n,offset:t})}}}).prototype,"api",[Ra],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Hl=Fl(Ul.prototype,"tabState",[_a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{tab:this.api.isLoggedIn?"your-feed":"global-feed"}}}),Fl(Ul.prototype,"showTab",[vl],Object.getOwnPropertyDescriptor(Ul.prototype,"showTab"),Ul.prototype),Ul)),ql=(jl=Fl((Dl=class extends za{constructor(...e){var t,n,r;super(...e),$l(this,"api",jl,this),t=this,n="tags",r=this.api.getTags(),n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r}}).prototype,"api",[Ra],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Dl);Ts({id:"3Ue3oQcd",block:'{"symbols":["tags","tag","@showTagPosts"],"statements":[[1,1,0,0,"\\n    "],[9,"div",true],[12,"class","sidebar",null],[10],[1,1,0,0,"\\n      "],[9,"p",true],[10],[1,1,0,0,"Popular Tags"],[11],[1,1,0,0,"\\n\\n      "],[7,"Await",[],[["@promise"],[[27,[24,0],["tags"]]]],[["pending","rejected","resolved"],[{"statements":[[1,1,0,0,"\\n          Loading tags...\\n        "]],"parameters":[]},{"statements":[[1,1,0,0,"\\n          Uh oh! Something went wrong.\\n        "]],"parameters":[]},{"statements":[[1,1,0,0,"\\n"],[5,[27,[26,2,"BlockHead"],[]],[[27,[24,1],["length"]]],null,[["default","else"],[{"statements":[[1,1,0,0,"            "],[9,"div",true],[12,"class","tag-list",null],[10],[1,1,0,0,"\\n"],[5,[27,[26,1,"BlockHead"],[]],[[27,[24,1],[]]],null,[["default"],[{"statements":[[1,1,0,0,"                "],[7,"FakeLink",[[23,"class","tag-pill tag-default",null]],[["@onClick"],[[31,437,2,[27,[26,0,"CallHead"],[]],[[27,[24,3],[]],[27,[24,2],[]]],null]]],[["default"],[{"statements":[[1,1,0,0,"\\n                  "],[1,0,0,0,[27,[24,2],[]]],[1,1,0,0,"\\n                "]],"parameters":[]}]]],[1,1,0,0,"\\n"]],"parameters":[2]}]]],[1,1,0,0,"            "],[11],[1,1,0,0,"\\n"]],"parameters":[]},{"statements":[[1,1,0,0,"            "],[9,"div",true],[12,"class","post-preview",null],[10],[1,1,0,0,"No tags are here... yet."],[11],[1,1,0,0,"\\n"]],"parameters":[]}]]],[1,1,0,0,"        "]],"parameters":[1]}]]],[1,1,0,0,"\\n    "],[11],[1,1,0,0,"\\n  "]],"hasEval":false,"upvars":["fn","each","if"]}',meta:{scope:()=>({fn:Na,Await:ol,FakeLink:kl})}},ql);class Wl extends za{get errors(){let e=this.args.error;return Object.keys(null!=e?e:{}).map(t=>{let n=e[t];return Da(Array.isArray(n)),`${t} ${n.join(", ")}`})}}var Jl,Gl,Zl,Yl;function Kl(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function Xl(e,t,n,r,i){var s={};return Object.keys(r).forEach((function(e){s[e]=r[e]})),s.enumerable=!!s.enumerable,s.configurable=!!s.configurable,("value"in s||s.initializer)&&(s.writable=!0),s=n.slice().reverse().reduce((function(n,r){return r(e,t,n)||n}),s),i&&void 0!==s.initializer&&(s.value=s.initializer?s.initializer.call(i):void 0,s.initializer=void 0),void 0===s.initializer&&(Object.defineProperty(e,t,s),s=null),s}Ts({id:"eW5qwDn1",block:'{"symbols":["error"],"statements":[[1,1,0,0,"\\n"],[5,[27,[26,1,"BlockHead"],[]],[[27,[24,0],["errors","length"]]],null,[["default"],[{"statements":[[1,1,0,0,"      "],[9,"ul",true],[12,"class","error-messages",null],[10],[1,1,0,0,"\\n"],[5,[27,[26,0,"BlockHead"],[]],[[27,[24,0],["errors"]]],null,[["default"],[{"statements":[[1,1,0,0,"          "],[9,"li",true],[10],[1,0,0,0,[27,[24,1],[]]],[11],[1,1,0,0,"\\n"]],"parameters":[1]}]]],[1,1,0,0,"      "],[11],[1,1,0,0,"\\n"]],"parameters":[]}]]],[1,1,0,0,"  "]],"hasEval":false,"upvars":["each","if"]}',meta:{scope:()=>({})}},Wl);let Ql=Ts({id:"ol5zHfJw",block:'{"symbols":["@register"],"statements":[[1,1,0,0,"\\n    "],[9,"div",true],[12,"class","auth-page",null],[10],[1,1,0,0,"\\n      "],[9,"div",true],[12,"class","container page",null],[10],[1,1,0,0,"\\n        "],[9,"div",true],[12,"class","row",null],[10],[1,1,0,0,"\\n          "],[9,"div",true],[12,"class","col-md-6 offset-md-3 col-xs-12",null],[10],[1,1,0,0,"\\n            "],[9,"h1",true],[12,"class","text-xs-center",null],[10],[1,1,0,0,"Sign "],[1,0,0,0,[31,191,2,[27,[26,0,"CallHead"],[]],[[27,[24,1],[]],"Up","In"],null]],[11],[1,1,0,0,"\\n            "],[9,"p",true],[12,"class","text-xs-center",null],[10],[1,1,0,0,"\\n"],[5,[27,[26,0,"BlockHead"],[]],[[27,[24,1],[]]],null,[["default","else"],[{"statements":[[1,1,0,0,"                "],[7,"LinkTo",[],[["@route"],["login"]],[["default"],[{"statements":[[1,1,0,0,"Have an account?"]],"parameters":[]}]]],[1,1,0,0,"\\n"]],"parameters":[]},{"statements":[[1,1,0,0,"                "],[7,"LinkTo",[],[["@route"],["register"]],[["default"],[{"statements":[[1,1,0,0,"Need an account?"]],"parameters":[]}]]],[1,1,0,0,"\\n"]],"parameters":[]}]]],[1,1,0,0,"            "],[11],[1,1,0,0,"\\n\\n            "],[7,"ErrorMessages",[],[["@error"],[[27,[24,0],["error"]]]],null],[1,1,0,0,"\\n\\n            "],[9,"form",false],[3,0,0,[27,[26,2,"ModifierHead"],[]],["submit",[31,574,14,[27,[26,1,"CallHead"],[]],[[27,[24,0],["submit"]]],null]],null],[10],[1,1,0,0,"\\n"],[5,[27,[26,0,"BlockHead"],[]],[[27,[24,1],[]]],null,[["default"],[{"statements":[[1,1,0,0,"                "],[9,"fieldset",true],[12,"class","form-group",null],[10],[1,1,0,0,"\\n                  "],[9,"input",true],[12,"class","form-control form-control-lg",null],[12,"placeholder","Username",null],[12,"name","username",null],[12,"type","text",null],[10],[11],[1,1,0,0,"\\n                "],[11],[1,1,0,0,"\\n"]],"parameters":[]}]]],[1,1,0,0,"\\n              "],[9,"fieldset",true],[12,"class","form-group",null],[10],[1,1,0,0,"\\n                "],[9,"input",true],[12,"class","form-control form-control-lg",null],[12,"placeholder","Email",null],[12,"name","email",null],[12,"type","text",null],[10],[11],[1,1,0,0,"\\n              "],[11],[1,1,0,0,"\\n\\n              "],[9,"fieldset",true],[12,"class","form-group",null],[10],[1,1,0,0,"\\n                "],[9,"input",true],[12,"class","form-control form-control-lg",null],[12,"placeholder","Password",null],[12,"name","password",null],[12,"type","password",null],[10],[11],[1,1,0,0,"\\n              "],[11],[1,1,0,0,"\\n\\n              "],[9,"button",true],[12,"class","btn btn-lg btn-primary pull-xs-right",null],[10],[1,1,0,0,"\\n                Sign "],[1,0,0,0,[31,1303,2,[27,[26,0,"CallHead"],[]],[[27,[24,1],[]],"up","in"],null]],[1,1,0,0,"\\n              "],[11],[1,1,0,0,"\\n            "],[11],[1,1,0,0,"\\n          "],[11],[1,1,0,0,"\\n        "],[11],[1,1,0,0,"\\n      "],[11],[1,1,0,0,"\\n    "],[11],[1,1,0,0,"\\n  "]],"hasEval":false,"upvars":["if","gatherFormData","on"]}',meta:{scope:()=>({on:ml,LinkTo:el,gatherFormData:qa,ErrorMessages:Wl})}},(Gl=Xl((Jl=class extends za{constructor(...e){super(...e),Kl(this,"api",Gl,this),Kl(this,"routing",Zl,this),Kl(this,"error",Yl,this)}async submit(e){try{this.args.register?await this.api.createUser(e):await this.api.logIn(e),this.routing.transitionTo("home")}catch(e){this.error=e}}}).prototype,"api",[Ra],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Zl=Xl(Jl.prototype,"routing",[Ra],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Yl=Xl(Jl.prototype,"error",[_a],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Xl(Jl.prototype,"submit",[vl],Object.getOwnPropertyDescriptor(Jl.prototype,"submit"),Jl.prototype),Jl));var eo,to;let no=Ts({id:"S8G1EZIV",block:'{"symbols":["&default"],"statements":[[1,1,0,0,"\\n"],[5,[27,[26,0,"BlockHead"],[]],[[27,[24,0],["api","isLoggedIn"]]],null,[["default","else"],[{"statements":[[1,1,0,0,"      "],[16,1,null],[1,1,0,0,"\\n"]],"parameters":[]},{"statements":[[1,1,0,0,"      You need to be logged in to see this page.\\n"]],"parameters":[]}]]],[1,1,0,0,"  "]],"hasEval":false,"upvars":["if"]}',meta:{scope:()=>({})}},(to=function(e,t,n,r,i){var s={};return Object.keys(r).forEach((function(e){s[e]=r[e]})),s.enumerable=!!s.enumerable,s.configurable=!!s.configurable,("value"in s||s.initializer)&&(s.writable=!0),s=n.slice().reverse().reduce((function(n,r){return r(e,t,n)||n}),s),i&&void 0!==s.initializer&&(s.value=s.initializer?s.initializer.call(i):void 0,s.initializer=void 0),void 0===s.initializer&&(Object.defineProperty(e,t,s),s=null),s}((eo=class extends za{constructor(...e){super(...e),function(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}(this,"api",to,this)}}).prototype,"api",[Ra],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),eo));var ro,io,so,ao;function lo(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function oo(e,t,n,r,i){var s={};return Object.keys(r).forEach((function(e){s[e]=r[e]})),s.enumerable=!!s.enumerable,s.configurable=!!s.configurable,("value"in s||s.initializer)&&(s.writable=!0),s=n.slice().reverse().reduce((function(n,r){return r(e,t,n)||n}),s),i&&void 0!==s.initializer&&(s.value=s.initializer?s.initializer.call(i):void 0,s.initializer=void 0),void 0===s.initializer&&(Object.defineProperty(e,t,s),s=null),s}let uo=Ts({id:"zecTEsXE",block:'{"symbols":["@currentUser"],"statements":[[1,1,0,0,"\\n    "],[9,"div",true],[12,"class","settings-page",null],[10],[1,1,0,0,"\\n      "],[9,"div",true],[12,"class","container page",null],[10],[1,1,0,0,"\\n        "],[9,"div",true],[12,"class","row",null],[10],[1,1,0,0,"\\n          "],[9,"div",true],[12,"class","col-md-6 offset-md-3 col-xs-12",null],[10],[1,1,0,0,"\\n            "],[7,"RequireUser",[],[[],[]],[["default"],[{"statements":[[1,1,0,0,"\\n              "],[9,"h1",true],[12,"class","text-xs-center",null],[10],[1,1,0,0,"Your Settings"],[11],[1,1,0,0,"\\n\\n              "],[7,"ErrorMessages",[],[["@error"],[[27,[24,0],["error"]]]],null],[1,1,0,0,"\\n\\n              "],[9,"form",false],[3,0,0,[27,[26,1,"ModifierHead"],[]],["submit",[31,326,14,[27,[26,0,"CallHead"],[]],[[27,[24,0],["updateSettings"]]],null]],null],[10],[1,1,0,0,"\\n                "],[9,"fieldset",true],[10],[1,1,0,0,"\\n                    "],[9,"fieldset",true],[12,"class","form-group",null],[10],[1,1,0,0,"\\n                      "],[9,"input",true],[12,"class","form-control form-control-lg",null],[12,"placeholder","URL of profile picture",null],[13,"value",[27,[24,1],["image"]],null],[12,"name","image",null],[12,"type","text",null],[10],[11],[1,1,0,0,"\\n                    "],[11],[1,1,0,0,"\\n                    "],[9,"fieldset",true],[12,"class","form-group",null],[10],[1,1,0,0,"\\n                      "],[9,"input",true],[12,"class","form-control form-control-lg",null],[12,"placeholder","Your Name",null],[13,"value",[27,[24,1],["username"]],null],[12,"name","username",null],[12,"type","text",null],[10],[11],[1,1,0,0,"\\n                    "],[11],[1,1,0,0,"\\n                    "],[9,"fieldset",true],[12,"class","form-group",null],[10],[1,1,0,0,"\\n                      "],[9,"textarea",true],[12,"class","form-control form-control-lg",null],[12,"rows","8",null],[12,"placeholder","Short bio about you",null],[12,"name","bio",null],[10],[1,0,0,0,[27,[24,1],["bio"]]],[11],[1,1,0,0,"\\n                    "],[11],[1,1,0,0,"\\n                    "],[9,"fieldset",true],[12,"class","form-group",null],[10],[1,1,0,0,"\\n                      "],[9,"input",true],[12,"class","form-control form-control-lg",null],[12,"placeholder","Email",null],[13,"value",[27,[24,1],["email"]],null],[12,"name","email",null],[12,"type","text",null],[10],[11],[1,1,0,0,"\\n                    "],[11],[1,1,0,0,"\\n                    "],[9,"fieldset",true],[12,"class","form-group",null],[10],[1,1,0,0,"\\n                      "],[9,"input",true],[12,"class","form-control form-control-lg",null],[12,"placeholder","Password",null],[12,"name","password",null],[12,"type","password",null],[10],[11],[1,1,0,0,"\\n                    "],[11],[1,1,0,0,"\\n                    "],[9,"button",true],[12,"class","btn btn-lg btn-primary pull-xs-right",null],[10],[1,1,0,0,"\\n                      Update Settings\\n                    "],[11],[1,1,0,0,"\\n                "],[11],[1,1,0,0,"\\n              "],[11],[1,1,0,0,"\\n\\n              "],[9,"hr",true],[10],[11],[1,1,0,0,"\\n\\n              "],[9,"button",false],[23,"class","btn btn-outline-danger",null],[3,0,0,[27,[26,1,"ModifierHead"],[]],["click",[27,[24,0],["logOut"]]],null],[10],[1,1,0,0,"\\n                Or click here to log out.\\n              "],[11],[1,1,0,0,"\\n            "]],"parameters":[]}]]],[1,1,0,0,"\\n          "],[11],[1,1,0,0,"\\n        "],[11],[1,1,0,0,"\\n      "],[11],[1,1,0,0,"\\n    "],[11],[1,1,0,0,"\\n  "]],"hasEval":false,"upvars":["gatherFormData","on"]}',meta:{scope:()=>({on:ml,RequireUser:no,gatherFormData:qa,ErrorMessages:Wl})}},(io=oo((ro=class extends za{constructor(...e){super(...e),lo(this,"api",io,this),lo(this,"routing",so,this),lo(this,"error",ao,this)}async updateSettings(e){try{await this.api.updateUser(e),this.error=null}catch(e){this.error=e}}async logOut(){await this.api.logOut(),this.routing.transitionTo("home")}}).prototype,"api",[Ra],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),so=oo(ro.prototype,"routing",[Ra],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ao=oo(ro.prototype,"error",[_a],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),oo(ro.prototype,"updateSettings",[vl],Object.getOwnPropertyDescriptor(ro.prototype,"updateSettings"),ro.prototype),oo(ro.prototype,"logOut",[vl],Object.getOwnPropertyDescriptor(ro.prototype,"logOut"),ro.prototype),ro));var co,ho,po,fo;function mo(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function go(e,t,n,r,i){var s={};return Object.keys(r).forEach((function(e){s[e]=r[e]})),s.enumerable=!!s.enumerable,s.configurable=!!s.configurable,("value"in s||s.initializer)&&(s.writable=!0),s=n.slice().reverse().reduce((function(n,r){return r(e,t,n)||n}),s),i&&void 0!==s.initializer&&(s.value=s.initializer?s.initializer.call(i):void 0,s.initializer=void 0),void 0===s.initializer&&(Object.defineProperty(e,t,s),s=null),s}let bo=(ho=go((co=class extends za{constructor(...e){super(...e),mo(this,"api",ho,this),mo(this,"processing",po,this),mo(this,"following",fo,this)}async toggleFollowing(){if(this.processing)return;let{username:e}=this.args.user;this.processing=!0;try{let t=await this.api[this.following?"unfollowUser":"followUser"](e);this.following=t.following}finally{this.processing=!1}}}).prototype,"api",[Ra],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),po=go(co.prototype,"processing",[_a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),fo=go(co.prototype,"following",[_a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.args.user.following}}),go(co.prototype,"toggleFollowing",[vl],Object.getOwnPropertyDescriptor(co.prototype,"toggleFollowing"),co.prototype),co);var vo,yo;Ts({id:"tcSsmcuF",block:'{"symbols":["@user"],"statements":[[1,1,0,0,"\\n    "],[9,"button",false],[14,"class",[32,["btn btn-sm btn",[31,42,2,[27,[26,0,"CallHead"],[]],[[27,[24,0],["following"]],"-","-outline-"],null],"secondary action-btn ",[31,100,2,[27,[26,0,"CallHead"],[]],[[27,[24,0],["processing"]],"disabled"],null]]],null],[3,0,0,[27,[26,1,"ModifierHead"],[]],["click",[27,[24,0],["toggleFollowing"]]],null],[10],[1,1,0,0,"\\n      "],[9,"i",true],[13,"class",[32,["ion-",[31,203,2,[27,[26,0,"CallHead"],[]],[[27,[24,0],["following"]],"minus","plus"],null],"-round"]],null],[10],[11],[1,1,0,0,"\\n       \\n      "],[1,0,0,0,[31,271,2,[27,[26,0,"CallHead"],[]],[[27,[24,0],["following"]],"Unfollow","Follow"],null]],[1,1,0,0," "],[1,0,0,0,[27,[24,1],["username"]]],[1,1,0,0,"\\n    "],[11],[1,1,0,0,"\\n  "]],"hasEval":false,"upvars":["if","on"]}',meta:{scope:()=>({on:ml})}},bo);let ko=Ts({id:"ZgWoftqU",block:'{"symbols":["user","@currentUser","@username"],"statements":[[1,1,0,0,"\\n    "],[7,"Await",[],[["@promise"],[[27,[24,0],["profile"]]]],[["rejected","resolved"],[{"statements":[[1,1,0,0,"\\n        Uh oh!\\n      "]],"parameters":[]},{"statements":[[1,1,0,0,"\\n        "],[9,"div",true],[12,"class","profile-page",null],[10],[1,1,0,0,"\\n          "],[9,"div",true],[12,"class","user-info",null],[10],[1,1,0,0,"\\n            "],[9,"div",true],[12,"class","container",null],[10],[1,1,0,0,"\\n              "],[9,"div",true],[12,"class","row",null],[10],[1,1,0,0,"\\n                "],[9,"div",true],[12,"class","col-xs-12 col-md-10 offset-md-1",null],[10],[1,1,0,0,"\\n                  "],[9,"img",true],[13,"src",[27,[24,1],["image"]],null],[12,"class","user-img",null],[10],[11],[1,1,0,0,"\\n                  "],[9,"h4",true],[10],[1,0,0,0,[27,[24,1],["username"]]],[11],[1,1,0,0,"\\n                  "],[9,"p",true],[10],[1,1,0,0,"\\n                    "],[1,0,0,0,[27,[24,1],["bio"]]],[1,1,0,0,"\\n                  "],[11],[1,1,0,0,"\\n\\n"],[5,[27,[26,0,"BlockHead"],[]],[[31,530,2,[27,[26,1,"CallHead"],[]],[[27,[24,2],["username"]],[27,[24,3],[]]],null]],null,[["default","else"],[{"statements":[[1,1,0,0,"                    "],[7,"LinkTo",[[23,"class","btn btn-sm btn-outline-secondary action-btn",null]],[["@route"],["settings"]],[["default"],[{"statements":[[1,1,0,0,"\\n                      "],[9,"i",true],[12,"class","ion-gear-a",null],[10],[11],[1,1,0,0," Edit Profile Settings\\n                    "]],"parameters":[]}]]],[1,1,0,0,"\\n"]],"parameters":[]},{"statements":[[5,[27,[26,0,"BlockHead"],[]],[[27,[24,2],[]]],null,[["default"],[{"statements":[[1,1,0,0,"                    "],[7,"FollowButton",[],[["@user"],[[27,[24,1],[]]]],null],[1,1,0,0,"\\n                  "]],"parameters":[]}]]]],"parameters":[]}]]],[1,1,0,0,"                "],[11],[1,1,0,0,"\\n              "],[11],[1,1,0,0,"\\n            "],[11],[1,1,0,0,"\\n          "],[11],[1,1,0,0,"\\n\\n          "],[9,"div",true],[12,"class","container",null],[10],[1,1,0,0,"\\n            "],[9,"div",true],[12,"class","row",null],[10],[1,1,0,0,"\\n              "],[9,"div",true],[12,"class","col-xs-12 col-md-10 offset-md-1",null],[10],[1,1,0,0,"\\n                "],[9,"div",true],[12,"class","articles-toggle",null],[10],[1,1,0,0,"\\n                  "],[9,"ul",true],[12,"class","nav nav-pills outline-active",null],[10],[1,1,0,0,"\\n                    "],[9,"li",true],[12,"class","nav-item",null],[10],[1,1,0,0,"\\n                      "],[7,"LinkTo",[[23,"class","nav-link",null]],[["@route","@params"],["profile",[27,[24,3],[]]]],[["default"],[{"statements":[[1,1,0,0,"\\n                        My Articles\\n                      "]],"parameters":[]}]]],[1,1,0,0,"\\n                    "],[11],[1,1,0,0,"\\n                    "],[9,"li",true],[12,"class","nav-item",null],[10],[1,1,0,0,"\\n                      "],[7,"LinkTo",[[23,"class","nav-link",null]],[["@route","@params"],["favorites",[27,[24,3],[]]]],[["default"],[{"statements":[[1,1,0,0,"\\n                        Favorited Articles\\n                      "]],"parameters":[]}]]],[1,1,0,0,"\\n                    "],[11],[1,1,0,0,"\\n                  "],[11],[1,1,0,0,"\\n                "],[11],[1,1,0,0,"\\n\\n                "],[7,"ArticleList",[],[["@loadArticles"],[[27,[24,0],["articleLoader"]]]],null],[1,1,0,0,"\\n              "],[11],[1,1,0,0,"\\n            "],[11],[1,1,0,0,"\\n          "],[11],[1,1,0,0,"\\n        "],[11],[1,1,0,0,"\\n      "]],"parameters":[1]}]]],[1,1,0,0,"\\n  "]],"hasEval":false,"upvars":["if","eq"]}',meta:{scope:()=>({Await:ol,eq:Ia,ArticleList:Ml,LinkTo:el,FollowButton:bo})}},(yo=function(e,t,n,r,i){var s={};return Object.keys(r).forEach((function(e){s[e]=r[e]})),s.enumerable=!!s.enumerable,s.configurable=!!s.configurable,("value"in s||s.initializer)&&(s.writable=!0),s=n.slice().reverse().reduce((function(n,r){return r(e,t,n)||n}),s),i&&void 0!==s.initializer&&(s.value=s.initializer?s.initializer.call(i):void 0,s.initializer=void 0),void 0===s.initializer&&(Object.defineProperty(e,t,s),s=null),s}((vo=class extends za{constructor(...e){var t,n,r;super(...e),function(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}(this,"api",yo,this),r=void 0,(n="lastFetchedProfile")in(t=this)?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r}get tab(){return this.args.favorites?"favorites":"mine"}get profile(){var e;let{username:t}=this.args;return(null===(e=this.lastFetchedProfile)||void 0===e?void 0:e.username)!==this.args.username&&(this.lastFetchedProfile={username:t,promise:this.api.getProfile(t)}),this.lastFetchedProfile.promise}get articleLoader(){let{username:e}=this.args;return"mine"===this.tab?(t,n)=>this.api.listArticles({author:e,offset:t,limit:n}):(t,n)=>this.api.listArticles({favorited:e,offset:t,limit:n})}}).prototype,"api",[Ra],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),vo));var wo,xo,So,Eo,Ao,Co,zo,_o,To;function Oo(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function Ro(e,t,n,r,i){var s={};return Object.keys(r).forEach((function(e){s[e]=r[e]})),s.enumerable=!!s.enumerable,s.configurable=!!s.configurable,("value"in s||s.initializer)&&(s.writable=!0),s=n.slice().reverse().reduce((function(n,r){return r(e,t,n)||n}),s),i&&void 0!==s.initializer&&(s.value=s.initializer?s.initializer.call(i):void 0,s.initializer=void 0),void 0===s.initializer&&(Object.defineProperty(e,t,s),s=null),s}let Lo=Ts({id:"LF25mXGq",block:'{"symbols":["article","tag","@currentUser"],"statements":[[1,1,0,0,"\\n    "],[7,"Await",[],[["@promise"],[[27,[24,0],["article"]]]],[["resolved"],[{"statements":[[1,1,0,0,"\\n        "],[9,"div",true],[12,"class","article-page",null],[10],[1,1,0,0,"\\n          "],[9,"div",true],[12,"class","banner",null],[10],[1,1,0,0,"\\n            "],[9,"div",true],[12,"class","container",null],[10],[1,1,0,0,"\\n              "],[9,"h1",true],[10],[1,0,0,0,[27,[24,1],["title"]]],[11],[1,1,0,0,"\\n\\n              "],[7,"ArticleMeta",[],[["@article","@currentUser"],[[27,[24,1],[]],[27,[24,3],[]]]],null],[1,1,0,0,"\\n            "],[11],[1,1,0,0,"\\n          "],[11],[1,1,0,0,"\\n\\n          "],[9,"div",true],[12,"class","container page",null],[10],[1,1,0,0,"\\n            "],[9,"div",true],[12,"class","row article-content",null],[10],[1,1,0,0,"\\n              "],[9,"div",true],[12,"class","col-xs-12",null],[10],[1,1,0,0,"\\n                "],[9,"div",true],[10],[1,1,0,0,[31,479,8,[27,[26,0,"CallHead"],[]],[[27,[24,1],["body"]]],null]],[11],[1,1,0,0,"\\n\\n                "],[9,"ul",true],[12,"class","tag-list",null],[10],[1,1,0,0,"\\n"],[5,[27,[26,1,"BlockHead"],[]],[[27,[24,1],["tagList"]]],null,[["default"],[{"statements":[[1,1,0,0,"                    "],[9,"li",true],[12,"class","tag-default tag-pill tag-outline",null],[10],[1,0,0,0,[27,[24,2],[]]],[11],[1,1,0,0,"\\n"]],"parameters":[2]}]]],[1,1,0,0,"                "],[11],[1,1,0,0,"\\n              "],[11],[1,1,0,0,"\\n            "],[11],[1,1,0,0,"\\n\\n            "],[9,"hr",true],[10],[11],[1,1,0,0,"\\n\\n            "],[9,"div",true],[12,"class","article-actions",null],[10],[11],[1,1,0,0,"\\n\\n            "],[9,"div",true],[12,"class","row",null],[10],[1,1,0,0,"\\n              "],[9,"div",true],[12,"class","col-xs-12 col-md-8 offset-md-2",null],[10],[1,1,0,0,"\\n                "],[7,"Comments",[],[["@article","@user"],[[27,[24,1],[]],[27,[24,3],[]]]],null],[1,1,0,0,"\\n              "],[11],[1,1,0,0,"\\n            "],[11],[1,1,0,0,"\\n          "],[11],[1,1,0,0,"\\n        "],[11],[1,1,0,0,"\\n      "]],"parameters":[1]}]]],[1,1,0,0,"\\n  "]],"hasEval":false,"upvars":["markdown","each"]}',meta:{scope:()=>({Await:ol,markdown:Fa,Comments:Po,ArticleMeta:Mo})}},(To=Ro((_o=class extends za{constructor(...e){super(...e),Oo(this,"api",To,this)}get article(){return this.api.getArticle(this.args.slug)}}).prototype,"api",[Ra],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_o)),Po=(xo=Ro((wo=class extends za{constructor(...e){super(...e),Oo(this,"api",xo,this),Oo(this,"comments",So,this)}async postComment(e,t){try{var n;await this.api.addComment(this.args.article.slug,null!==(n=e.body)&&void 0!==n?n:""),t.reset(),this.comments=this.api.getComments(this.args.article.slug)}catch{}}async deleteComment(e){try{await this.api.deleteComment(this.args.article.slug,e.id),this.comments=this.api.getComments(this.args.article.slug)}catch{}}}).prototype,"api",[Ra],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),So=Ro(wo.prototype,"comments",[_a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.api.getComments(this.args.article.slug)}}),Ro(wo.prototype,"postComment",[vl],Object.getOwnPropertyDescriptor(wo.prototype,"postComment"),wo.prototype),Ro(wo.prototype,"deleteComment",[vl],Object.getOwnPropertyDescriptor(wo.prototype,"deleteComment"),wo.prototype),wo);Ts({id:"BsaC/0qZ",block:'{"symbols":["previous","comments","@user"],"statements":[[1,1,0,0,"\\n"],[5,[27,[26,2,"BlockHead"],[]],[[27,[24,3],[]]],null,[["default"],[{"statements":[[1,1,0,0,"      "],[9,"form",false],[23,"class","card comment-form",null],[3,0,0,[27,[26,1,"ModifierHead"],[]],["submit",[31,72,14,[27,[26,0,"CallHead"],[]],[[27,[24,0],["postComment"]]],null]],null],[10],[1,1,0,0,"\\n        "],[9,"div",true],[12,"class","card-block",null],[10],[1,1,0,0,"\\n          "],[9,"textarea",true],[12,"class","form-control",null],[12,"placeholder","Write a comment...",null],[12,"rows","3",null],[12,"name","body",null],[10],[11],[1,1,0,0,"\\n        "],[11],[1,1,0,0,"\\n        "],[9,"div",true],[12,"class","card-footer",null],[10],[1,1,0,0,"\\n          "],[9,"img",true],[13,"src",[27,[24,3],["image"]],null],[12,"class","comment-author-img",null],[10],[11],[1,1,0,0,"\\n          "],[9,"button",true],[12,"class","btn btn-sm btn-primary",null],[10],[1,1,0,0,"\\n            Post Comment\\n          "],[11],[1,1,0,0,"\\n        "],[11],[1,1,0,0,"\\n      "],[11],[1,1,0,0,"\\n"]],"parameters":[]}]]],[1,1,0,0,"\\n    "],[7,"Await",[],[["@promise"],[[27,[24,0],["comments"]]]],[["resolved","pending"],[{"statements":[[1,1,0,0,"\\n        "],[7,"CommentsList",[],[["@user","@comments","@deleteComment"],[[27,[24,3],[]],[27,[24,2],[]],[27,[24,0],["deleteComment"]]]],null],[1,1,0,0,"\\n      "]],"parameters":[2]},{"statements":[[1,1,0,0,"\\n"],[5,[27,[26,2,"BlockHead"],[]],[[27,[24,1],[]]],null,[["default"],[{"statements":[[1,1,0,0,"          "],[7,"CommentsList",[],[["@user","@comments","@deleteComment"],[[27,[24,3],[]],[27,[24,1],[]],[27,[24,0],["deleteComment"]]]],null],[1,1,0,0,"\\n"]],"parameters":[]}]]],[1,1,0,0,"      "]],"parameters":[1]}]]],[1,1,0,0,"\\n  "]],"hasEval":false,"upvars":["gatherFormData","on","if"]}',meta:{scope:()=>({on:ml,Await:ol,gatherFormData:qa,CommentsList:No})}},Po);let Mo=(Ao=Ro((Eo=class extends za{constructor(...e){super(...e),Oo(this,"api",Ao,this),Oo(this,"routing",Co,this),Oo(this,"isDeleting",zo,this)}async deleteArticle(){this.isDeleting=!0;try{await this.api.deleteArticle(this.args.article.slug),this.routing.transitionTo("home")}catch{}finally{this.isDeleting=!1}}}).prototype,"api",[Ra],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Co=Ro(Eo.prototype,"routing",[Ra],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),zo=Ro(Eo.prototype,"isDeleting",[_a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Ro(Eo.prototype,"deleteArticle",[vl],Object.getOwnPropertyDescriptor(Eo.prototype,"deleteArticle"),Eo.prototype),Eo);Ts({id:"2TsZ42fv",block:'{"symbols":["@article","@currentUser"],"statements":[[1,1,0,0,"\\n    "],[9,"div",true],[12,"class","article-meta",null],[10],[1,1,0,0,"\\n      "],[7,"LinkTo",[],[["@route","@params"],["profile",[27,[24,1],["author","username"]]]],[["default"],[{"statements":[[1,1,0,0,"\\n        "],[9,"img",true],[13,"src",[27,[24,1],["author","image"]],null],[10],[11],[1,1,0,0,"\\n      "]],"parameters":[]}]]],[1,1,0,0,"\\n\\n      "],[9,"div",true],[12,"class","info",null],[10],[1,1,0,0,"\\n        "],[7,"LinkTo",[[23,"class","author",null]],[["@route","@params"],["profile",[27,[24,1],["author","username"]]]],[["default"],[{"statements":[[1,1,0,0,"\\n          "],[1,0,0,0,[27,[24,1],["author","username"]]],[1,1,0,0,"\\n        "]],"parameters":[]}]]],[1,1,0,0,"\\n        "],[9,"span",true],[12,"class","date",null],[10],[1,0,0,0,[31,361,12,[27,[26,1,"CallHead"],[]],[[27,[24,1],["createdAt"]]],null]],[11],[1,1,0,0,"\\n      "],[11],[1,1,0,0,"\\n\\n"],[5,[27,[26,3,"BlockHead"],[]],[[31,429,2,[27,[26,2,"CallHead"],[]],[[27,[24,1],["author","username"]],[27,[24,2],["username"]]],null]],null,[["default","else"],[{"statements":[[1,1,0,0,"        "],[7,"LinkTo",[[23,"class","btn btn-outline-secondary btn-sm",null]],[["@route","@params"],["editor",[27,[24,1],["slug"]]]],[["default"],[{"statements":[[1,1,0,0,"\\n          "],[9,"i",true],[12,"class","ion-edit",null],[10],[11],[1,1,0,0," Edit Article\\n        "]],"parameters":[]}]]],[1,1,0,0,"\\n\\n        "],[9,"button",false],[23,"class","btn btn-outline-danger btn-sm",null],[14,"disabled",[27,[24,0],["isDeleting"]],null],[3,0,0,[27,[26,0,"ModifierHead"],[]],["click",[27,[24,0],["deleteArticle"]]],null],[10],[1,1,0,0,"\\n          "],[9,"i",true],[12,"class","ion-trash-a",null],[10],[11],[1,1,0,0," Delete Article\\n        "],[11],[1,1,0,0,"\\n"]],"parameters":[]},{"statements":[[1,1,0,0,"        "],[7,"FollowButton",[],[["@user"],[[27,[24,1],["author"]]]],null],[1,1,0,0,"\\n        "],[7,"FavoriteButton",[],[["@article"],[[27,[24,1],[]]]],null],[1,1,0,0,"\\n"]],"parameters":[]}]]],[1,1,0,0,"    "],[11],[1,1,0,0,"\\n  "]],"hasEval":false,"upvars":["on","humanizeDate","eq","if"]}',meta:{scope:()=>({on:ml,LinkTo:el,humanizeDate:Wa,eq:Ia,FollowButton:bo,FavoriteButton:_l})}},Mo);class No extends za{}var Bo,Do,jo,Uo,Io;function Ho(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function $o(e,t,n,r,i){var s={};return Object.keys(r).forEach((function(e){s[e]=r[e]})),s.enumerable=!!s.enumerable,s.configurable=!!s.configurable,("value"in s||s.initializer)&&(s.writable=!0),s=n.slice().reverse().reduce((function(n,r){return r(e,t,n)||n}),s),i&&void 0!==s.initializer&&(s.value=s.initializer?s.initializer.call(i):void 0,s.initializer=void 0),void 0===s.initializer&&(Object.defineProperty(e,t,s),s=null),s}Ts({id:"AX3pRVJh",block:'{"symbols":["comment","@deleteComment","@user","@comments"],"statements":[[1,1,0,0,"\\n"],[5,[27,[26,5,"BlockHead"],[]],[[27,[24,4],[]]],[["key"],["id"]],[["default"],[{"statements":[[1,1,0,0,"      "],[9,"div",true],[12,"class","card",null],[10],[1,1,0,0,"\\n        "],[9,"div",true],[12,"class","card-block",null],[10],[1,1,0,0,"\\n          "],[9,"p",true],[12,"class","card-text",null],[10],[1,0,0,0,[27,[24,1],["body"]]],[11],[1,1,0,0,"\\n        "],[11],[1,1,0,0,"\\n        "],[9,"div",true],[12,"class","card-footer",null],[10],[1,1,0,0,"\\n          "],[7,"LinkTo",[[23,"class","comment-author",null]],[["@route","@params"],["profile",[27,[24,1],["author","username"]]]],[["default"],[{"statements":[[1,1,0,0,"\\n            "],[9,"img",true],[13,"src",[32,[[27,[24,1],["author","image"]]]],null],[12,"class","comment-author-img",null],[10],[11],[1,1,0,0,"\\n          "]],"parameters":[]}]]],[1,1,0,0,"\\n           \\n          "],[7,"LinkTo",[[23,"class","comment-author",null]],[["@route","@params"],["profile",[27,[24,1],["author","username"]]]],[["default"],[{"statements":[[1,1,0,0,"\\n            "],[1,0,0,0,[27,[24,1],["author","username"]]],[1,1,0,0,"\\n          "]],"parameters":[]}]]],[1,1,0,0,"\\n          "],[9,"span",true],[12,"class","date-posted",null],[10],[1,0,0,0,[31,609,12,[27,[26,2,"CallHead"],[]],[[27,[24,1],["createdAt"]]],null]],[11],[1,1,0,0,"\\n          "],[9,"span",true],[12,"class","mod-options",null],[10],[1,1,0,0,"\\n"],[5,[27,[26,4,"BlockHead"],[]],[[31,705,2,[27,[26,3,"CallHead"],[]],[[27,[24,1],["author","username"]],[27,[24,3],["username"]]],null]],null,[["default"],[{"statements":[[1,1,0,0,"              "],[9,"i",false],[23,"class","ion-trash-a",null],[3,0,0,[27,[26,1,"ModifierHead"],[]],["click",[31,801,2,[27,[26,0,"CallHead"],[]],[[27,[24,2],[]],[27,[24,1],[]]],null]],null],[10],[11],[1,1,0,0,"\\n"]],"parameters":[]}]]],[1,1,0,0,"          "],[11],[1,1,0,0,"\\n        "],[11],[1,1,0,0,"\\n      "],[11],[1,1,0,0,"\\n"]],"parameters":[1]}]]],[1,1,0,0,"  "]],"hasEval":false,"upvars":["fn","on","humanizeDate","eq","if","each"]}',meta:{scope:()=>({on:ml,fn:Na,LinkTo:el,humanizeDate:Wa,eq:Ia})}},No);let Fo=Ts({id:"EVO3iQ4q",block:'{"symbols":["article"],"statements":[[1,1,0,0,"\\n    "],[7,"RequireUser",[],[[],[]],[["default"],[{"statements":[[1,1,0,0,"\\n      "],[7,"Await",[],[["@promise"],[[27,[24,0],["article"]]]],[["resolved"],[{"statements":[[1,1,0,0,"\\n          "],[9,"div",true],[12,"class","editor-page",null],[10],[1,1,0,0,"\\n            "],[9,"div",true],[12,"class","container page",null],[10],[1,1,0,0,"\\n              "],[9,"div",true],[12,"class","row",null],[10],[1,1,0,0,"\\n                "],[9,"div",true],[12,"class","col-md-10 offset-md-1 col-xs-12",null],[10],[1,1,0,0,"\\n                  "],[7,"ErrorMessages",[],[["@error"],[[27,[24,0],["error"]]]],null],[1,1,0,0,"\\n\\n                  "],[9,"form",false],[3,0,0,[27,[26,1,"ModifierHead"],[]],["submit",[31,361,14,[27,[26,0,"CallHead"],[]],[[27,[24,0],["submitArticle"]]],null]],null],[10],[1,1,0,0,"\\n                    "],[9,"fieldset",true],[10],[1,1,0,0,"\\n                      "],[9,"fieldset",true],[12,"class","form-group",null],[10],[1,1,0,0,"\\n                        "],[9,"input",true],[12,"class","form-control form-control-lg",null],[12,"placeholder","Article Title",null],[12,"name","title",null],[13,"value",[27,[24,1],["title"]],null],[12,"type","text",null],[10],[11],[1,1,0,0,"\\n                      "],[11],[1,1,0,0,"\\n                      "],[9,"fieldset",true],[12,"class","form-group",null],[10],[1,1,0,0,"\\n                        "],[9,"input",true],[12,"class","form-control",null],[12,"placeholder","What\'s this article about?",null],[12,"name","description",null],[13,"value",[27,[24,1],["description"]],null],[12,"type","text",null],[10],[11],[1,1,0,0,"\\n                      "],[11],[1,1,0,0,"\\n                      "],[9,"fieldset",true],[12,"class","form-group",null],[10],[1,1,0,0,"\\n                        "],[9,"textarea",true],[12,"class","form-control",null],[12,"rows","8",null],[12,"placeholder","Write your article (in markdown)",null],[12,"name","body",null],[10],[1,0,0,0,[27,[24,1],["body"]]],[11],[1,1,0,0,"\\n                      "],[11],[1,1,0,0,"\\n                      "],[9,"fieldset",true],[12,"class","form-group",null],[10],[1,1,0,0,"\\n                        "],[9,"input",true],[12,"class","form-control",null],[12,"placeholder","Enter tags",null],[12,"name","tagList",null],[13,"value",[31,1873,2,[27,[26,3,"CallHead"],[]],[[27,[24,1],[]],[31,1885,4,[27,[26,2,"CallHead"],[]],[[27,[24,1],["tagList"]]],[["separator"],[", "]]]],null],null],[12,"type","text",null],[10],[11],[1,1,0,0,"\\n                          "],[9,"div",true],[12,"class","tag-list",null],[10],[1,1,0,0,"\\n                        "],[11],[1,1,0,0,"\\n                      "],[11],[1,1,0,0,"\\n                      "],[9,"button",true],[13,"class",[32,["btn btn-lg pull-xs-right btn-primary ",[31,2164,2,[27,[26,3,"CallHead"],[]],[[27,[24,0],["publishing"]],"disabled"],null]]],null],[13,"disabled",[27,[24,0],["publishing"]],null],[10],[1,1,0,0,"\\n                        Publish Article\\n                      "],[11],[1,1,0,0,"\\n                    "],[11],[1,1,0,0,"\\n                  "],[11],[1,1,0,0,"\\n                "],[11],[1,1,0,0,"\\n              "],[11],[1,1,0,0,"\\n            "],[11],[1,1,0,0,"\\n          "],[11],[1,1,0,0,"\\n        "]],"parameters":[1]}]]],[1,1,0,0,"\\n    "]],"parameters":[]}]]],[1,1,0,0,"\\n  "]],"hasEval":false,"upvars":["gatherFormData","on","join","if"]}',meta:{scope:()=>({on:ml,ErrorMessages:Wl,Await:ol,RequireUser:no,join:Ha,gatherFormData:qa})}},(Do=$o((Bo=class extends za{constructor(...e){super(...e),Ho(this,"api",Do,this),Ho(this,"routing",jo,this),Ho(this,"error",Uo,this),Ho(this,"publishing",Io,this)}async submitArticle(e){var t;let n={...e,tagList:null===(t=e.tagList)||void 0===t?void 0:t.split(/,?\s+/)};this.publishing=!0;try{let e;e=this.args.slug?await this.api.updateArticle(this.args.slug,n):await this.api.createArticle(n),this.error=null,this.routing.transitionTo("article",e.slug)}catch(e){this.error=e}finally{this.publishing=!1}}get article(){return this.args.slug?this.api.getArticle(this.args.slug):Promise.resolve(null)}}).prototype,"api",[Ra],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),jo=$o(Bo.prototype,"routing",[Ra],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Uo=$o(Bo.prototype,"error",[_a],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Io=$o(Bo.prototype,"publishing",[_a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),$o(Bo.prototype,"submitArticle",[vl],Object.getOwnPropertyDescriptor(Bo.prototype,"submitArticle"),Bo.prototype),Bo));var Vo,qo,Wo,Jo;function Go(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function Zo(e,t,n,r,i){var s={};return Object.keys(r).forEach((function(e){s[e]=r[e]})),s.enumerable=!!s.enumerable,s.configurable=!!s.configurable,("value"in s||s.initializer)&&(s.writable=!0),s=n.slice().reverse().reduce((function(n,r){return r(e,t,n)||n}),s),i&&void 0!==s.initializer&&(s.value=s.initializer?s.initializer.call(i):void 0,s.initializer=void 0),void 0===s.initializer&&(Object.defineProperty(e,t,s),s=null),s}class Yo extends za{}Ts({id:"f/vWykSB",block:'{"symbols":["user"],"statements":[[1,1,0,0,"\\n    "],[7,"ResolveUserSession",[],[[],[]],[["default"],[{"statements":[[1,1,0,0,"\\n      "],[9,"nav",true],[12,"class","navbar navbar-light",null],[10],[1,1,0,0,"\\n        "],[9,"div",true],[12,"class","container",null],[10],[1,1,0,0,"\\n          "],[7,"LinkTo",[[23,"class","navbar-brand",null]],[["@route"],["home"]],[["default"],[{"statements":[[1,1,0,0,"conduit"]],"parameters":[]}]]],[1,1,0,0,"\\n          "],[9,"ul",true],[12,"class","nav navbar-nav pull-xs-right",null],[10],[1,1,0,0,"\\n            "],[9,"li",true],[12,"class","nav-item",null],[10],[1,1,0,0,"\\n              "],[7,"LinkTo",[[23,"class","nav-link",null]],[["@route"],["home"]],[["default"],[{"statements":[[1,1,0,0,"Home"]],"parameters":[]}]]],[1,1,0,0,"\\n            "],[11],[1,1,0,0,"\\n"],[5,[27,[26,0,"BlockHead"],[]],[[27,[24,1],[]]],null,[["default","else"],[{"statements":[[1,1,0,0,"              "],[9,"li",true],[12,"class","nav-item",null],[10],[1,1,0,0,"\\n                "],[7,"LinkTo",[[23,"class","nav-link",null]],[["@route"],["editor"]],[["default"],[{"statements":[[9,"i",true],[12,"class","ion-compose",null],[10],[11],[1,1,0,0," New Article"]],"parameters":[]}]]],[1,1,0,0,"\\n              "],[11],[1,1,0,0,"\\n              "],[9,"li",true],[12,"class","nav-item",null],[10],[1,1,0,0,"\\n                "],[7,"LinkTo",[[23,"class","nav-link",null]],[["@route"],["settings"]],[["default"],[{"statements":[[9,"i",true],[12,"class","ion-gear-a",null],[10],[11],[1,1,0,0," Settings"]],"parameters":[]}]]],[1,1,0,0,"\\n              "],[11],[1,1,0,0,"\\n              "],[9,"li",true],[12,"class","nav-item",null],[10],[1,1,0,0,"\\n                "],[7,"LinkTo",[[23,"class","nav-link",null]],[["@route","@params"],["profile",[27,[24,1],["username"]]]],[["default"],[{"statements":[[1,1,0,0," "],[1,0,0,0,[27,[24,1],["username"]]]],"parameters":[]}]]],[1,1,0,0,"\\n              "],[11],[1,1,0,0,"\\n"]],"parameters":[]},{"statements":[[1,1,0,0,"              "],[9,"li",true],[12,"class","nav-item",null],[10],[1,1,0,0,"\\n                "],[7,"LinkTo",[[23,"class","nav-link",null]],[["@route"],["login"]],[["default"],[{"statements":[[1,1,0,0," Sign in"]],"parameters":[]}]]],[1,1,0,0,"\\n              "],[11],[1,1,0,0,"\\n              "],[9,"li",true],[12,"class","nav-item",null],[10],[1,1,0,0,"\\n                "],[7,"LinkTo",[[23,"class","nav-link",null]],[["@route"],["register"]],[["default"],[{"statements":[[1,1,0,0," Sign up"]],"parameters":[]}]]],[1,1,0,0,"\\n              "],[11],[1,1,0,0,"\\n"]],"parameters":[]}]]],[1,1,0,0,"          "],[11],[1,1,0,0,"\\n        "],[11],[1,1,0,0,"\\n      "],[11],[1,1,0,0,"\\n\\n      "],[7,"ActivePageOutlet",[],[["@user"],[[27,[24,1],[]]]],null],[1,1,0,0,"\\n\\n      "],[9,"footer",true],[10],[1,1,0,0,"\\n        "],[9,"div",true],[12,"class","container",null],[10],[1,1,0,0,"\\n          "],[7,"LinkTo",[[23,"class","logo-font",null]],[["@route"],["home"]],[["default"],[{"statements":[[1,1,0,0,"conduit"]],"parameters":[]}]]],[1,1,0,0,"\\n          "],[9,"span",true],[12,"class","attribution",null],[10],[1,1,0,0,"\\n            An interactive learning project from "],[9,"a",true],[12,"href","https://thinkster.io",null],[10],[1,1,0,0,"Thinkster"],[11],[1,1,0,0,". Code\\n            & design licensed under MIT.\\n          "],[11],[1,1,0,0,"\\n        "],[11],[1,1,0,0,"\\n      "],[11],[1,1,0,0,"\\n    "]],"parameters":[1]}]]],[1,1,0,0,"\\n  "]],"hasEval":false,"upvars":["if"]}',meta:{scope:()=>({LinkTo:el,ResolveUserSession:Ko,ActivePageOutlet:Xo})}},Yo);let Ko=(qo=Zo((Vo=class extends za{constructor(...e){super(...e),Go(this,"api",qo,this)}}).prototype,"api",[Ra],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Vo);Ts({id:"FKoaXzY/",block:'{"symbols":["user","&default"],"statements":[[1,1,0,0,"\\n    "],[7,"Await",[],[["@promise","@expectSettledPromises"],[[27,[24,0],["api","currentUser"]],false]],[["resolved","pending","rejected"],[{"statements":[[1,1,0,0,"\\n        "],[16,2,[[27,[24,1],[]]]],[1,1,0,0,"\\n      "]],"parameters":[1]},{"statements":[[1,1,0,0,"\\n"],[1,1,0,0,"      "]],"parameters":[]},{"statements":[[1,1,0,0,"\\n        I mean I guess you\'ve got a bad JWT in "],[9,"code",true],[10],[1,1,0,0,"localStorage"],[11],[1,1,0,0," or something? Seems bad.\\n      "]],"parameters":[]}]]],[1,1,0,0,"\\n  "]],"hasEval":false,"upvars":[]}',meta:{scope:()=>({Await:ol})}},Ko);let Xo=(Jo=Zo((Wo=class extends za{constructor(...e){super(...e),Go(this,"routing",Jo,this)}}).prototype,"routing",[Ra],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Wo);var Qo,eu,tu;function nu(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function ru(e,t,n,r,i){var s={};return Object.keys(r).forEach((function(e){s[e]=r[e]})),s.enumerable=!!s.enumerable,s.configurable=!!s.configurable,("value"in s||s.initializer)&&(s.writable=!0),s=n.slice().reverse().reduce((function(n,r){return r(e,t,n)||n}),s),i&&void 0!==s.initializer&&(s.value=s.initializer?s.initializer.call(i):void 0,s.initializer=void 0),void 0===s.initializer&&(Object.defineProperty(e,t,s),s=null),s}Ts({id:"c8zqJ6UP",block:'{"symbols":["activeRoute","@user"],"statements":[[1,1,0,0,"\\n"],[5,[27,[26,2,"BlockHead"],[]],[[27,[24,0],["routing","activeRoute"]]],null,[["default"],[{"statements":[[5,[27,[26,1,"BlockHead"],[]],[[31,69,2,[27,[26,0,"CallHead"],[]],[[27,[24,1],[]],"name","login"],null]],null,[["default","else"],[{"statements":[[1,1,0,0,"        "],[7,"AuthPage",[],[[],[]],null],[1,1,0,0,"\\n"]],"parameters":[]},{"statements":[[5,[27,[26,1,"BlockHead"],[]],[[31,140,2,[27,[26,0,"CallHead"],[]],[[27,[24,1],[]],"name","register"],null]],null,[["default","else"],[{"statements":[[1,1,0,0,"        "],[7,"AuthPage",[],[["@register"],[true]],null],[1,1,0,0,"\\n"]],"parameters":[]},{"statements":[[5,[27,[26,1,"BlockHead"],[]],[[31,233,2,[27,[26,0,"CallHead"],[]],[[27,[24,1],[]],"name","home"],null]],null,[["default","else"],[{"statements":[[1,1,0,0,"        "],[7,"HomePage",[],[["@currentUser"],[[27,[24,2],[]]]],null],[1,1,0,0,"}}\\n"]],"parameters":[]},{"statements":[[5,[27,[26,1,"BlockHead"],[]],[[31,328,2,[27,[26,0,"CallHead"],[]],[[27,[24,1],[]],"name","settings"],null]],null,[["default","else"],[{"statements":[[1,1,0,0,"        "],[7,"SettingsPage",[],[["@currentUser"],[[27,[24,2],[]]]],null],[1,1,0,0,"\\n"]],"parameters":[]},{"statements":[[5,[27,[26,1,"BlockHead"],[]],[[31,429,2,[27,[26,0,"CallHead"],[]],[[27,[24,1],[]],"name","editor"],null]],null,[["default","else"],[{"statements":[[1,1,0,0,"        "],[7,"EditorPage",[],[["@slug"],[[27,[24,1],["slug"]]]],null],[1,1,0,0,"\\n"]],"parameters":[]},{"statements":[[5,[27,[26,1,"BlockHead"],[]],[[31,530,2,[27,[26,0,"CallHead"],[]],[[27,[24,1],[]],"name","article"],null]],null,[["default","else"],[{"statements":[[1,1,0,0,"        "],[7,"ArticlePage",[],[["@slug","@currentUser"],[[27,[24,1],["slug"]],[27,[24,2],[]]]],null],[1,1,0,0,"\\n"]],"parameters":[]},{"statements":[[1,1,0,0,"        "],[7,"ProfilePage",[],[["@username","@currentUser","@favorites"],[[27,[24,1],["user"]],[27,[24,2],[]],[31,772,2,[27,[26,0,"CallHead"],[]],[[27,[24,1],[]],"name","favorites"],null]]],null],[1,1,0,0,"\\n      "]],"parameters":[]}]]]],"parameters":[]}]]]],"parameters":[]}]]]],"parameters":[]}]]]],"parameters":[]}]]]],"parameters":[]}]]]],"parameters":[1]}]]],[1,1,0,0,"  "]],"hasEval":false,"upvars":["is","if","let"]}',meta:{scope:()=>({is:Ja,HomePage:Vl,AuthPage:Ql,SettingsPage:uo,ProfilePage:ko,ArticlePage:Lo,EditorPage:Fo})}},Xo);let iu=(eu=ru((Qo=class{constructor(e){this.api=e,nu(this,"jwt",eu,this),nu(this,"userPromise",tu,this)}get isLoggedIn(){return Boolean(this.jwt)}get currentUser(){return this.userPromise?this.userPromise:this.jwt?this.userPromise=this.request("user").then(e=>e.user):Promise.resolve(null)}async logIn(e){let{user:t}=await this.request("users/login",{body:{user:e}});this.setCurrentUser(t)}async logOut(){this.setCurrentUser(null)}async createUser(e){let{user:t}=await this.request("users",{body:{user:e}});this.setCurrentUser(t)}async updateUser(e){await this.request("user",{body:{user:e},method:"PUT"})}async getProfile(e){let{profile:t}=await this.request("profiles/"+e);return t}async followUser(e){let{profile:t}=await this.request(`profiles/${e}/follow`,{method:"POST"});return t}async unfollowUser(e){let{profile:t}=await this.request(`profiles/${e}/follow`,{method:"DELETE"});return t}async listArticles(e){let t=await this.request("articles",{params:e});return{offset:e.offset,limit:e.limit,items:t.articles,total:t.articlesCount}}async listFeedArticles(e){let t=await this.request("articles/feed",{params:e});return{offset:e.offset,limit:e.limit,items:t.articles,total:t.articlesCount}}async getArticle(e){let{article:t}=await this.request("articles/"+e);return t}async createArticle(e){let{article:t}=await this.request("articles",{body:{article:e}});return t}async updateArticle(e,t){let{article:n}=await this.request("articles/"+e,{body:{article:t}});return n}async deleteArticle(e){await this.request("articles/"+e,{method:"DELETE"})}async addComment(e,t){let{comment:n}=await this.request(`articles/${e}/comments`,{body:{comment:{body:t}}});return n}async getComments(e){let{comments:t}=await this.request(`articles/${e}/comments`);return t}async deleteComment(e,t){await this.request(`articles/${e}/comments/${t}`,{method:"DELETE"})}async favoriteArticle(e){let{article:t}=await this.request(`articles/${e}/favorite`,{method:"POST"});return t}async unfavoriteArticle(e){let{article:t}=await this.request(`articles/${e}/favorite`,{method:"DELETE"});return t}async getTags(){let{tags:e}=await this.request("tags");return e}setCurrentUser(e){var t;e?localStorage.setItem("conduit.jwt",e.token):localStorage.removeItem("conduit.jwt"),this.jwt=null!==(t=null==e?void 0:e.token)&&void 0!==t?t:null,this.userPromise=e?Promise.resolve(e):null}async request(e,{body:t,params:n,method:r=(t?"POST":"GET")}={}){let i={};if(this.jwt&&(i.Authorization="Token "+this.jwt),t&&(i["Content-Type"]="application/json"),n){let t=Object.entries(n).map(([e,t])=>`${e}=${encodeURIComponent(""+t)}`).join("&");t&&(e=`${e}?${t}`)}let s=await fetch(`${this.api}/${e}`,{method:r,headers:i,body:JSON.stringify(t)}),a=JSON.parse(await s.text());if(s.status>=200&&s.status<=299)return a;throw a.errors}}).prototype,"jwt",[_a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return localStorage.getItem("conduit.jwt")}}),tu=ru(Qo.prototype,"userPromise",[_a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Qo);!function(e,t){if(t instanceof Element)return va(e,t);const{element:n,args:r,services:s}=t,a=new i(null!=s?s:{});va(e,{element:n,args:r,owner:a})}(Yo,{element:document.body,services:{api:new iu("https://conduit.productionready.io/api"),routing:new tl}})}]);